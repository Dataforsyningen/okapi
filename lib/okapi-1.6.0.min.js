var okapi=(()=>{var Ty=Object.create;var io=Object.defineProperty;var Ry=Object.getOwnPropertyDescriptor;var wy=Object.getOwnPropertyNames;var Iy=Object.getPrototypeOf,Ay=Object.prototype.hasOwnProperty;var Y=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),Ly=(n,t)=>{for(var e in t)io(n,e,{get:t[e],enumerable:!0})},Xu=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of wy(t))!Ay.call(n,r)&&r!==e&&io(n,r,{get:()=>t[r],enumerable:!(i=Ry(t,r))||i.enumerable});return n};var no=(n,t,e)=>(e=n!=null?Ty(Iy(n)):{},Xu(t||!n||!n.__esModule?io(e,"default",{value:n,enumerable:!0}):e,n)),Py=n=>Xu(io({},"__esModule",{value:!0}),n);var Xf=Y((vl,Ml)=>{(function(n,t){typeof vl=="object"&&typeof Ml<"u"?Ml.exports=t():typeof define=="function"&&define.amd?define(t):n.proj4=t()})(vl,function(){"use strict";function n(s,l){if(s[l])return s[l];for(var u,g=Object.keys(s),f=l.toLowerCase().replace(vn,""),_=-1;++_<g.length;)if(u=g[_],u.toLowerCase().replace(vn,"")===f)return s[u]}function t(s){if(typeof s!="string")throw new Error("not a string");this.text=s.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Jt}function e(s){return new t(s).output()}function i(s,l,u){Array.isArray(l)&&(u.unshift(l),l=null);var g=l?{}:s,f=u.reduce(function(_,x){return r(x,_),_},g);l&&(s[l]=f)}function r(s,l){if(Array.isArray(s)){var u=s.shift();if(u==="PARAMETER"&&(u=s.shift()),s.length===1)return Array.isArray(s[0])?(l[u]={},void r(s[0],l[u])):void(l[u]=s[0]);if(s.length)if(u!=="TOWGS84"){if(u==="AXIS")return u in l||(l[u]=[]),void l[u].push(s);Array.isArray(u)||(l[u]={});var g;switch(u){case"UNIT":case"PRIMEM":case"VERT_DATUM":return l[u]={name:s[0].toLowerCase(),convert:s[1]},void(s.length===3&&r(s[2],l[u]));case"SPHEROID":case"ELLIPSOID":return l[u]={name:s[0],a:s[1],rf:s[2]},void(s.length===4&&r(s[3],l[u]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return s[0]=["name",s[0]],void i(l,u,s);default:for(g=-1;++g<s.length;)if(!Array.isArray(s[g]))return r(s,l[u]);return i(l,u,s)}}else l[u]=s;else l[u]=!0}else l[s]=!0}function o(s,l){var u=l[0],g=l[1];!(u in s)&&g in s&&(s[u]=s[g],l.length===3&&(s[u]=l[2](s[u])))}function a(s){return s*w0}function h(s){function l(y){return y*(s.to_meter||1)}if(s.type==="GEOGCS"?s.projName="longlat":s.type==="LOCAL_CS"?(s.projName="identity",s.local=!0):typeof s.PROJECTION=="object"?s.projName=Object.keys(s.PROJECTION)[0]:s.projName=s.PROJECTION,s.AXIS){for(var u="",g=0,f=s.AXIS.length;g<f;++g){var _=[s.AXIS[g][0].toLowerCase(),s.AXIS[g][1].toLowerCase()];_[0].indexOf("north")!==-1||(_[0]==="y"||_[0]==="lat")&&_[1]==="north"?u+="n":_[0].indexOf("south")!==-1||(_[0]==="y"||_[0]==="lat")&&_[1]==="south"?u+="s":_[0].indexOf("east")!==-1||(_[0]==="x"||_[0]==="lon")&&_[1]==="east"?u+="e":_[0].indexOf("west")===-1&&(_[0]!=="x"&&_[0]!=="lon"||_[1]!=="west")||(u+="w")}u.length===2&&(u+="u"),u.length===3&&(s.axis=u)}s.UNIT&&(s.units=s.UNIT.name.toLowerCase(),s.units==="metre"&&(s.units="meter"),s.UNIT.convert&&(s.type==="GEOGCS"?s.DATUM&&s.DATUM.SPHEROID&&(s.to_meter=s.UNIT.convert*s.DATUM.SPHEROID.a):s.to_meter=s.UNIT.convert));var x=s.GEOGCS;s.type==="GEOGCS"&&(x=s),x&&(x.DATUM?s.datumCode=x.DATUM.name.toLowerCase():s.datumCode=x.name.toLowerCase(),s.datumCode.slice(0,2)==="d_"&&(s.datumCode=s.datumCode.slice(2)),s.datumCode!=="new_zealand_geodetic_datum_1949"&&s.datumCode!=="new_zealand_1949"||(s.datumCode="nzgd49"),s.datumCode!=="wgs_1984"&&s.datumCode!=="world_geodetic_system_1984"||(s.PROJECTION==="Mercator_Auxiliary_Sphere"&&(s.sphere=!0),s.datumCode="wgs84"),s.datumCode.slice(-6)==="_ferro"&&(s.datumCode=s.datumCode.slice(0,-6)),s.datumCode.slice(-8)==="_jakarta"&&(s.datumCode=s.datumCode.slice(0,-8)),~s.datumCode.indexOf("belge")&&(s.datumCode="rnb72"),x.DATUM&&x.DATUM.SPHEROID&&(s.ellps=x.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),s.ellps.toLowerCase().slice(0,13)==="international"&&(s.ellps="intl"),s.a=x.DATUM.SPHEROID.a,s.rf=parseFloat(x.DATUM.SPHEROID.rf,10)),x.DATUM&&x.DATUM.TOWGS84&&(s.datum_params=x.DATUM.TOWGS84),~s.datumCode.indexOf("osgb_1936")&&(s.datumCode="osgb36"),~s.datumCode.indexOf("osni_1952")&&(s.datumCode="osni52"),(~s.datumCode.indexOf("tm65")||~s.datumCode.indexOf("geodetic_datum_of_1965"))&&(s.datumCode="ire65"),s.datumCode==="ch1903+"&&(s.datumCode="ch1903"),~s.datumCode.indexOf("israel")&&(s.datumCode="isr93")),s.b&&!isFinite(s.b)&&(s.b=s.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",a],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",a],["x0","false_easting",l],["y0","false_northing",l],["long0","central_meridian",a],["lat0","latitude_of_origin",a],["lat0","standard_parallel_1",a],["lat1","standard_parallel_1",a],["lat2","standard_parallel_2",a],["azimuth","Azimuth"],["alpha","azimuth",a],["srsCode","name"]].forEach(function(y){return o(s,y)}),s.long0||!s.longc||s.projName!=="Albers_Conic_Equal_Area"&&s.projName!=="Lambert_Azimuthal_Equal_Area"||(s.long0=s.longc),s.lat_ts||!s.lat1||s.projName!=="Stereographic_South_Pole"&&s.projName!=="Polar Stereographic (variant B)"||(s.lat0=a(s.lat1>0?90:-90),s.lat_ts=s.lat1)}function c(s){var l=this;if(arguments.length===2){var u=arguments[1];typeof u=="string"?u.charAt(0)==="+"?c[s]=Zt(arguments[1]):c[s]=Ru(arguments[1]):c[s]=u}else if(arguments.length===1){if(Array.isArray(s))return s.map(function(g){Array.isArray(g)?c.apply(l,g):c(g)});if(typeof s=="string"){if(s in c)return c[s]}else"EPSG"in s?c["EPSG:"+s.EPSG]=s:"ESRI"in s?c["ESRI:"+s.ESRI]=s:"IAU2000"in s?c["IAU2000:"+s.IAU2000]=s:console.log(s);return}}function d(s){return typeof s=="string"}function m(s){return s in c}function p(s){return I0.some(function(l){return s.indexOf(l)>-1})}function E(s){var l=n(s,"authority");if(l){var u=n(l,"epsg");return u&&A0.indexOf(u)>-1}}function M(s){var l=n(s,"extension");if(l)return n(l,"proj4")}function b(s){return s[0]==="+"}function w(s){if(!d(s))return s;if(m(s))return c[s];if(p(s)){var l=Ru(s);if(E(l))return c["EPSG:3857"];var u=M(l);return u?Zt(u):l}return b(s)?Zt(s):void 0}function v(s){return s}function S(s,l){var u=Zs.length;return s.names?(Zs[u]=s,s.names.forEach(function(g){Hs[g.toLowerCase()]=u}),this):(console.log(l),!0)}function R(s,l,u,g){var f=s*s,_=l*l,x=(f-_)/f,y=0;return g?(f=(s*=1-x*(yn+x*(xn+x*En)))*s,x=0):y=Math.sqrt(x),{es:x,e:y,ep2:(f-_)/_}}function I(s,l,u,g,f){if(!s){var _=n(at,g);_||(_=O0),s=_.a,l=_.b,u=_.rf}return u&&!l&&(l=(1-1/u)*s),(u===0||Math.abs(s-l)<z)&&(f=!0,l=s),{a:s,b:l,rf:u,sphere:f}}function A(s,l,u,g,f,_,x){var y={};return y.datum_type=s===void 0||s==="none"?_n:Vs,l&&(y.datum_params=l.map(parseFloat),y.datum_params[0]===0&&y.datum_params[1]===0&&y.datum_params[2]===0||(y.datum_type=vi),y.datum_params.length>3&&(y.datum_params[3]===0&&y.datum_params[4]===0&&y.datum_params[5]===0&&y.datum_params[6]===0||(y.datum_type=Mi,y.datum_params[3]*=Yi,y.datum_params[4]*=Yi,y.datum_params[5]*=Yi,y.datum_params[6]=y.datum_params[6]/1e6+1))),x&&(y.datum_type=pn,y.grids=x),y.a=u,y.b=g,y.es=f,y.ep2=_,y}function L(s){return s===void 0?null:s.split(",").map(F)}function F(s){if(s.length===0)return null;var l=s[0]==="@";return l&&(s=s.slice(1)),s==="null"?{name:"null",mandatory:!l,grid:null,isNull:!0}:{name:s,mandatory:!l,grid:Iu[s]||null,isNull:!1}}function D(s){return s/3600*Math.PI/180}function B(s){var l=s.getInt32(8,!1);return l!==11&&((l=s.getInt32(8,!0))!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function q(s,l){return{nFields:s.getInt32(8,l),nSubgridFields:s.getInt32(24,l),nSubgrids:s.getInt32(40,l),shiftType:W(s,56,64).trim(),fromSemiMajorAxis:s.getFloat64(120,l),fromSemiMinorAxis:s.getFloat64(136,l),toSemiMajorAxis:s.getFloat64(152,l),toSemiMinorAxis:s.getFloat64(168,l)}}function W(s,l,u){return String.fromCharCode.apply(null,new Uint8Array(s.buffer.slice(l,u)))}function Z(s,l,u){for(var g=[],f=0;f<l.nSubgrids;f++){var _=st(s,176,u),x=bt(s,176,_,u),y=Math.round(1+(_.upperLongitude-_.lowerLongitude)/_.longitudeInterval),C=Math.round(1+(_.upperLatitude-_.lowerLatitude)/_.latitudeInterval);g.push({ll:[D(_.lowerLongitude),D(_.lowerLatitude)],del:[D(_.longitudeInterval),D(_.latitudeInterval)],lim:[y,C],count:_.gridNodeCount,cvs:nt(x)})}return g}function nt(s){return s.map(function(l){return[D(l.longitudeShift),D(l.latitudeShift)]})}function st(s,l,u){return{name:W(s,l+8,l+16).trim(),parent:W(s,l+24,l+24+8).trim(),lowerLatitude:s.getFloat64(l+72,u),upperLatitude:s.getFloat64(l+88,u),lowerLongitude:s.getFloat64(l+104,u),upperLongitude:s.getFloat64(l+120,u),latitudeInterval:s.getFloat64(l+136,u),longitudeInterval:s.getFloat64(l+152,u),gridNodeCount:s.getInt32(l+168,u)}}function bt(s,l,u,g){for(var f=l+176,_=[],x=0;x<u.gridNodeCount;x++){var y={latitudeShift:s.getFloat32(f+16*x,g),longitudeShift:s.getFloat32(f+16*x+4,g),latitudeAccuracy:s.getFloat32(f+16*x+8,g),longitudeAccuracy:s.getFloat32(f+16*x+12,g)};_.push(y)}return _}function et(s,l){if(!(this instanceof et))return new et(s);l=l||function(T){if(T)throw T};var u=w(s);if(typeof u=="object"){var g=et.projections.get(u.projName);if(g){if(u.datumCode&&u.datumCode!=="none"){var f=n($t,u.datumCode);f&&(u.datum_params=u.datum_params||(f.towgs84?f.towgs84.split(","):null),u.ellps=f.ellipse,u.datumName=f.datumName?f.datumName:u.datumCode)}u.k0=u.k0||1,u.axis=u.axis||"enu",u.ellps=u.ellps||"wgs84",u.lat1=u.lat1||u.lat0;var _=I(u.a,u.b,u.rf,u.ellps,u.sphere),x=R(_.a,_.b,_.rf,u.R_A),y=L(u.nadgrids),C=u.datum||A(u.datumCode,u.datum_params,_.a,_.b,x.es,x.ep2,y);wu(this,u),wu(this,g),this.a=_.a,this.b=_.b,this.rf=_.rf,this.sphere=_.sphere,this.es=x.es,this.e=x.e,this.ep2=x.ep2,this.datum=C,this.init(),l(null,this)}else l(s)}else l(s)}function V(s,l){return s.datum_type===l.datum_type&&!(s.a!==l.a||Math.abs(s.es-l.es)>5e-11)&&(s.datum_type===vi?s.datum_params[0]===l.datum_params[0]&&s.datum_params[1]===l.datum_params[1]&&s.datum_params[2]===l.datum_params[2]:s.datum_type!==Mi||s.datum_params[0]===l.datum_params[0]&&s.datum_params[1]===l.datum_params[1]&&s.datum_params[2]===l.datum_params[2]&&s.datum_params[3]===l.datum_params[3]&&s.datum_params[4]===l.datum_params[4]&&s.datum_params[5]===l.datum_params[5]&&s.datum_params[6]===l.datum_params[6])}function H(s,l,u){var g,f,_,x,y=s.x,C=s.y,T=s.z?s.z:0;if(C<-G&&C>-1.001*G)C=-G;else if(C>G&&C<1.001*G)C=G;else{if(C<-G)return{x:-1/0,y:-1/0,z:s.z};if(C>G)return{x:1/0,y:1/0,z:s.z}}return y>Math.PI&&(y-=2*Math.PI),f=Math.sin(C),x=Math.cos(C),_=f*f,g=u/Math.sqrt(1-l*_),{x:(g+T)*x*Math.cos(y),y:(g+T)*x*Math.sin(y),z:(g*(1-l)+T)*f}}function J(s,l,u,g){var f,_,x,y,C,T,P,O,k,j,N,X,ht,ot,Et,ut,qt=s.x,ie=s.y,Xt=s.z?s.z:0;if(f=Math.sqrt(qt*qt+ie*ie),_=Math.sqrt(qt*qt+ie*ie+Xt*Xt),f/u<1e-12){if(ot=0,_/u<1e-12)return Et=G,ut=-g,{x:s.x,y:s.y,z:s.z}}else ot=Math.atan2(ie,qt);x=Xt/_,O=(y=f/_)*(1-l)*(C=1/Math.sqrt(1-l*(2-l)*y*y)),k=x*C,ht=0;do ht++,T=l*(P=u/Math.sqrt(1-l*k*k))/(P+(ut=f*O+Xt*k-P*(1-l*k*k))),X=(N=x*(C=1/Math.sqrt(1-T*(2-T)*y*y)))*O-(j=y*(1-T)*C)*k,O=j,k=N;while(X*X>1e-24&&ht<30);return Et=Math.atan(N/Math.abs(j)),{x:ot,y:Et,z:ut}}function _t(s,l,u){if(l===vi)return{x:s.x+u[0],y:s.y+u[1],z:s.z+u[2]};if(l===Mi){var g=u[0],f=u[1],_=u[2],x=u[3],y=u[4],C=u[5],T=u[6];return{x:T*(s.x-C*s.y+y*s.z)+g,y:T*(C*s.x+s.y-x*s.z)+f,z:T*(-y*s.x+x*s.y+s.z)+_}}}function ft(s,l,u){if(l===vi)return{x:s.x-u[0],y:s.y-u[1],z:s.z-u[2]};if(l===Mi){var g=u[0],f=u[1],_=u[2],x=u[3],y=u[4],C=u[5],T=u[6],P=(s.x-g)/T,O=(s.y-f)/T,k=(s.z-_)/T;return{x:P+C*O-y*k,y:-C*P+O+x*k,z:y*P-x*O+k}}}function Lt(s){return s===vi||s===Mi}function U(s,l,u){if(s.grids===null||s.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var g={x:-u.x,y:u.y},f={x:Number.NaN,y:Number.NaN},_=[],x=0;x<s.grids.length;x++){var y=s.grids[x];if(_.push(y.name),y.isNull){f=g;break}if(y.grid!==null){var C=y.grid.subgrids[0],T=(Math.abs(C.del[1])+Math.abs(C.del[0]))/1e4,P=C.ll[0]-T,O=C.ll[1]-T,k=C.ll[0]+(C.lim[0]-1)*C.del[0]+T,j=C.ll[1]+(C.lim[1]-1)*C.del[1]+T;if(!(O>g.y||P>g.x||j<g.y||k<g.x||(f=ce(g,l,C),isNaN(f.x))))break}else if(y.mandatory)return console.log("Unable to find mandatory grid '"+y.name+"'"),-1}return isNaN(f.x)?(console.log("Failed to find a grid shift table for location '"+-g.x*It+" "+g.y*It+" tried: '"+_+"'"),-1):(u.x=-f.x,u.y=f.y,0)}function ce(s,l,u){var g={x:Number.NaN,y:Number.NaN};if(isNaN(s.x))return g;var f={x:s.x,y:s.y};f.x-=u.ll[0],f.y-=u.ll[1],f.x=$(f.x-Math.PI)+Math.PI;var _=xt(f,u);if(l){if(isNaN(_.x))return g;_.x=f.x-_.x,_.y=f.y-_.y;var x,y,C=9;do{if(y=xt(_,u),isNaN(y.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}x={x:f.x-(y.x+_.x),y:f.y-(y.y+_.y)},_.x+=x.x,_.y+=x.y}while(C--&&Math.abs(x.x)>1e-12&&Math.abs(x.y)>1e-12);if(C<0)return console.log("Inverse grid shift iterator failed to converge."),g;g.x=$(_.x+u.ll[0]),g.y=_.y+u.ll[1]}else isNaN(_.x)||(g.x=s.x+_.x,g.y=s.y+_.y);return g}function xt(s,l){var u,g={x:s.x/l.del[0],y:s.y/l.del[1]},f={x:Math.floor(g.x),y:Math.floor(g.y)},_={x:g.x-1*f.x,y:g.y-1*f.y},x={x:Number.NaN,y:Number.NaN};if(f.x<0||f.x>=l.lim[0]||f.y<0||f.y>=l.lim[1])return x;u=f.y*l.lim[0]+f.x;var y={x:l.cvs[u][0],y:l.cvs[u][1]};u++;var C={x:l.cvs[u][0],y:l.cvs[u][1]};u+=l.lim[0];var T={x:l.cvs[u][0],y:l.cvs[u][1]};u--;var P={x:l.cvs[u][0],y:l.cvs[u][1]},O=_.x*_.y,k=_.x*(1-_.y),j=(1-_.x)*(1-_.y),N=(1-_.x)*_.y;return x.x=j*y.x+k*C.x+N*P.x+O*T.x,x.y=j*y.y+k*C.y+N*P.y+O*T.y,x}function St(s){if(typeof Number.isFinite=="function"){if(Number.isFinite(s))return;throw new TypeError("coordinates must be finite numbers")}if(typeof s!="number"||s!==s||!isFinite(s))throw new TypeError("coordinates must be finite numbers")}function ei(s,l){return(s.datum.datum_type===vi||s.datum.datum_type===Mi)&&l.datumCode!=="WGS84"||(l.datum.datum_type===vi||l.datum.datum_type===Mi)&&s.datumCode!=="WGS84"}function ue(s,l,u,g){var f;if(Array.isArray(u)&&(u=Lu(u)),k0(u),s.datum&&l.datum&&ei(s,l)&&(u=ue(s,f=new et("WGS84"),u,g),s=f),g&&s.axis!=="enu"&&(u=Au(s,!1,u)),s.projName==="longlat")u={x:u.x*zt,y:u.y*zt,z:u.z||0};else if(s.to_meter&&(u={x:u.x*s.to_meter,y:u.y*s.to_meter,z:u.z||0}),!(u=s.inverse(u)))return;if(s.from_greenwich&&(u.x+=s.from_greenwich),u=F0(s.datum,l.datum,u))return l.from_greenwich&&(u={x:u.x-l.from_greenwich,y:u.y,z:u.z||0}),l.projName==="longlat"?u={x:u.x*It,y:u.y*It,z:u.z||0}:(u=l.forward(u),l.to_meter&&(u={x:u.x/l.to_meter,y:u.y/l.to_meter,z:u.z||0})),g&&l.axis!=="enu"?Au(l,!0,u):u}function jt(s,l,u,g){var f,_,x;return Array.isArray(u)?(f=ue(s,l,u,g)||{x:NaN,y:NaN},u.length>2?s.name!==void 0&&s.name==="geocent"||l.name!==void 0&&l.name==="geocent"?typeof f.z=="number"?[f.x,f.y,f.z].concat(u.splice(3)):[f.x,f.y,u[2]].concat(u.splice(3)):[f.x,f.y].concat(u.splice(2)):[f.x,f.y]):(_=ue(s,l,u,g),(x=Object.keys(u)).length===2||x.forEach(function(y){if(s.name!==void 0&&s.name==="geocent"||l.name!==void 0&&l.name==="geocent"){if(y==="x"||y==="y"||y==="z")return}else if(y==="x"||y==="y")return;_[y]=u[y]}),_)}function Ie(s){return s instanceof et?s:s.oProj?s.oProj:et(s)}function Wt(s,l,u){s=Ie(s);var g,f=!1;return l===void 0?(l=s,s=Pu,f=!0):(l.x!==void 0||Array.isArray(l))&&(u=l,l=s,s=Pu,f=!0),l=Ie(l),u?jt(s,l,u):(g={forward:function(_,x){return jt(s,l,_,x)},inverse:function(_,x){return jt(l,s,_,x)}},f&&(g.oProj=l),g)}function mn(s,l){return l=l||5,Wn(gn({lat:s[1],lon:s[0]}),l)}function _i(s){var l=Ae(ee(s.toUpperCase()));return l.lat&&l.lon?[l.lon,l.lat]:[(l.left+l.right)/2,(l.top+l.bottom)/2]}function zi(s){return s*(Math.PI/180)}function Be(s){return s/Math.PI*180}function gn(s){var l,u,g,f,_,x,y,C=s.lat,T=s.lon,P=6378137,O=zi(C),k=zi(T);y=Math.floor((T+180)/6)+1,T===180&&(y=60),C>=56&&C<64&&T>=3&&T<12&&(y=32),C>=72&&C<84&&(T>=0&&T<9?y=31:T>=9&&T<21?y=33:T>=21&&T<33?y=35:T>=33&&T<42&&(y=37)),x=zi(6*(y-1)-180+3),l=P/Math.sqrt(1-.00669438*Math.sin(O)*Math.sin(O)),u=Math.tan(O)*Math.tan(O),g=.006739496752268451*Math.cos(O)*Math.cos(O);var j=.9996*l*((f=Math.cos(O)*(k-x))+(1-u+g)*f*f*f/6+(5-18*u+u*u+72*g-.39089081163157013)*f*f*f*f*f/120)+5e5,N=.9996*((_=P*(.9983242984503243*O-.002514607064228144*Math.sin(2*O)+2639046602129982e-21*Math.sin(4*O)-3418046101696858e-24*Math.sin(6*O)))+l*Math.tan(O)*(f*f/2+(5-u+9*g+4*g*g)*f*f*f*f/24+(61-58*u+u*u+600*g-2.2240339282485886)*f*f*f*f*f*f/720));return C<0&&(N+=1e7),{northing:Math.round(N),easting:Math.round(j),zoneNumber:y,zoneLetter:qn(C)}}function Ae(s){var l=s.northing,u=s.easting,g=s.zoneLetter,f=s.zoneNumber;if(f<0||f>60)return null;var _,x,y,C,T,P,O,k,j=6378137,N=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),X=u-5e5,ht=l;g<"N"&&(ht-=1e7),P=6*(f-1)-180+3,k=(O=ht/.9996/6367449145945056e-9)+(3*N/2-27*N*N*N/32)*Math.sin(2*O)+(21*N*N/16-55*N*N*N*N/32)*Math.sin(4*O)+151*N*N*N/96*Math.sin(6*O),_=j/Math.sqrt(1-.00669438*Math.sin(k)*Math.sin(k)),x=Math.tan(k)*Math.tan(k),y=.006739496752268451*Math.cos(k)*Math.cos(k),C=.99330562*j/Math.pow(1-.00669438*Math.sin(k)*Math.sin(k),1.5),T=X/(.9996*_);var ot=k-_*Math.tan(k)/C*(T*T/2-(5+3*x+10*y-4*y*y-.06065547077041606)*T*T*T*T/24+(61+90*x+298*y+45*x*x-1.6983531815716497-3*y*y)*T*T*T*T*T*T/720);ot=Be(ot);var Et=(T-(1+2*x+y)*T*T*T/6+(5-2*y+28*x-3*y*y+.05391597401814761+24*x*x)*T*T*T*T*T/120)/Math.cos(k);Et=P+Be(Et);var ut;if(s.accuracy){var qt=Ae({northing:s.northing+s.accuracy,easting:s.easting+s.accuracy,zoneLetter:s.zoneLetter,zoneNumber:s.zoneNumber});ut={top:qt.lat,right:qt.lon,bottom:ot,left:Et}}else ut={lat:ot,lon:Et};return ut}function qn(s){var l="Z";return 84>=s&&s>=72?l="X":72>s&&s>=64?l="W":64>s&&s>=56?l="V":56>s&&s>=48?l="U":48>s&&s>=40?l="T":40>s&&s>=32?l="S":32>s&&s>=24?l="R":24>s&&s>=16?l="Q":16>s&&s>=8?l="P":8>s&&s>=0?l="N":0>s&&s>=-8?l="M":-8>s&&s>=-16?l="L":-16>s&&s>=-24?l="K":-24>s&&s>=-32?l="J":-32>s&&s>=-40?l="H":-40>s&&s>=-48?l="G":-48>s&&s>=-56?l="F":-56>s&&s>=-64?l="E":-64>s&&s>=-72?l="D":-72>s&&s>=-80&&(l="C"),l}function Wn(s,l){var u="00000"+s.easting,g="00000"+s.northing;return s.zoneNumber+s.zoneLetter+zn(s.easting,s.northing,s.zoneNumber)+u.substr(u.length-5,l)+g.substr(g.length-5,l)}function zn(s,l,u){var g=yi(u);return zr(Math.floor(s/1e5),Math.floor(l/1e5)%20,g)}function yi(s){var l=s%Ou;return l===0&&(l=Ou),l}function zr(s,l,u){var g=u-1,f=Fu.charCodeAt(g),_=ku.charCodeAt(g),x=f+s-1,y=_+l,C=!1;return x>Hr&&(x=x-Hr+Yn-1,C=!0),(x===_e||f<_e&&x>_e||(x>_e||f<_e)&&C)&&x++,(x===Le||f<Le&&x>Le||(x>Le||f<Le)&&C)&&++x===_e&&x++,x>Hr&&(x=x-Hr+Yn-1),y>Kr?(y=y-Kr+Yn-1,C=!0):C=!1,(y===_e||_<_e&&y>_e||(y>_e||_<_e)&&C)&&y++,(y===Le||_<Le&&y>Le||(y>Le||_<Le)&&C)&&++y===_e&&y++,y>Kr&&(y=y-Kr+Yn-1),String.fromCharCode(x)+String.fromCharCode(y)}function ee(s){if(s&&s.length===0)throw"MGRSPoint coverting from nothing";for(var l,u=s.length,g=null,f="",_=0;!/[A-Z]/.test(l=s.charAt(_));){if(_>=2)throw"MGRSPoint bad conversion from: "+s;f+=l,_++}var x=parseInt(f,10);if(_===0||_+3>u)throw"MGRSPoint bad conversion from: "+s;var y=s.charAt(_++);if(y<="A"||y==="B"||y==="Y"||y>="Z"||y==="I"||y==="O")throw"MGRSPoint zone letter "+y+" not handled: "+s;g=s.substring(_,_+=2);for(var C=yi(x),T=pe(g.charAt(0),C),P=be(g.charAt(1),C);P<Ue(y);)P+=2e6;var O=u-_;if(O%2!=0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+s;var k,j,N,X,ht,ot=O/2,Et=0,ut=0;return ot>0&&(k=1e5/Math.pow(10,ot),j=s.substring(_,_+ot),Et=parseFloat(j)*k,N=s.substring(_+ot),ut=parseFloat(N)*k),X=Et+T,ht=ut+P,{easting:X,northing:ht,zoneLetter:y,zoneNumber:x,accuracy:k}}function pe(s,l){for(var u=Fu.charCodeAt(l-1),g=1e5,f=!1;u!==s.charCodeAt(0);){if(++u===_e&&u++,u===Le&&u++,u>Hr){if(f)throw"Bad character: "+s;u=Yn,f=!0}g+=1e5}return g}function be(s,l){if(s>"V")throw"MGRSPoint given invalid Northing "+s;for(var u=ku.charCodeAt(l-1),g=0,f=!1;u!==s.charCodeAt(0);){if(++u===_e&&u++,u===Le&&u++,u>Kr){if(f)throw"Bad character: "+s;u=Yn,f=!0}g+=1e5}return g}function Ue(s){var l;switch(s){case"C":l=11e5;break;case"D":l=2e6;break;case"E":l=28e5;break;case"F":l=37e5;break;case"G":l=46e5;break;case"H":l=55e5;break;case"J":l=64e5;break;case"K":l=73e5;break;case"L":l=82e5;break;case"M":l=91e5;break;case"N":l=0;break;case"P":l=8e5;break;case"Q":l=17e5;break;case"R":l=26e5;break;case"S":l=35e5;break;case"T":l=44e5;break;case"U":l=53e5;break;case"V":l=62e5;break;case"W":l=7e6;break;case"X":l=79e5;break;default:l=-1}if(l>=0)return l;throw"Invalid zone letter: "+s}function Te(s,l,u){if(!(this instanceof Te))return new Te(s,l,u);if(Array.isArray(s))this.x=s[0],this.y=s[1],this.z=s[2]||0;else if(typeof s=="object")this.x=s.x,this.y=s.y,this.z=s.z||0;else if(typeof s=="string"&&l===void 0){var g=s.split(",");this.x=parseFloat(g[0],10),this.y=parseFloat(g[1],10),this.z=parseFloat(g[2],10)||0}else this.x=s,this.y=l,this.z=u||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function xi(s){var l=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],u=typeof s.PROJECTION=="object"?Object.keys(s.PROJECTION)[0]:s.PROJECTION;return"no_uoff"in s||"no_off"in s||l.indexOf(u)!==-1}function ii(s){var l,u=[];return u[0]=s*J0,l=s*s,u[0]+=l*$0,u[1]=l*ty,l*=s,u[0]+=l*Q0,u[1]+=l*ey,u[2]=l*iy,u}function Xi(s,l){var u=s+s;return s+l[0]*Math.sin(u)+l[1]*Math.sin(u+u)+l[2]*Math.sin(u+u+u)}function Ei(s,l,u,g){var f;return s<z?(g.value=Ct.AREA_0,f=0):(f=Math.atan2(l,u),Math.abs(f)<=mt?g.value=Ct.AREA_0:f>mt&&f<=G+mt?(g.value=Ct.AREA_1,f-=G):f>G+mt||f<=-(G+mt)?(g.value=Ct.AREA_2,f=f>=0?f-vt:f+vt):(g.value=Ct.AREA_3,f+=G)),f}function kt(s,l){var u=s+l;return u<-vt?u+=Ht:u>+vt&&(u-=Ht),u}function Xr(s,l,u,g){for(var f=l;g;--g){var _=s(f);if(f-=_,Math.abs(_)<u)break}return f}var vi=1,Mi=2,pn=3,Vs=4,_n=5,Yi=484813681109536e-20,G=Math.PI/2,yn=.16666666666666666,xn=.04722222222222222,En=.022156084656084655,z=1e-10,zt=.017453292519943295,It=57.29577951308232,mt=Math.PI/4,Ht=2*Math.PI,vt=3.14159265359,Tt={};Tt.greenwich=0,Tt.lisbon=-9.131906111111,Tt.paris=2.337229166667,Tt.bogota=-74.080916666667,Tt.madrid=-3.687938888889,Tt.rome=12.452333333333,Tt.bern=7.439583333333,Tt.jakarta=106.807719444444,Tt.ferro=-17.666666666667,Tt.brussels=4.367975,Tt.stockholm=18.058277777778,Tt.athens=23.7163375,Tt.oslo=10.722916666667;var Xn={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},vn=/[\s_\-\/\(\)]/g,Zt=function(s){var l,u,g,f={},_=s.split("+").map(function(y){return y.trim()}).filter(function(y){return y}).reduce(function(y,C){var T=C.split("=");return T.push(!0),y[T[0].toLowerCase()]=T[1],y},{}),x={proj:"projName",datum:"datumCode",rf:function(y){f.rf=parseFloat(y)},lat_0:function(y){f.lat0=y*zt},lat_1:function(y){f.lat1=y*zt},lat_2:function(y){f.lat2=y*zt},lat_ts:function(y){f.lat_ts=y*zt},lon_0:function(y){f.long0=y*zt},lon_1:function(y){f.long1=y*zt},lon_2:function(y){f.long2=y*zt},alpha:function(y){f.alpha=parseFloat(y)*zt},gamma:function(y){f.rectified_grid_angle=parseFloat(y)},lonc:function(y){f.longc=y*zt},x_0:function(y){f.x0=parseFloat(y)},y_0:function(y){f.y0=parseFloat(y)},k_0:function(y){f.k0=parseFloat(y)},k:function(y){f.k0=parseFloat(y)},a:function(y){f.a=parseFloat(y)},b:function(y){f.b=parseFloat(y)},r_a:function(){f.R_A=!0},zone:function(y){f.zone=parseInt(y,10)},south:function(){f.utmSouth=!0},towgs84:function(y){f.datum_params=y.split(",").map(function(C){return parseFloat(C)})},to_meter:function(y){f.to_meter=parseFloat(y)},units:function(y){f.units=y;var C=n(Xn,y);C&&(f.to_meter=C.to_meter)},from_greenwich:function(y){f.from_greenwich=y*zt},pm:function(y){var C=n(Tt,y);f.from_greenwich=(C||parseFloat(y))*zt},nadgrids:function(y){y==="@null"?f.datumCode="none":f.nadgrids=y},axis:function(y){y.length===3&&"ewnsud".indexOf(y.substr(0,1))!==-1&&"ewnsud".indexOf(y.substr(1,1))!==-1&&"ewnsud".indexOf(y.substr(2,1))!==-1&&(f.axis=y)},approx:function(){f.approx=!0}};for(l in _)u=_[l],l in x?typeof(g=x[l])=="function"?g(u):f[g]=u:f[l]=u;return typeof f.datumCode=="string"&&f.datumCode!=="WGS84"&&(f.datumCode=f.datumCode.toLowerCase()),f},Jt=1,je=/\s/,Ba=/[A-Za-z]/,R0=/[A-Za-z84]/,Ks=/[,\]]/,Tu=/[\d\.E\-\+]/;t.prototype.readCharicter=function(){var s=this.text[this.place++];if(this.state!==4)for(;je.test(s);){if(this.place>=this.text.length)return;s=this.text[this.place++]}switch(this.state){case Jt:return this.neutral(s);case 2:return this.keyword(s);case 4:return this.quoted(s);case 5:return this.afterquote(s);case 3:return this.number(s);case-1:return}},t.prototype.afterquote=function(s){if(s==='"')return this.word+='"',void(this.state=4);if(Ks.test(s))return this.word=this.word.trim(),void this.afterItem(s);throw new Error(`havn't handled "`+s+'" in afterquote yet, index '+this.place)},t.prototype.afterItem=function(s){return s===","?(this.word!==null&&this.currentObject.push(this.word),this.word=null,void(this.state=Jt)):s==="]"?(this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Jt,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},t.prototype.number=function(s){if(!Tu.test(s)){if(Ks.test(s))return this.word=parseFloat(this.word),void this.afterItem(s);throw new Error(`havn't handled "`+s+'" in number yet, index '+this.place)}this.word+=s},t.prototype.quoted=function(s){s!=='"'?this.word+=s:this.state=5},t.prototype.keyword=function(s){if(R0.test(s))this.word+=s;else{if(s==="["){var l=[];return l.push(this.word),this.level++,this.root===null?this.root=l:this.currentObject.push(l),this.stack.push(this.currentObject),this.currentObject=l,void(this.state=Jt)}if(!Ks.test(s))throw new Error(`havn't handled "`+s+'" in keyword yet, index '+this.place);this.afterItem(s)}},t.prototype.neutral=function(s){if(Ba.test(s))return this.word=s,void(this.state=2);if(s==='"')return this.word="",void(this.state=4);if(Tu.test(s))return this.word=s,void(this.state=3);{if(!Ks.test(s))throw new Error(`havn't handled "`+s+'" in neutral yet, index '+this.place);this.afterItem(s)}},t.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===-1)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var w0=.017453292519943295,Ru=function(s){var l=e(s),u=l.shift(),g=l.shift();l.unshift(["name",g]),l.unshift(["type",u]);var f={};return r(l,f),h(f),f};(function(s){s("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),s("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),s("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),s.WGS84=s["EPSG:4326"],s["EPSG:3785"]=s["EPSG:3857"],s.GOOGLE=s["EPSG:3857"],s["EPSG:900913"]=s["EPSG:3857"],s["EPSG:102113"]=s["EPSG:3857"]})(c);var I0=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],A0=["3857","900913","3785","102113"],wu=function(s,l){s=s||{};var u,g;if(!l)return s;for(g in l)(u=l[g])!==void 0&&(s[g]=u);return s},ni=function(s,l,u){var g=s*l;return u/Math.sqrt(1-g*g)},Yr=function(s){return s<0?-1:1},$=function(s){return Math.abs(s)<=vt?s:s-Yr(s)*Ht},qe=function(s,l,u){var g=s*u,f=.5*s;return g=Math.pow((1-g)/(1+g),f),Math.tan(.5*(G-l))/g},Vr=function(s,l){for(var u,g,f=.5*s,_=G-2*Math.atan(l),x=0;x<=15;x++)if(u=s*Math.sin(_),g=G-2*Math.atan(l*Math.pow((1-u)/(1+u),f))-_,_+=g,Math.abs(g)<=1e-10)return _;return-9999},L0=[{init:function(){var s=this.b/this.a;this.es=1-s*s,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=ni(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(s){var l=s.x,u=s.y;if(u*It>90&&u*It<-90&&l*It>180&&l*It<-180)return null;var g,f;if(Math.abs(Math.abs(u)-G)<=z)return null;if(this.sphere)g=this.x0+this.a*this.k0*$(l-this.long0),f=this.y0+this.a*this.k0*Math.log(Math.tan(mt+.5*u));else{var _=Math.sin(u),x=qe(this.e,u,_);g=this.x0+this.a*this.k0*$(l-this.long0),f=this.y0-this.a*this.k0*Math.log(x)}return s.x=g,s.y=f,s},inverse:function(s){var l,u,g=s.x-this.x0,f=s.y-this.y0;if(this.sphere)u=G-2*Math.atan(Math.exp(-f/(this.a*this.k0)));else{var _=Math.exp(-f/(this.a*this.k0));if((u=Vr(this.e,_))===-9999)return null}return l=$(this.long0+g/(this.a*this.k0)),s.x=l,s.y=u,s},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:v,inverse:v,names:["longlat","identity"]}],Hs={},Zs=[],P0={start:function(){L0.forEach(S)},add:S,get:function(s){if(!s)return!1;var l=s.toLowerCase();return Hs[l]!==void 0&&Zs[Hs[l]]?Zs[Hs[l]]:void 0}},at={};at.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},at.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},at.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},at.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},at.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},at.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},at.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},at.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},at.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},at.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},at.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},at.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},at.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},at.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},at.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},at.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},at.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},at.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},at.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},at.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},at.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},at.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},at.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},at.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},at.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},at.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},at.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},at.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},at.hough={a:6378270,rf:297,ellipseName:"Hough"},at.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},at.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},at.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},at.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},at.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},at.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},at.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},at.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},at.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},at.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},at.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},at.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var O0=at.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};at.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var $t={};$t.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},$t.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},$t.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},$t.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},$t.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},$t.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},$t.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},$t.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},$t.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},$t.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},$t.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},$t.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},$t.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},$t.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},$t.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},$t.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},$t.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var Iu={};et.projections=P0,et.projections.start();var F0=function(s,l,u){if(V(s,l)||s.datum_type===_n||l.datum_type===_n)return u;var g=s.a,f=s.es;if(s.datum_type===pn){if(U(s,!1,u)!==0)return;g=6378137,f=.0066943799901413165}var _=l.a,x=l.b,y=l.es;return l.datum_type===pn&&(_=6378137,x=6356752314e-3,y=.0066943799901413165),f!==y||g!==_||Lt(s.datum_type)||Lt(l.datum_type)?(u=H(u,f,g),Lt(s.datum_type)&&(u=_t(u,s.datum_type,s.datum_params)),Lt(l.datum_type)&&(u=ft(u,l.datum_type,l.datum_params)),u=J(u,y,_,x),l.datum_type!==pn||U(l,!0,u)===0?u:void 0):u},Au=function(s,l,u){var g,f,_,x=u.x,y=u.y,C=u.z||0,T={};for(_=0;_<3;_++)if(!l||_!==2||u.z!==void 0)switch(_===0?(g=x,f="ew".indexOf(s.axis[_])!==-1?"x":"y"):_===1?(g=y,f="ns".indexOf(s.axis[_])!==-1?"y":"x"):(g=C,f="z"),s.axis[_]){case"e":T[f]=g;break;case"w":T[f]=-g;break;case"n":T[f]=g;break;case"s":T[f]=-g;break;case"u":u[f]!==void 0&&(T.z=g);break;case"d":u[f]!==void 0&&(T.z=-g);break;default:return null}return T},Lu=function(s){var l={x:s[0],y:s[1]};return s.length>2&&(l.z=s[2]),s.length>3&&(l.m=s[3]),l},k0=function(s){St(s.x),St(s.y)},Pu=et("WGS84"),Ou=6,Fu="AJSAJS",ku="AFAFAF",Yn=65,_e=73,Le=79,Kr=86,Hr=90,D0={forward:mn,inverse:function(s){var l=Ae(ee(s.toUpperCase()));return l.lat&&l.lon?[l.lon,l.lat,l.lon,l.lat]:[l.left,l.bottom,l.right,l.top]},toPoint:_i};Te.fromMGRS=function(s){return new Te(_i(s))},Te.prototype.toMGRS=function(s){return mn([this.x,this.y],s)};var Du=.01068115234375,Nu=function(s){var l=[];l[0]=1-s*(.25+s*(.046875+s*(.01953125+s*Du))),l[1]=s*(.75-s*(.046875+s*(.01953125+s*Du)));var u=s*s;return l[2]=u*(.46875-s*(.013020833333333334+.007120768229166667*s)),u*=s,l[3]=u*(.3645833333333333-.005696614583333333*s),l[4]=u*s*.3076171875,l},Js=function(s,l,u,g){return u*=l,l*=l,g[0]*s-u*(g[1]+l*(g[2]+l*(g[3]+l*g[4])))},Gu=function(s,l,u){for(var g=1/(1-l),f=s,_=20;_;--_){var x=Math.sin(f),y=1-l*x*x;if(y=(Js(f,x,Math.cos(f),u)-s)*(y*Math.sqrt(y))*g,f-=y,Math.abs(y)<z)return f}return f},$s={init:function(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Nu(this.es),this.ml0=Js(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(s){var l,u,g,f=s.x,_=s.y,x=$(f-this.long0),y=Math.sin(_),C=Math.cos(_);if(this.es){var T=C*x,P=Math.pow(T,2),O=this.ep2*Math.pow(C,2),k=Math.pow(O,2),j=Math.abs(C)>z?Math.tan(_):0,N=Math.pow(j,2),X=Math.pow(N,2);l=1-this.es*Math.pow(y,2),T/=Math.sqrt(l);var ht=Js(_,y,C,this.en);u=this.a*(this.k0*T*(1+P/6*(1-N+O+P/20*(5-18*N+X+14*O-58*N*O+P/42*(61+179*X-X*N-479*N)))))+this.x0,g=this.a*(this.k0*(ht-this.ml0+y*x*T/2*(1+P/12*(5-N+9*O+4*k+P/30*(61+X-58*N+270*O-330*N*O+P/56*(1385+543*X-X*N-3111*N))))))+this.y0}else{var ot=C*Math.sin(x);if(Math.abs(Math.abs(ot)-1)<z)return 93;if(u=.5*this.a*this.k0*Math.log((1+ot)/(1-ot))+this.x0,g=C*Math.cos(x)/Math.sqrt(1-Math.pow(ot,2)),(ot=Math.abs(g))>=1){if(ot-1>z)return 93;g=0}else g=Math.acos(g);_<0&&(g=-g),g=this.a*this.k0*(g-this.lat0)+this.y0}return s.x=u,s.y=g,s},inverse:function(s){var l,u,g,f,_=(s.x-this.x0)*(1/this.a),x=(s.y-this.y0)*(1/this.a);if(this.es)if(l=this.ml0+x/this.k0,u=Gu(l,this.es,this.en),Math.abs(u)<G){var y=Math.sin(u),C=Math.cos(u),T=Math.abs(C)>z?Math.tan(u):0,P=this.ep2*Math.pow(C,2),O=Math.pow(P,2),k=Math.pow(T,2),j=Math.pow(k,2);l=1-this.es*Math.pow(y,2);var N=_*Math.sqrt(l)/this.k0,X=Math.pow(N,2);g=u-(l*=T)*X/(1-this.es)*.5*(1-X/12*(5+3*k-9*P*k+P-4*O-X/30*(61+90*k-252*P*k+45*j+46*P-X/56*(1385+3633*k+4095*j+1574*j*k)))),f=$(this.long0+N*(1-X/6*(1+2*k+P-X/20*(5+28*k+24*j+8*P*k+6*P-X/42*(61+662*k+1320*j+720*j*k))))/C)}else g=G*Yr(x),f=0;else{var ht=Math.exp(_/this.k0),ot=.5*(ht-1/ht),Et=this.lat0+x/this.k0,ut=Math.cos(Et);l=Math.sqrt((1-Math.pow(ut,2))/(1+Math.pow(ot,2))),g=Math.asin(l),x<0&&(g=-g),f=ot===0&&ut===0?0:$(Math.atan2(ot,ut)+this.long0)}return s.x=f,s.y=g,s},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]},Bu=function(s){var l=Math.exp(s);return l=(l-1/l)/2},We=function(s,l){s=Math.abs(s),l=Math.abs(l);var u=Math.max(s,l),g=Math.min(s,l)/(u||1);return u*Math.sqrt(1+Math.pow(g,2))},N0=function(s){var l=1+s,u=l-1;return u===0?s:s*Math.log(l)/u},G0=function(s){var l=Math.abs(s);return l=N0(l*(1+l/(We(1,l)+1))),s<0?-l:l},Ua=function(s,l){for(var u,g=2*Math.cos(2*l),f=s.length-1,_=s[f],x=0;--f>=0;)u=g*_-x+s[f],x=_,_=u;return l+u*Math.sin(2*l)},B0=function(s,l){for(var u,g=2*Math.cos(l),f=s.length-1,_=s[f],x=0;--f>=0;)u=g*_-x+s[f],x=_,_=u;return Math.sin(l)*u},U0=function(s){var l=Math.exp(s);return l=(l+1/l)/2},Uu=function(s,l,u){for(var g,f,_=Math.sin(l),x=Math.cos(l),y=Bu(u),C=U0(u),T=2*x*C,P=-2*_*y,O=s.length-1,k=s[O],j=0,N=0,X=0;--O>=0;)g=N,f=j,k=T*(N=k)-g-P*(j=X)+s[O],X=P*N-f+T*j;return T=_*C,P=x*y,[T*k-P*X,T*X+P*k]},Qs={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&($s.init.apply(this),this.forward=$s.forward,this.inverse=$s.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var s=this.es/(1+Math.sqrt(1-this.es)),l=s/(2-s),u=l;this.cgb[0]=l*(2+l*(-2/3+l*(l*(116/45+l*(26/45+l*(-2854/675)))-2))),this.cbg[0]=l*(l*(2/3+l*(4/3+l*(-82/45+l*(32/45+l*(4642/4725)))))-2),u*=l,this.cgb[1]=u*(7/3+l*(l*(-227/45+l*(2704/315+l*(2323/945)))-1.6)),this.cbg[1]=u*(5/3+l*(-16/15+l*(-13/9+l*(904/315+l*(-1522/945))))),u*=l,this.cgb[2]=u*(56/15+l*(-136/35+l*(-1262/105+l*(73814/2835)))),this.cbg[2]=u*(-26/15+l*(34/21+l*(1.6+l*(-12686/2835)))),u*=l,this.cgb[3]=u*(4279/630+l*(-332/35+l*(-399572/14175))),this.cbg[3]=u*(1237/630+l*(l*(-24832/14175)-2.4)),u*=l,this.cgb[4]=u*(4174/315+l*(-144838/6237)),this.cbg[4]=u*(-734/315+l*(109598/31185)),u*=l,this.cgb[5]=u*(601676/22275),this.cbg[5]=u*(444337/155925),u=Math.pow(l,2),this.Qn=this.k0/(1+l)*(1+u*(.25+u*(1/64+u/256))),this.utg[0]=l*(l*(2/3+l*(-37/96+l*(1/360+l*(81/512+l*(-96199/604800)))))-.5),this.gtu[0]=l*(.5+l*(-2/3+l*(5/16+l*(41/180+l*(-127/288+l*(7891/37800)))))),this.utg[1]=u*(-1/48+l*(-1/15+l*(437/1440+l*(-46/105+l*(1118711/3870720))))),this.gtu[1]=u*(13/48+l*(l*(557/1440+l*(281/630+l*(-1983433/1935360)))-.6)),u*=l,this.utg[2]=u*(-17/480+l*(37/840+l*(209/4480+l*(-5569/90720)))),this.gtu[2]=u*(61/240+l*(-103/140+l*(15061/26880+l*(167603/181440)))),u*=l,this.utg[3]=u*(-4397/161280+l*(11/504+l*(830251/7257600))),this.gtu[3]=u*(49561/161280+l*(-179/168+l*(6601661/7257600))),u*=l,this.utg[4]=u*(-4583/161280+l*(108847/3991680)),this.gtu[4]=u*(34729/80640+l*(-3418889/1995840)),u*=l,this.utg[5]=-.03233083094085698*u,this.gtu[5]=.6650675310896665*u;var g=Ua(this.cbg,this.lat0);this.Zb=-this.Qn*(g+B0(this.gtu,2*g))},forward:function(s){var l=$(s.x-this.long0),u=s.y;u=Ua(this.cbg,u);var g=Math.sin(u),f=Math.cos(u),_=Math.sin(l),x=Math.cos(l);u=Math.atan2(g,x*f),l=Math.atan2(_*f,We(g,f*x)),l=G0(Math.tan(l));var y=Uu(this.gtu,2*u,2*l);u+=y[0],l+=y[1];var C,T;return Math.abs(l)<=2.623395162778?(C=this.a*(this.Qn*l)+this.x0,T=this.a*(this.Qn*u+this.Zb)+this.y0):(C=1/0,T=1/0),s.x=C,s.y=T,s},inverse:function(s){var l=(s.x-this.x0)*(1/this.a),u=(s.y-this.y0)*(1/this.a);u=(u-this.Zb)/this.Qn,l/=this.Qn;var g,f;if(Math.abs(l)<=2.623395162778){var _=Uu(this.utg,2*u,2*l);u+=_[0],l+=_[1],l=Math.atan(Bu(l));var x=Math.sin(u),y=Math.cos(u),C=Math.sin(l),T=Math.cos(l);u=Math.atan2(x*T,We(C,T*y)),l=Math.atan2(C,T*y),g=$(l+this.long0),f=Ua(this.cgb,u)}else g=1/0,f=1/0;return s.x=g,s.y=f,s},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},j0=function(s,l){if(s===void 0){if((s=Math.floor(30*($(l)+Math.PI)/Math.PI)+1)<0)return 0;if(s>60)return 60}return s},q0={init:function(){var s=j0(this.zone,this.long0);if(s===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(s)-183)*zt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Qs.init.apply(this),this.forward=Qs.forward,this.inverse=Qs.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},ja=function(s,l){return Math.pow((1-s)/(1+s),l)},W0=20,qa={init:function(){var s=Math.sin(this.lat0),l=Math.cos(this.lat0);l*=l,this.rc=Math.sqrt(1-this.es)/(1-this.es*s*s),this.C=Math.sqrt(1+this.es*l*l/(1-this.es)),this.phic0=Math.asin(s/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+mt)/(Math.pow(Math.tan(.5*this.lat0+mt),this.C)*ja(this.e*s,this.ratexp))},forward:function(s){var l=s.x,u=s.y;return s.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*u+mt),this.C)*ja(this.e*Math.sin(u),this.ratexp))-G,s.x=this.C*l,s},inverse:function(s){for(var l=s.x/this.C,u=s.y,g=Math.pow(Math.tan(.5*u+mt)/this.K,1/this.C),f=W0;f>0&&(u=2*Math.atan(g*ja(this.e*Math.sin(s.y),-.5*this.e))-G,!(Math.abs(u-s.y)<1e-14));--f)s.y=u;return f?(s.x=l,s.y=u,s):null},names:["gauss"]},z0={init:function(){qa.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(s){var l,u,g,f;return s.x=$(s.x-this.long0),qa.forward.apply(this,[s]),l=Math.sin(s.y),u=Math.cos(s.y),g=Math.cos(s.x),f=this.k0*this.R2/(1+this.sinc0*l+this.cosc0*u*g),s.x=f*u*Math.sin(s.x),s.y=f*(this.cosc0*l-this.sinc0*u*g),s.x=this.a*s.x+this.x0,s.y=this.a*s.y+this.y0,s},inverse:function(s){var l,u,g,f,_;if(s.x=(s.x-this.x0)/this.a,s.y=(s.y-this.y0)/this.a,s.x/=this.k0,s.y/=this.k0,_=Math.sqrt(s.x*s.x+s.y*s.y)){var x=2*Math.atan2(_,this.R2);l=Math.sin(x),u=Math.cos(x),f=Math.asin(u*this.sinc0+s.y*l*this.cosc0/_),g=Math.atan2(s.x*l,_*this.cosc0*u-s.y*this.sinc0*l)}else f=this.phic0,g=0;return s.x=g,s.y=f,qa.inverse.apply(this,[s]),s.x=$(s.x+this.long0),s},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},X0={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=z&&(this.k0=.5*(1+Yr(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=z&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=z&&(this.k0=.5*this.cons*ni(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/qe(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ni(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-G,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(s){var l,u,g,f,_,x,y=s.x,C=s.y,T=Math.sin(C),P=Math.cos(C),O=$(y-this.long0);return Math.abs(Math.abs(y-this.long0)-Math.PI)<=z&&Math.abs(C+this.lat0)<=z?(s.x=NaN,s.y=NaN,s):this.sphere?(l=2*this.k0/(1+this.sinlat0*T+this.coslat0*P*Math.cos(O)),s.x=this.a*l*P*Math.sin(O)+this.x0,s.y=this.a*l*(this.coslat0*T-this.sinlat0*P*Math.cos(O))+this.y0,s):(u=2*Math.atan(this.ssfn_(C,T,this.e))-G,f=Math.cos(u),g=Math.sin(u),Math.abs(this.coslat0)<=z?(_=qe(this.e,C*this.con,this.con*T),x=2*this.a*this.k0*_/this.cons,s.x=this.x0+x*Math.sin(y-this.long0),s.y=this.y0-this.con*x*Math.cos(y-this.long0),s):(Math.abs(this.sinlat0)<z?(l=2*this.a*this.k0/(1+f*Math.cos(O)),s.y=l*g):(l=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*g+this.cosX0*f*Math.cos(O))),s.y=l*(this.cosX0*g-this.sinX0*f*Math.cos(O))+this.y0),s.x=l*f*Math.sin(O)+this.x0,s))},inverse:function(s){s.x-=this.x0,s.y-=this.y0;var l,u,g,f,_,x=Math.sqrt(s.x*s.x+s.y*s.y);if(this.sphere){var y=2*Math.atan(x/(2*this.a*this.k0));return l=this.long0,u=this.lat0,x<=z?(s.x=l,s.y=u,s):(u=Math.asin(Math.cos(y)*this.sinlat0+s.y*Math.sin(y)*this.coslat0/x),l=$(Math.abs(this.coslat0)<z?this.lat0>0?this.long0+Math.atan2(s.x,-1*s.y):this.long0+Math.atan2(s.x,s.y):this.long0+Math.atan2(s.x*Math.sin(y),x*this.coslat0*Math.cos(y)-s.y*this.sinlat0*Math.sin(y))),s.x=l,s.y=u,s)}if(Math.abs(this.coslat0)<=z){if(x<=z)return u=this.lat0,l=this.long0,s.x=l,s.y=u,s;s.x*=this.con,s.y*=this.con,g=x*this.cons/(2*this.a*this.k0),u=this.con*Vr(this.e,g),l=this.con*$(this.con*this.long0+Math.atan2(s.x,-1*s.y))}else f=2*Math.atan(x*this.cosX0/(2*this.a*this.k0*this.ms1)),l=this.long0,x<=z?_=this.X0:(_=Math.asin(Math.cos(f)*this.sinX0+s.y*Math.sin(f)*this.cosX0/x),l=$(this.long0+Math.atan2(s.x*Math.sin(f),x*this.cosX0*Math.cos(f)-s.y*this.sinX0*Math.sin(f)))),u=-1*Vr(this.e,Math.tan(.5*(G+_)));return s.x=l,s.y=u,s},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(s,l,u){return l*=u,Math.tan(.5*(G+s))*Math.pow((1-l)/(1+l),.5*u)}},Y0={init:function(){var s=this.lat0;this.lambda0=this.long0;var l=Math.sin(s),u=this.a,g=1/this.rf,f=2*g-Math.pow(g,2),_=this.e=Math.sqrt(f);this.R=this.k0*u*Math.sqrt(1-f)/(1-f*Math.pow(l,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(s),4)),this.b0=Math.asin(l/this.alpha);var x=Math.log(Math.tan(Math.PI/4+this.b0/2)),y=Math.log(Math.tan(Math.PI/4+s/2)),C=Math.log((1+_*l)/(1-_*l));this.K=x-this.alpha*y+this.alpha*_/2*C},forward:function(s){var l=Math.log(Math.tan(Math.PI/4-s.y/2)),u=this.e/2*Math.log((1+this.e*Math.sin(s.y))/(1-this.e*Math.sin(s.y))),g=-this.alpha*(l+u)+this.K,f=2*(Math.atan(Math.exp(g))-Math.PI/4),_=this.alpha*(s.x-this.lambda0),x=Math.atan(Math.sin(_)/(Math.sin(this.b0)*Math.tan(f)+Math.cos(this.b0)*Math.cos(_))),y=Math.asin(Math.cos(this.b0)*Math.sin(f)-Math.sin(this.b0)*Math.cos(f)*Math.cos(_));return s.y=this.R/2*Math.log((1+Math.sin(y))/(1-Math.sin(y)))+this.y0,s.x=this.R*x+this.x0,s},inverse:function(s){for(var l=s.x-this.x0,u=s.y-this.y0,g=l/this.R,f=2*(Math.atan(Math.exp(u/this.R))-Math.PI/4),_=Math.asin(Math.cos(this.b0)*Math.sin(f)+Math.sin(this.b0)*Math.cos(f)*Math.cos(g)),x=Math.atan(Math.sin(g)/(Math.cos(this.b0)*Math.cos(g)-Math.sin(this.b0)*Math.tan(f))),y=this.lambda0+x/this.alpha,C=0,T=_,P=-1e3,O=0;Math.abs(T-P)>1e-7;){if(++O>20)return;C=1/this.alpha*(Math.log(Math.tan(Math.PI/4+_/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(T))/2)),P=T,T=2*Math.atan(Math.exp(C))-Math.PI/2}return s.x=y,s.y=T,s},names:["somerc"]},Vn=1e-7,V0={init:function(){var s,l,u,g,f,_,x,y,C,T,P,O=0,k=0,j=0,N=0,X=0,ht=0,ot=0;this.no_off=xi(this),this.no_rot="no_rot"in this;var Et=!1;"alpha"in this&&(Et=!0);var ut=!1;if("rectified_grid_angle"in this&&(ut=!0),Et&&(ot=this.alpha),ut&&(O=this.rectified_grid_angle*zt),Et||ut)k=this.longc;else if(j=this.long1,X=this.lat1,N=this.long2,ht=this.lat2,Math.abs(X-ht)<=Vn||(s=Math.abs(X))<=Vn||Math.abs(s-G)<=Vn||Math.abs(Math.abs(this.lat0)-G)<=Vn||Math.abs(Math.abs(ht)-G)<=Vn)throw new Error;var qt=1-this.es;l=Math.sqrt(qt),Math.abs(this.lat0)>z?(y=Math.sin(this.lat0),u=Math.cos(this.lat0),s=1-this.es*y*y,this.B=u*u,this.B=Math.sqrt(1+this.es*this.B*this.B/qt),this.A=this.B*this.k0*l/s,(f=(g=this.B*l/(u*Math.sqrt(s)))*g-1)<=0?f=0:(f=Math.sqrt(f),this.lat0<0&&(f=-f)),this.E=f+=g,this.E*=Math.pow(qe(this.e,this.lat0,y),this.B)):(this.B=1/l,this.A=this.k0,this.E=g=f=1),Et||ut?(Et?(P=Math.asin(Math.sin(ot)/g),ut||(O=ot)):(P=O,ot=Math.asin(g*Math.sin(P))),this.lam0=k-Math.asin(.5*(f-1/f)*Math.tan(P))/this.B):(_=Math.pow(qe(this.e,X,Math.sin(X)),this.B),x=Math.pow(qe(this.e,ht,Math.sin(ht)),this.B),f=this.E/_,C=(x-_)/(x+_),T=((T=this.E*this.E)-x*_)/(T+x*_),(s=j-N)<-Math.pi?N-=Ht:s>Math.pi&&(N+=Ht),this.lam0=$(.5*(j+N)-Math.atan(T*Math.tan(.5*this.B*(j-N))/C)/this.B),P=Math.atan(2*Math.sin(this.B*$(j-this.lam0))/(f-1/f)),O=ot=Math.asin(g*Math.sin(P))),this.singam=Math.sin(P),this.cosgam=Math.cos(P),this.sinrot=Math.sin(O),this.cosrot=Math.cos(O),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(g*g-1)/Math.cos(ot))),this.lat0<0&&(this.u_0=-this.u_0)),f=.5*P,this.v_pole_n=this.ArB*Math.log(Math.tan(mt-f)),this.v_pole_s=this.ArB*Math.log(Math.tan(mt+f))},forward:function(s){var l,u,g,f,_,x,y,C,T={};if(s.x=s.x-this.lam0,Math.abs(Math.abs(s.y)-G)>z){if(_=this.E/Math.pow(qe(this.e,s.y,Math.sin(s.y)),this.B),x=1/_,l=.5*(_-x),u=.5*(_+x),f=Math.sin(this.B*s.x),g=(l*this.singam-f*this.cosgam)/u,Math.abs(Math.abs(g)-1)<z)throw new Error;C=.5*this.ArB*Math.log((1-g)/(1+g)),x=Math.cos(this.B*s.x),y=Math.abs(x)<Vn?this.A*s.x:this.ArB*Math.atan2(l*this.cosgam+f*this.singam,x)}else C=s.y>0?this.v_pole_n:this.v_pole_s,y=this.ArB*s.y;return this.no_rot?(T.x=y,T.y=C):(y-=this.u_0,T.x=C*this.cosrot+y*this.sinrot,T.y=y*this.cosrot-C*this.sinrot),T.x=this.a*T.x+this.x0,T.y=this.a*T.y+this.y0,T},inverse:function(s){var l,u,g,f,_,x,y,C={};if(s.x=(s.x-this.x0)*(1/this.a),s.y=(s.y-this.y0)*(1/this.a),this.no_rot?(u=s.y,l=s.x):(u=s.x*this.cosrot-s.y*this.sinrot,l=s.y*this.cosrot+s.x*this.sinrot+this.u_0),g=Math.exp(-this.BrA*u),f=.5*(g-1/g),_=.5*(g+1/g),x=Math.sin(this.BrA*l),y=(x*this.cosgam+f*this.singam)/_,Math.abs(Math.abs(y)-1)<z)C.x=0,C.y=y<0?-G:G;else{if(C.y=this.E/Math.sqrt((1+y)/(1-y)),C.y=Vr(this.e,Math.pow(C.y,1/this.B)),C.y===1/0)throw new Error;C.x=-this.rB*Math.atan2(f*this.cosgam-x*this.singam,Math.cos(this.BrA*l))}return C.x+=this.lam0,C},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},K0={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<z)){var s=this.b/this.a;this.e=Math.sqrt(1-s*s);var l=Math.sin(this.lat1),u=Math.cos(this.lat1),g=ni(this.e,l,u),f=qe(this.e,this.lat1,l),_=Math.sin(this.lat2),x=Math.cos(this.lat2),y=ni(this.e,_,x),C=qe(this.e,this.lat2,_),T=qe(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>z?this.ns=Math.log(g/y)/Math.log(f/C):this.ns=l,isNaN(this.ns)&&(this.ns=l),this.f0=g/(this.ns*Math.pow(f,this.ns)),this.rh=this.a*this.f0*Math.pow(T,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(s){var l=s.x,u=s.y;Math.abs(2*Math.abs(u)-Math.PI)<=z&&(u=Yr(u)*(G-2*z));var g,f,_=Math.abs(Math.abs(u)-G);if(_>z)g=qe(this.e,u,Math.sin(u)),f=this.a*this.f0*Math.pow(g,this.ns);else{if((_=u*this.ns)<=0)return null;f=0}var x=this.ns*$(l-this.long0);return s.x=this.k0*(f*Math.sin(x))+this.x0,s.y=this.k0*(this.rh-f*Math.cos(x))+this.y0,s},inverse:function(s){var l,u,g,f,_,x=(s.x-this.x0)/this.k0,y=this.rh-(s.y-this.y0)/this.k0;this.ns>0?(l=Math.sqrt(x*x+y*y),u=1):(l=-Math.sqrt(x*x+y*y),u=-1);var C=0;if(l!==0&&(C=Math.atan2(u*x,u*y)),l!==0||this.ns>0){if(u=1/this.ns,g=Math.pow(l/(this.a*this.f0),u),(f=Vr(this.e,g))===-9999)return null}else f=-G;return _=$(C/this.ns+this.long0),s.x=_,s.y=f,s},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},H0={init:function(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(s){var l,u,g,f,_,x,y,C=s.x,T=s.y,P=$(C-this.long0);return l=Math.pow((1+this.e*Math.sin(T))/(1-this.e*Math.sin(T)),this.alfa*this.e/2),u=2*(Math.atan(this.k*Math.pow(Math.tan(T/2+this.s45),this.alfa)/l)-this.s45),g=-P*this.alfa,f=Math.asin(Math.cos(this.ad)*Math.sin(u)+Math.sin(this.ad)*Math.cos(u)*Math.cos(g)),_=Math.asin(Math.cos(u)*Math.sin(g)/Math.cos(f)),x=this.n*_,y=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(f/2+this.s45),this.n),s.y=y*Math.cos(x)/1,s.x=y*Math.sin(x)/1,this.czech||(s.y*=-1,s.x*=-1),s},inverse:function(s){var l,u,g,f,_,x,y,C=s.x;s.x=s.y,s.y=C,this.czech||(s.y*=-1,s.x*=-1),_=Math.sqrt(s.x*s.x+s.y*s.y),f=Math.atan2(s.y,s.x)/Math.sin(this.s0),g=2*(Math.atan(Math.pow(this.ro0/_,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),l=Math.asin(Math.cos(this.ad)*Math.sin(g)-Math.sin(this.ad)*Math.cos(g)*Math.cos(f)),u=Math.asin(Math.cos(g)*Math.sin(f)/Math.cos(l)),s.x=this.long0-u/this.alfa,x=l,y=0;var T=0;do s.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(l/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(x))/(1-this.e*Math.sin(x)),this.e/2))-this.s45),Math.abs(x-s.y)<1e-10&&(y=1),x=s.y,T+=1;while(y===0&&T<15);return T>=15?null:s},names:["Krovak","krovak"]},de=function(s,l,u,g,f){return s*f-l*Math.sin(2*f)+u*Math.sin(4*f)-g*Math.sin(6*f)},Zr=function(s){return 1-.25*s*(1+s/16*(3+1.25*s))},Jr=function(s){return .375*s*(1+.25*s*(1+.46875*s))},$r=function(s){return .05859375*s*s*(1+.75*s)},Qr=function(s){return s*s*s*(35/3072)},Kn=function(s,l,u){var g=l*u;return s/Math.sqrt(1-g*g)},Hn=function(s){return Math.abs(s)<G?s:s-Yr(s)*Math.PI},to=function(s,l,u,g,f){var _,x;_=s/l;for(var y=0;y<15;y++)if(x=(s-(l*_-u*Math.sin(2*_)+g*Math.sin(4*_)-f*Math.sin(6*_)))/(l-2*u*Math.cos(2*_)+4*g*Math.cos(4*_)-6*f*Math.cos(6*_)),_+=x,Math.abs(x)<=1e-10)return _;return NaN},Z0={init:function(){this.sphere||(this.e0=Zr(this.es),this.e1=Jr(this.es),this.e2=$r(this.es),this.e3=Qr(this.es),this.ml0=this.a*de(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(s){var l,u,g=s.x,f=s.y;if(g=$(g-this.long0),this.sphere)l=this.a*Math.asin(Math.cos(f)*Math.sin(g)),u=this.a*(Math.atan2(Math.tan(f),Math.cos(g))-this.lat0);else{var _=Math.sin(f),x=Math.cos(f),y=Kn(this.a,this.e,_),C=Math.tan(f)*Math.tan(f),T=g*Math.cos(f),P=T*T,O=this.es*x*x/(1-this.es);l=y*T*(1-P*C*(1/6-(8-C+8*O)*P/120)),u=this.a*de(this.e0,this.e1,this.e2,this.e3,f)-this.ml0+y*_/x*P*(.5+(5-C+6*O)*P/24)}return s.x=l+this.x0,s.y=u+this.y0,s},inverse:function(s){s.x-=this.x0,s.y-=this.y0;var l,u,g=s.x/this.a,f=s.y/this.a;if(this.sphere){var _=f+this.lat0;l=Math.asin(Math.sin(_)*Math.cos(g)),u=Math.atan2(Math.tan(g),Math.cos(_))}else{var x=this.ml0/this.a+f,y=to(x,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(y)-G)<=z)return s.x=this.long0,s.y=G,f<0&&(s.y*=-1),s;var C=Kn(this.a,this.e,Math.sin(y)),T=C*C*C/this.a/this.a*(1-this.es),P=Math.pow(Math.tan(y),2),O=g*this.a/C,k=O*O;l=y-C*Math.tan(y)/T*O*O*(.5-(1+3*P)*O*O/24),u=O*(1-k*(P/3+(1+3*P)*P*k/15))/Math.cos(y)}return s.x=$(u+this.long0),s.y=Hn(l),s},names:["Cassini","Cassini_Soldner","cass"]},Vi=function(s,l){var u;return s>1e-7?(u=s*l,(1-s*s)*(l/(1-u*u)-.5/s*Math.log((1-u)/(1+u)))):2*l},J0=.3333333333333333,$0=.17222222222222222,Q0=.10257936507936508,ty=.06388888888888888,ey=.0664021164021164,iy=.016415012942191543,ny={init:function(){var s=Math.abs(this.lat0);if(Math.abs(s-G)<z?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(s)<z?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var l;switch(this.qp=Vi(this.e,1),this.mmf=.5/(1-this.es),this.apa=ii(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),l=Math.sin(this.lat0),this.sinb1=Vi(this.e,l)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*l*l)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(s){var l,u,g,f,_,x,y,C,T,P,O=s.x,k=s.y;if(O=$(O-this.long0),this.sphere){if(_=Math.sin(k),P=Math.cos(k),g=Math.cos(O),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((u=this.mode===this.EQUIT?1+P*g:1+this.sinph0*_+this.cosph0*P*g)<=z)return null;l=(u=Math.sqrt(2/u))*P*Math.sin(O),u*=this.mode===this.EQUIT?_:this.cosph0*_-this.sinph0*P*g}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(g=-g),Math.abs(k+this.lat0)<z)return null;u=mt-.5*k,l=(u=2*(this.mode===this.S_POLE?Math.cos(u):Math.sin(u)))*Math.sin(O),u*=g}}else{switch(y=0,C=0,T=0,g=Math.cos(O),f=Math.sin(O),_=Math.sin(k),x=Vi(this.e,_),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=x/this.qp,C=Math.sqrt(1-y*y)),this.mode){case this.OBLIQ:T=1+this.sinb1*y+this.cosb1*C*g;break;case this.EQUIT:T=1+C*g;break;case this.N_POLE:T=G+k,x=this.qp-x;break;case this.S_POLE:T=k-G,x=this.qp+x}if(Math.abs(T)<z)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:T=Math.sqrt(2/T),u=this.mode===this.OBLIQ?this.ymf*T*(this.cosb1*y-this.sinb1*C*g):(T=Math.sqrt(2/(1+C*g)))*y*this.ymf,l=this.xmf*T*C*f;break;case this.N_POLE:case this.S_POLE:x>=0?(l=(T=Math.sqrt(x))*f,u=g*(this.mode===this.S_POLE?T:-T)):l=u=0}}return s.x=this.a*l+this.x0,s.y=this.a*u+this.y0,s},inverse:function(s){s.x-=this.x0,s.y-=this.y0;var l,u,g,f,_,x,y,C=s.x/this.a,T=s.y/this.a;if(this.sphere){var P,O=0,k=0;if(P=Math.sqrt(C*C+T*T),(u=.5*P)>1)return null;switch(u=2*Math.asin(u),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(k=Math.sin(u),O=Math.cos(u)),this.mode){case this.EQUIT:u=Math.abs(P)<=z?0:Math.asin(T*k/P),C*=k,T=O*P;break;case this.OBLIQ:u=Math.abs(P)<=z?this.lat0:Math.asin(O*this.sinph0+T*k*this.cosph0/P),C*=k*this.cosph0,T=(O-Math.sin(u)*this.sinph0)*P;break;case this.N_POLE:T=-T,u=G-u;break;case this.S_POLE:u-=G}l=T!==0||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(C,T):0}else{if(y=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(C/=this.dd,T*=this.dd,(x=Math.sqrt(C*C+T*T))<z)return s.x=this.long0,s.y=this.lat0,s;f=2*Math.asin(.5*x/this.rq),g=Math.cos(f),C*=f=Math.sin(f),this.mode===this.OBLIQ?(y=g*this.sinb1+T*f*this.cosb1/x,_=this.qp*y,T=x*this.cosb1*g-T*this.sinb1*f):(y=T*f/x,_=this.qp*y,T=x*g)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(T=-T),!(_=C*C+T*T))return s.x=this.long0,s.y=this.lat0,s;y=1-_/this.qp,this.mode===this.S_POLE&&(y=-y)}l=Math.atan2(C,T),u=Xi(Math.asin(y),this.apa)}return s.x=$(this.long0+l),s.y=u,s},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},Ki=function(s){return Math.abs(s)>1&&(s=s>1?1:-1),Math.asin(s)},ry={init:function(){Math.abs(this.lat1+this.lat2)<z||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ni(this.e3,this.sin_po,this.cos_po),this.qs1=Vi(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ni(this.e3,this.sin_po,this.cos_po),this.qs2=Vi(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Vi(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>z?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(s){var l=s.x,u=s.y;this.sin_phi=Math.sin(u),this.cos_phi=Math.cos(u);var g=Vi(this.e3,this.sin_phi,this.cos_phi),f=this.a*Math.sqrt(this.c-this.ns0*g)/this.ns0,_=this.ns0*$(l-this.long0),x=f*Math.sin(_)+this.x0,y=this.rh-f*Math.cos(_)+this.y0;return s.x=x,s.y=y,s},inverse:function(s){var l,u,g,f,_,x;return s.x-=this.x0,s.y=this.rh-s.y+this.y0,this.ns0>=0?(l=Math.sqrt(s.x*s.x+s.y*s.y),g=1):(l=-Math.sqrt(s.x*s.x+s.y*s.y),g=-1),f=0,l!==0&&(f=Math.atan2(g*s.x,g*s.y)),g=l*this.ns0/this.a,this.sphere?x=Math.asin((this.c-g*g)/(2*this.ns0)):(u=(this.c-g*g)/this.ns0,x=this.phi1z(this.e3,u)),_=$(f/this.ns0+this.long0),s.x=_,s.y=x,s},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(s,l){var u,g,f,_,x,y=Ki(.5*l);if(s<z)return y;for(var C=s*s,T=1;T<=25;T++)if(u=Math.sin(y),g=Math.cos(y),f=s*u,_=1-f*f,x=.5*_*_/g*(l/(1-C)-u/_+.5/s*Math.log((1-f)/(1+f))),y+=x,Math.abs(x)<=1e-7)return y;return null}},sy={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(s){var l,u,g,f,_,x,y,C=s.x,T=s.y;return g=$(C-this.long0),l=Math.sin(T),u=Math.cos(T),f=Math.cos(g),(_=this.sin_p14*l+this.cos_p14*u*f)>0||Math.abs(_)<=z?(x=this.x0+1*this.a*u*Math.sin(g)/_,y=this.y0+1*this.a*(this.cos_p14*l-this.sin_p14*u*f)/_):(x=this.x0+this.infinity_dist*u*Math.sin(g),y=this.y0+this.infinity_dist*(this.cos_p14*l-this.sin_p14*u*f)),s.x=x,s.y=y,s},inverse:function(s){var l,u,g,f,_,x;return s.x=(s.x-this.x0)/this.a,s.y=(s.y-this.y0)/this.a,s.x/=this.k0,s.y/=this.k0,(l=Math.sqrt(s.x*s.x+s.y*s.y))?(f=Math.atan2(l,this.rc),u=Math.sin(f),g=Math.cos(f),x=Ki(g*this.sin_p14+s.y*u*this.cos_p14/l),_=Math.atan2(s.x*u,l*this.cos_p14*g-s.y*this.sin_p14*u),_=$(this.long0+_)):(x=this.phic0,_=0),s.x=_,s.y=x,s},names:["gnom"]},oy=function(s,l){var u=1-(1-s*s)/(2*s)*Math.log((1-s)/(1+s));if(Math.abs(Math.abs(l)-u)<1e-6)return l<0?-1*G:G;for(var g,f,_,x,y=Math.asin(.5*l),C=0;C<30;C++)if(f=Math.sin(y),_=Math.cos(y),x=s*f,g=Math.pow(1-x*x,2)/(2*_)*(l/(1-s*s)-f/(1-x*x)+.5/s*Math.log((1-x)/(1+x))),y+=g,Math.abs(g)<=1e-10)return y;return NaN},ay={init:function(){this.sphere||(this.k0=ni(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(s){var l,u,g=s.x,f=s.y,_=$(g-this.long0);if(this.sphere)l=this.x0+this.a*_*Math.cos(this.lat_ts),u=this.y0+this.a*Math.sin(f)/Math.cos(this.lat_ts);else{var x=Vi(this.e,Math.sin(f));l=this.x0+this.a*this.k0*_,u=this.y0+this.a*x*.5/this.k0}return s.x=l,s.y=u,s},inverse:function(s){s.x-=this.x0,s.y-=this.y0;var l,u;return this.sphere?(l=$(this.long0+s.x/this.a/Math.cos(this.lat_ts)),u=Math.asin(s.y/this.a*Math.cos(this.lat_ts))):(u=oy(this.e,2*s.y*this.k0/this.a),l=$(this.long0+s.x/(this.a*this.k0))),s.x=l,s.y=u,s},names:["cea"]},hy={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(s){var l=s.x,u=s.y,g=$(l-this.long0),f=Hn(u-this.lat0);return s.x=this.x0+this.a*g*this.rc,s.y=this.y0+this.a*f,s},inverse:function(s){var l=s.x,u=s.y;return s.x=$(this.long0+(l-this.x0)/(this.a*this.rc)),s.y=Hn(this.lat0+(u-this.y0)/this.a),s},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},ju=20,ly={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Zr(this.es),this.e1=Jr(this.es),this.e2=$r(this.es),this.e3=Qr(this.es),this.ml0=this.a*de(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(s){var l,u,g,f=s.x,_=s.y,x=$(f-this.long0);if(g=x*Math.sin(_),this.sphere)Math.abs(_)<=z?(l=this.a*x,u=-1*this.a*this.lat0):(l=this.a*Math.sin(g)/Math.tan(_),u=this.a*(Hn(_-this.lat0)+(1-Math.cos(g))/Math.tan(_)));else if(Math.abs(_)<=z)l=this.a*x,u=-1*this.ml0;else{var y=Kn(this.a,this.e,Math.sin(_))/Math.tan(_);l=y*Math.sin(g),u=this.a*de(this.e0,this.e1,this.e2,this.e3,_)-this.ml0+y*(1-Math.cos(g))}return s.x=l+this.x0,s.y=u+this.y0,s},inverse:function(s){var l,u,g,f,_,x,y,C,T;if(g=s.x-this.x0,f=s.y-this.y0,this.sphere)if(Math.abs(f+this.a*this.lat0)<=z)l=$(g/this.a+this.long0),u=0;else{x=this.lat0+f/this.a,y=g*g/this.a/this.a+x*x,C=x;var P;for(_=ju;_;--_)if(P=Math.tan(C),T=-1*(x*(C*P+1)-C-.5*(C*C+y)*P)/((C-x)/P-1),C+=T,Math.abs(T)<=z){u=C;break}l=$(this.long0+Math.asin(g*Math.tan(C)/this.a)/Math.sin(u))}else if(Math.abs(f+this.ml0)<=z)u=0,l=$(this.long0+g/this.a);else{x=(this.ml0+f)/this.a,y=g*g/this.a/this.a+x*x,C=x;var O,k,j,N,X;for(_=ju;_;--_)if(X=this.e*Math.sin(C),O=Math.sqrt(1-X*X)*Math.tan(C),k=this.a*de(this.e0,this.e1,this.e2,this.e3,C),j=this.e0-2*this.e1*Math.cos(2*C)+4*this.e2*Math.cos(4*C)-6*this.e3*Math.cos(6*C),N=k/this.a,T=(x*(O*N+1)-N-.5*O*(N*N+y))/(this.es*Math.sin(2*C)*(N*N+y-2*x*N)/(4*O)+(x-N)*(O*j-2/Math.sin(2*C))-j),C-=T,Math.abs(T)<=z){u=C;break}O=Math.sqrt(1-this.es*Math.pow(Math.sin(u),2))*Math.tan(u),l=$(this.long0+Math.asin(g*O/this.a)/Math.sin(u))}return s.x=l,s.y=u,s},names:["Polyconic","poly"]},cy={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(s){var l,u=s.x,g=s.y-this.lat0,f=u-this.long0,_=g/Yi*1e-5,x=f,y=1,C=0;for(l=1;l<=10;l++)y*=_,C+=this.A[l]*y;var T,P=C,O=x,k=1,j=0,N=0,X=0;for(l=1;l<=6;l++)T=j*P+k*O,k=k*P-j*O,j=T,N=N+this.B_re[l]*k-this.B_im[l]*j,X=X+this.B_im[l]*k+this.B_re[l]*j;return s.x=X*this.a+this.x0,s.y=N*this.a+this.y0,s},inverse:function(s){var l,u,g=s.x,f=s.y,_=g-this.x0,x=(f-this.y0)/this.a,y=_/this.a,C=1,T=0,P=0,O=0;for(l=1;l<=6;l++)u=T*x+C*y,C=C*x-T*y,T=u,P=P+this.C_re[l]*C-this.C_im[l]*T,O=O+this.C_im[l]*C+this.C_re[l]*T;for(var k=0;k<this.iterations;k++){var j,N=P,X=O,ht=x,ot=y;for(l=2;l<=6;l++)j=X*P+N*O,N=N*P-X*O,X=j,ht+=(l-1)*(this.B_re[l]*N-this.B_im[l]*X),ot+=(l-1)*(this.B_im[l]*N+this.B_re[l]*X);N=1,X=0;var Et=this.B_re[1],ut=this.B_im[1];for(l=2;l<=6;l++)j=X*P+N*O,N=N*P-X*O,X=j,Et+=l*(this.B_re[l]*N-this.B_im[l]*X),ut+=l*(this.B_im[l]*N+this.B_re[l]*X);var qt=Et*Et+ut*ut;P=(ht*Et+ot*ut)/qt,O=(ot*Et-ht*ut)/qt}var ie=P,Xt=O,Hi=1,Zi=0;for(l=1;l<=9;l++)Hi*=ie,Zi+=this.D[l]*Hi;var Ji=this.lat0+Zi*Yi*1e5,Jn=this.long0+Xt;return s.x=Jn,s.y=Ji,s},names:["New_Zealand_Map_Grid","nzmg"]},uy={init:function(){},forward:function(s){var l=s.x,u=s.y,g=$(l-this.long0),f=this.x0+this.a*g,_=this.y0+this.a*Math.log(Math.tan(Math.PI/4+u/2.5))*1.25;return s.x=f,s.y=_,s},inverse:function(s){s.x-=this.x0,s.y-=this.y0;var l=$(this.long0+s.x/this.a),u=2.5*(Math.atan(Math.exp(.8*s.y/this.a))-Math.PI/4);return s.x=l,s.y=u,s},names:["Miller_Cylindrical","mill"]},dy=20,fy={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Nu(this.es)},forward:function(s){var l,u,g=s.x,f=s.y;if(g=$(g-this.long0),this.sphere){if(this.m)for(var _=this.n*Math.sin(f),x=dy;x;--x){var y=(this.m*f+Math.sin(f)-_)/(this.m+Math.cos(f));if(f-=y,Math.abs(y)<z)break}else f=this.n!==1?Math.asin(this.n*Math.sin(f)):f;l=this.a*this.C_x*g*(this.m+Math.cos(f)),u=this.a*this.C_y*f}else{var C=Math.sin(f),T=Math.cos(f);u=this.a*Js(f,C,T,this.en),l=this.a*g*T/Math.sqrt(1-this.es*C*C)}return s.x=l,s.y=u,s},inverse:function(s){var l,u,g,f;return s.x-=this.x0,g=s.x/this.a,s.y-=this.y0,l=s.y/this.a,this.sphere?(l/=this.C_y,g/=this.C_x*(this.m+Math.cos(l)),this.m?l=Ki((this.m*l+Math.sin(l))/this.n):this.n!==1&&(l=Ki(Math.sin(l)/this.n)),g=$(g+this.long0),l=Hn(l)):(l=Gu(s.y/this.a,this.es,this.en),(f=Math.abs(l))<G?(f=Math.sin(l),u=this.long0+s.x*Math.sqrt(1-this.es*f*f)/(this.a*Math.cos(l)),g=$(u)):f-z<G&&(g=this.long0)),s.x=g,s.y=l,s},names:["Sinusoidal","sinu"]},my={init:function(){},forward:function(s){for(var l=s.x,u=s.y,g=$(l-this.long0),f=u,_=Math.PI*Math.sin(u);;){var x=-(f+Math.sin(f)-_)/(1+Math.cos(f));if(f+=x,Math.abs(x)<z)break}f/=2,Math.PI/2-Math.abs(u)<z&&(g=0);var y=.900316316158*this.a*g*Math.cos(f)+this.x0,C=1.4142135623731*this.a*Math.sin(f)+this.y0;return s.x=y,s.y=C,s},inverse:function(s){var l,u;s.x-=this.x0,s.y-=this.y0,u=s.y/(1.4142135623731*this.a),Math.abs(u)>.999999999999&&(u=.999999999999),l=Math.asin(u);var g=$(this.long0+s.x/(.900316316158*this.a*Math.cos(l)));g<-Math.PI&&(g=-Math.PI),g>Math.PI&&(g=Math.PI),u=(2*l+Math.sin(2*l))/Math.PI,Math.abs(u)>1&&(u=1);var f=Math.asin(u);return s.x=g,s.y=f,s},names:["Mollweide","moll"]},gy={init:function(){Math.abs(this.lat1+this.lat2)<z||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Zr(this.es),this.e1=Jr(this.es),this.e2=$r(this.es),this.e3=Qr(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=ni(this.e,this.sinphi,this.cosphi),this.ml1=de(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<z?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=ni(this.e,this.sinphi,this.cosphi),this.ml2=de(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=de(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(s){var l,u=s.x,g=s.y;if(this.sphere)l=this.a*(this.g-g);else{var f=de(this.e0,this.e1,this.e2,this.e3,g);l=this.a*(this.g-f)}var _=this.ns*$(u-this.long0),x=this.x0+l*Math.sin(_),y=this.y0+this.rh-l*Math.cos(_);return s.x=x,s.y=y,s},inverse:function(s){s.x-=this.x0,s.y=this.rh-s.y+this.y0;var l,u,g,f;this.ns>=0?(u=Math.sqrt(s.x*s.x+s.y*s.y),l=1):(u=-Math.sqrt(s.x*s.x+s.y*s.y),l=-1);var _=0;if(u!==0&&(_=Math.atan2(l*s.x,l*s.y)),this.sphere)return f=$(this.long0+_/this.ns),g=Hn(this.g-u/this.a),s.x=f,s.y=g,s;var x=this.g-u/this.a;return g=to(x,this.e0,this.e1,this.e2,this.e3),f=$(this.long0+_/this.ns),s.x=f,s.y=g,s},names:["Equidistant_Conic","eqdc"]},py={init:function(){this.R=this.a},forward:function(s){var l,u,g=s.x,f=s.y,_=$(g-this.long0);Math.abs(f)<=z&&(l=this.x0+this.R*_,u=this.y0);var x=Ki(2*Math.abs(f/Math.PI));(Math.abs(_)<=z||Math.abs(Math.abs(f)-G)<=z)&&(l=this.x0,u=f>=0?this.y0+Math.PI*this.R*Math.tan(.5*x):this.y0+Math.PI*this.R*-Math.tan(.5*x));var y=.5*Math.abs(Math.PI/_-_/Math.PI),C=y*y,T=Math.sin(x),P=Math.cos(x),O=P/(T+P-1),k=O*O,j=O*(2/T-1),N=j*j,X=Math.PI*this.R*(y*(O-N)+Math.sqrt(C*(O-N)*(O-N)-(N+C)*(k-N)))/(N+C);_<0&&(X=-X),l=this.x0+X;var ht=C+O;return X=Math.PI*this.R*(j*ht-y*Math.sqrt((N+C)*(C+1)-ht*ht))/(N+C),u=f>=0?this.y0+X:this.y0-X,s.x=l,s.y=u,s},inverse:function(s){var l,u,g,f,_,x,y,C,T,P,O,k,j;return s.x-=this.x0,s.y-=this.y0,O=Math.PI*this.R,g=s.x/O,f=s.y/O,_=g*g+f*f,x=-Math.abs(f)*(1+_),y=x-2*f*f+g*g,C=-2*x+1+2*f*f+_*_,j=f*f/C+(2*y*y*y/C/C/C-9*x*y/C/C)/27,T=(x-y*y/3/C)/C,P=2*Math.sqrt(-T/3),O=3*j/T/P,Math.abs(O)>1&&(O=O>=0?1:-1),k=Math.acos(O)/3,u=s.y>=0?(-P*Math.cos(k+Math.PI/3)-y/3/C)*Math.PI:-(-P*Math.cos(k+Math.PI/3)-y/3/C)*Math.PI,l=Math.abs(g)<z?this.long0:$(this.long0+Math.PI*(_-1+Math.sqrt(1+2*(g*g-f*f)+_*_))/2/g),s.x=l,s.y=u,s},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},_y={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(s){var l,u,g,f,_,x,y,C,T,P,O,k,j,N,X,ht,ot,Et,ut,qt,ie,Xt,Hi,Zi=s.x,Ji=s.y,Jn=Math.sin(s.y),is=Math.cos(s.y),ye=$(Zi-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=z?(s.x=this.x0+this.a*(G-Ji)*Math.sin(ye),s.y=this.y0-this.a*(G-Ji)*Math.cos(ye),s):Math.abs(this.sin_p12+1)<=z?(s.x=this.x0+this.a*(G+Ji)*Math.sin(ye),s.y=this.y0+this.a*(G+Ji)*Math.cos(ye),s):(Et=this.sin_p12*Jn+this.cos_p12*is*Math.cos(ye),ht=Math.acos(Et),ot=ht?ht/Math.sin(ht):1,s.x=this.x0+this.a*ot*is*Math.sin(ye),s.y=this.y0+this.a*ot*(this.cos_p12*Jn-this.sin_p12*is*Math.cos(ye)),s):(l=Zr(this.es),u=Jr(this.es),g=$r(this.es),f=Qr(this.es),Math.abs(this.sin_p12-1)<=z?(_=this.a*de(l,u,g,f,G),x=this.a*de(l,u,g,f,Ji),s.x=this.x0+(_-x)*Math.sin(ye),s.y=this.y0-(_-x)*Math.cos(ye),s):Math.abs(this.sin_p12+1)<=z?(_=this.a*de(l,u,g,f,G),x=this.a*de(l,u,g,f,Ji),s.x=this.x0+(_+x)*Math.sin(ye),s.y=this.y0+(_+x)*Math.cos(ye),s):(y=Jn/is,C=Kn(this.a,this.e,this.sin_p12),T=Kn(this.a,this.e,Jn),P=Math.atan((1-this.es)*y+this.es*C*this.sin_p12/(T*is)),O=Math.atan2(Math.sin(ye),this.cos_p12*Math.tan(P)-this.sin_p12*Math.cos(ye)),ut=O===0?Math.asin(this.cos_p12*Math.sin(P)-this.sin_p12*Math.cos(P)):Math.abs(Math.abs(O)-Math.PI)<=z?-Math.asin(this.cos_p12*Math.sin(P)-this.sin_p12*Math.cos(P)):Math.asin(Math.sin(ye)*Math.cos(P)/Math.sin(O)),k=this.e*this.sin_p12/Math.sqrt(1-this.es),j=this.e*this.cos_p12*Math.cos(O)/Math.sqrt(1-this.es),N=k*j,X=j*j,qt=ut*ut,ie=qt*ut,Xt=ie*ut,Hi=Xt*ut,ht=C*ut*(1-qt*X*(1-X)/6+ie/8*N*(1-2*X)+Xt/120*(X*(4-7*X)-3*k*k*(1-7*X))-Hi/48*N),s.x=this.x0+ht*Math.sin(O),s.y=this.y0+ht*Math.cos(O),s))},inverse:function(s){s.x-=this.x0,s.y-=this.y0;var l,u,g,f,_,x,y,C,T,P,O,k,j,N,X,ht,ot,Et,ut,qt,ie,Xt,Hi,Zi;return this.sphere?(l=Math.sqrt(s.x*s.x+s.y*s.y))>2*G*this.a?void 0:(u=l/this.a,g=Math.sin(u),f=Math.cos(u),_=this.long0,Math.abs(l)<=z?x=this.lat0:(x=Ki(f*this.sin_p12+s.y*g*this.cos_p12/l),y=Math.abs(this.lat0)-G,_=$(Math.abs(y)<=z?this.lat0>=0?this.long0+Math.atan2(s.x,-s.y):this.long0-Math.atan2(-s.x,s.y):this.long0+Math.atan2(s.x*g,l*this.cos_p12*f-s.y*this.sin_p12*g))),s.x=_,s.y=x,s):(C=Zr(this.es),T=Jr(this.es),P=$r(this.es),O=Qr(this.es),Math.abs(this.sin_p12-1)<=z?(k=this.a*de(C,T,P,O,G),l=Math.sqrt(s.x*s.x+s.y*s.y),j=k-l,x=to(j/this.a,C,T,P,O),_=$(this.long0+Math.atan2(s.x,-1*s.y)),s.x=_,s.y=x,s):Math.abs(this.sin_p12+1)<=z?(k=this.a*de(C,T,P,O,G),l=Math.sqrt(s.x*s.x+s.y*s.y),j=l-k,x=to(j/this.a,C,T,P,O),_=$(this.long0+Math.atan2(s.x,s.y)),s.x=_,s.y=x,s):(l=Math.sqrt(s.x*s.x+s.y*s.y),ht=Math.atan2(s.x,s.y),N=Kn(this.a,this.e,this.sin_p12),ot=Math.cos(ht),Et=this.e*this.cos_p12*ot,ut=-Et*Et/(1-this.es),qt=3*this.es*(1-ut)*this.sin_p12*this.cos_p12*ot/(1-this.es),ie=l/N,Xt=ie-ut*(1+ut)*Math.pow(ie,3)/6-qt*(1+3*ut)*Math.pow(ie,4)/24,Hi=1-ut*Xt*Xt/2-ie*Xt*Xt*Xt/6,X=Math.asin(this.sin_p12*Math.cos(Xt)+this.cos_p12*Math.sin(Xt)*ot),_=$(this.long0+Math.asin(Math.sin(ht)*Math.sin(Xt)/Math.cos(X))),Zi=Math.sin(X),x=Math.atan2((Zi-this.es*Hi*this.sin_p12)*Math.tan(X),Zi*(1-this.es)),s.x=_,s.y=x,s))},names:["Azimuthal_Equidistant","aeqd"]},yy={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(s){var l,u,g,f,_,x,y,C=s.x,T=s.y;return g=$(C-this.long0),l=Math.sin(T),u=Math.cos(T),f=Math.cos(g),((_=this.sin_p14*l+this.cos_p14*u*f)>0||Math.abs(_)<=z)&&(x=1*this.a*u*Math.sin(g),y=this.y0+1*this.a*(this.cos_p14*l-this.sin_p14*u*f)),s.x=x,s.y=y,s},inverse:function(s){var l,u,g,f,_,x,y;return s.x-=this.x0,s.y-=this.y0,l=Math.sqrt(s.x*s.x+s.y*s.y),u=Ki(l/this.a),g=Math.sin(u),f=Math.cos(u),x=this.long0,Math.abs(l)<=z?(y=this.lat0,s.x=x,s.y=y,s):(y=Ki(f*this.sin_p14+s.y*g*this.cos_p14/l),_=Math.abs(this.lat0)-G,Math.abs(_)<=z?(x=$(this.lat0>=0?this.long0+Math.atan2(s.x,-s.y):this.long0-Math.atan2(-s.x,s.y)),s.x=x,s.y=y,s):(x=$(this.long0+Math.atan2(s.x*g,l*this.cos_p14*f-s.y*this.sin_p14*g)),s.x=x,s.y=y,s))},names:["ortho"]},Pt={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Ct={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4},xy={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=G-mt/2?this.face=Pt.TOP:this.lat0<=-(G-mt/2)?this.face=Pt.BOTTOM:Math.abs(this.long0)<=mt?this.face=Pt.FRONT:Math.abs(this.long0)<=G+mt?this.face=this.long0>0?Pt.RIGHT:Pt.LEFT:this.face=Pt.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(s){var l,u,g,f,_,x,y={x:0,y:0},C={value:0};if(s.x-=this.long0,l=this.es!==0?Math.atan(this.one_minus_f_squared*Math.tan(s.y)):s.y,u=s.x,this.face===Pt.TOP)f=G-l,u>=mt&&u<=G+mt?(C.value=Ct.AREA_0,g=u-G):u>G+mt||u<=-(G+mt)?(C.value=Ct.AREA_1,g=u>0?u-vt:u+vt):u>-(G+mt)&&u<=-mt?(C.value=Ct.AREA_2,g=u+G):(C.value=Ct.AREA_3,g=u);else if(this.face===Pt.BOTTOM)f=G+l,u>=mt&&u<=G+mt?(C.value=Ct.AREA_0,g=-u+G):u<mt&&u>=-mt?(C.value=Ct.AREA_1,g=-u):u<-mt&&u>=-(G+mt)?(C.value=Ct.AREA_2,g=-u-G):(C.value=Ct.AREA_3,g=u>0?-u+vt:-u-vt);else{var T,P,O,k,j,N;this.face===Pt.RIGHT?u=kt(u,+G):this.face===Pt.BACK?u=kt(u,+vt):this.face===Pt.LEFT&&(u=kt(u,-G)),k=Math.sin(l),j=Math.cos(l),N=Math.sin(u),T=j*Math.cos(u),P=j*N,O=k,this.face===Pt.FRONT?g=Ei(f=Math.acos(T),O,P,C):this.face===Pt.RIGHT?g=Ei(f=Math.acos(P),O,-T,C):this.face===Pt.BACK?g=Ei(f=Math.acos(-T),O,-P,C):this.face===Pt.LEFT?g=Ei(f=Math.acos(-P),O,T,C):(f=g=0,C.value=Ct.AREA_0)}return x=Math.atan(12/vt*(g+Math.acos(Math.sin(g)*Math.cos(mt))-G)),_=Math.sqrt((1-Math.cos(f))/(Math.cos(x)*Math.cos(x))/(1-Math.cos(Math.atan(1/Math.cos(g))))),C.value===Ct.AREA_1?x+=G:C.value===Ct.AREA_2?x+=vt:C.value===Ct.AREA_3&&(x+=1.5*vt),y.x=_*Math.cos(x),y.y=_*Math.sin(x),y.x=y.x*this.a+this.x0,y.y=y.y*this.a+this.y0,s.x=y.x,s.y=y.y,s},inverse:function(s){var l,u,g,f,_,x,y,C,T,P={lam:0,phi:0},O={value:0};if(s.x=(s.x-this.x0)/this.a,s.y=(s.y-this.y0)/this.a,u=Math.atan(Math.sqrt(s.x*s.x+s.y*s.y)),l=Math.atan2(s.y,s.x),s.x>=0&&s.x>=Math.abs(s.y)?O.value=Ct.AREA_0:s.y>=0&&s.y>=Math.abs(s.x)?(O.value=Ct.AREA_1,l-=G):s.x<0&&-s.x>=Math.abs(s.y)?(O.value=Ct.AREA_2,l=l<0?l+vt:l-vt):(O.value=Ct.AREA_3,l+=G),T=vt/12*Math.tan(l),_=Math.sin(T)/(Math.cos(T)-1/Math.sqrt(2)),x=Math.atan(_),g=Math.cos(l),f=Math.tan(u),(y=1-g*g*f*f*(1-Math.cos(Math.atan(1/Math.cos(x)))))<-1?y=-1:y>1&&(y=1),this.face===Pt.TOP)C=Math.acos(y),P.phi=G-C,O.value===Ct.AREA_0?P.lam=x+G:O.value===Ct.AREA_1?P.lam=x<0?x+vt:x-vt:O.value===Ct.AREA_2?P.lam=x-G:P.lam=x;else if(this.face===Pt.BOTTOM)C=Math.acos(y),P.phi=C-G,O.value===Ct.AREA_0?P.lam=-x+G:O.value===Ct.AREA_1?P.lam=-x:O.value===Ct.AREA_2?P.lam=-x-G:P.lam=x<0?-x-vt:-x+vt;else{var k,j,N;T=(k=y)*k,j=(T+=(N=T>=1?0:Math.sqrt(1-T)*Math.sin(x))*N)>=1?0:Math.sqrt(1-T),O.value===Ct.AREA_1?(T=j,j=-N,N=T):O.value===Ct.AREA_2?(j=-j,N=-N):O.value===Ct.AREA_3&&(T=j,j=N,N=-T),this.face===Pt.RIGHT?(T=k,k=-j,j=T):this.face===Pt.BACK?(k=-k,j=-j):this.face===Pt.LEFT&&(T=k,k=j,j=-T),P.phi=Math.acos(-N)-G,P.lam=Math.atan2(j,k),this.face===Pt.RIGHT?P.lam=kt(P.lam,-G):this.face===Pt.BACK?P.lam=kt(P.lam,-vt):this.face===Pt.LEFT&&(P.lam=kt(P.lam,+G))}if(this.es!==0){var X,ht,ot;X=P.phi<0?1:0,ht=Math.tan(P.phi),ot=this.b/Math.sqrt(ht*ht+this.one_minus_f_squared),P.phi=Math.atan(Math.sqrt(this.a*this.a-ot*ot)/(this.one_minus_f*ot)),X&&(P.phi=-P.phi)}return P.lam+=this.long0,s.x=P.lam,s.y=P.phi,s},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Wa=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ts=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],qu=.8487,Wu=1.3523,zu=It/5,Ey=1/zu,Zn=18,eo=function(s,l){return s[0]+l*(s[1]+l*(s[2]+l*s[3]))},vy=function(s,l){return s[1]+l*(2*s[2]+3*l*s[3])},My={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(s){var l=$(s.x-this.long0),u=Math.abs(s.y),g=Math.floor(u*zu);g<0?g=0:g>=Zn&&(g=Zn-1),u=It*(u-Ey*g);var f={x:eo(Wa[g],u)*l,y:eo(ts[g],u)};return s.y<0&&(f.y=-f.y),f.x=f.x*this.a*qu+this.x0,f.y=f.y*this.a*Wu+this.y0,f},inverse:function(s){var l={x:(s.x-this.x0)/(this.a*qu),y:Math.abs(s.y-this.y0)/(this.a*Wu)};if(l.y>=1)l.x/=Wa[Zn][0],l.y=s.y<0?-G:G;else{var u=Math.floor(l.y*Zn);for(u<0?u=0:u>=Zn&&(u=Zn-1);;)if(ts[u][0]>l.y)--u;else{if(!(ts[u+1][0]<=l.y))break;++u}var g=ts[u],f=5*(l.y-g[0])/(ts[u+1][0]-g[0]);f=Xr(function(_){return(eo(g,_)-l.y)/vy(g,_)},f,z,100),l.x/=eo(Wa[u],f),l.y=(5*u+f)*zt,s.y<0&&(l.y=-l.y)}return l.x=$(l.x+this.long0),l},names:["Robinson","robin"]},Sy={init:function(){this.name="geocent"},forward:function(s){return H(s,this.es,this.a)},inverse:function(s){return J(s,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},re={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},es={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}},Cy={init:function(){if(Object.keys(es).forEach(function(u){if(this[u]===void 0)this[u]=es[u].def;else{if(es[u].num&&isNaN(this[u]))throw new Error("Invalid parameter value, must be numeric "+u+" = "+this[u]);es[u].num&&(this[u]=parseFloat(this[u]))}es[u].degrees&&(this[u]=this[u]*zt)}.bind(this)),Math.abs(Math.abs(this.lat0)-G)<z?this.mode=this.lat0<0?re.S_POLE:re.N_POLE:Math.abs(this.lat0)<z?this.mode=re.EQUIT:(this.mode=re.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var s=this.tilt,l=this.azi;this.cg=Math.cos(l),this.sg=Math.sin(l),this.cw=Math.cos(s),this.sw=Math.sin(s)},forward:function(s){s.x-=this.long0;var l,u,g=Math.sin(s.y),f=Math.cos(s.y),_=Math.cos(s.x);switch(this.mode){case re.OBLIQ:u=this.sinph0*g+this.cosph0*f*_;break;case re.EQUIT:u=f*_;break;case re.S_POLE:u=-g;break;case re.N_POLE:u=g}switch(u=this.pn1/(this.p-u),l=u*f*Math.sin(s.x),this.mode){case re.OBLIQ:u*=this.cosph0*g-this.sinph0*f*_;break;case re.EQUIT:u*=g;break;case re.N_POLE:u*=-f*_;break;case re.S_POLE:u*=f*_}var x,y;return x=u*this.cg+l*this.sg,y=1/(x*this.sw*this.h1+this.cw),l=(l*this.cg-u*this.sg)*this.cw*y,u=x*y,s.x=l*this.a,s.y=u*this.a,s},inverse:function(s){s.x/=this.a,s.y/=this.a;var l,u,g,f={x:s.x,y:s.y};g=1/(this.pn1-s.y*this.sw),l=this.pn1*s.x*g,u=this.pn1*s.y*this.cw*g,s.x=l*this.cg+u*this.sg,s.y=u*this.cg-l*this.sg;var _=We(s.x,s.y);if(Math.abs(_)<z)f.x=0,f.y=s.y;else{var x,y;switch(y=1-_*_*this.pfact,y=(this.p-Math.sqrt(y))/(this.pn1/_+_/this.pn1),x=Math.sqrt(1-y*y),this.mode){case re.OBLIQ:f.y=Math.asin(x*this.sinph0+s.y*y*this.cosph0/_),s.y=(x-this.sinph0*Math.sin(f.y))*_,s.x*=y*this.cosph0;break;case re.EQUIT:f.y=Math.asin(s.y*y/_),s.y=x*_,s.x*=y;break;case re.N_POLE:f.y=Math.asin(x),s.y=-s.y;break;case re.S_POLE:f.y=-Math.asin(x)}f.x=Math.atan2(s.x,s.y)}return s.x=f.x+this.long0,s.y=f.y,s},names:["Tilted_Perspective","tpers"]},by={init:function(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var s=1-this.es,l=1/s;this.radius_p=Math.sqrt(s),this.radius_p2=s,this.radius_p_inv2=l,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(s){var l,u,g,f,_=s.x,x=s.y;if(_-=this.long0,this.shape==="ellipse"){x=Math.atan(this.radius_p2*Math.tan(x));var y=this.radius_p/We(this.radius_p*Math.cos(x),Math.sin(x));if(u=y*Math.cos(_)*Math.cos(x),g=y*Math.sin(_)*Math.cos(x),f=y*Math.sin(x),(this.radius_g-u)*u-g*g-f*f*this.radius_p_inv2<0)return s.x=Number.NaN,s.y=Number.NaN,s;l=this.radius_g-u,this.flip_axis?(s.x=this.radius_g_1*Math.atan(g/We(f,l)),s.y=this.radius_g_1*Math.atan(f/l)):(s.x=this.radius_g_1*Math.atan(g/l),s.y=this.radius_g_1*Math.atan(f/We(g,l)))}else this.shape==="sphere"&&(l=Math.cos(x),u=Math.cos(_)*l,g=Math.sin(_)*l,f=Math.sin(x),l=this.radius_g-u,this.flip_axis?(s.x=this.radius_g_1*Math.atan(g/We(f,l)),s.y=this.radius_g_1*Math.atan(f/l)):(s.x=this.radius_g_1*Math.atan(g/l),s.y=this.radius_g_1*Math.atan(f/We(g,l))));return s.x=s.x*this.a,s.y=s.y*this.a,s},inverse:function(s){var l,u,g,f,_=-1,x=0,y=0;if(s.x=s.x/this.a,s.y=s.y/this.a,this.shape==="ellipse"){this.flip_axis?(y=Math.tan(s.y/this.radius_g_1),x=Math.tan(s.x/this.radius_g_1)*We(1,y)):(x=Math.tan(s.x/this.radius_g_1),y=Math.tan(s.y/this.radius_g_1)*We(1,x));var C=y/this.radius_p;if(l=x*x+C*C+_*_,u=2*this.radius_g*_,(g=u*u-4*l*this.C)<0)return s.x=Number.NaN,s.y=Number.NaN,s;f=(-u-Math.sqrt(g))/(2*l),_=this.radius_g+f*_,x*=f,y*=f,s.x=Math.atan2(x,_),s.y=Math.atan(y*Math.cos(s.x)/_),s.y=Math.atan(this.radius_p_inv2*Math.tan(s.y))}else if(this.shape==="sphere"){if(this.flip_axis?(y=Math.tan(s.y/this.radius_g_1),x=Math.tan(s.x/this.radius_g_1)*Math.sqrt(1+y*y)):(x=Math.tan(s.x/this.radius_g_1),y=Math.tan(s.y/this.radius_g_1)*Math.sqrt(1+x*x)),l=x*x+y*y+_*_,u=2*this.radius_g*_,(g=u*u-4*l*this.C)<0)return s.x=Number.NaN,s.y=Number.NaN,s;f=(-u-Math.sqrt(g))/(2*l),_=this.radius_g+f*_,x*=f,y*=f,s.x=Math.atan2(x,_),s.y=Math.atan(y*Math.cos(s.x)/_)}return s.x=s.x+this.long0,s},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};return Wt.defaultDatum="WGS84",Wt.Proj=et,Wt.WGS84=new Wt.Proj("WGS84"),Wt.Point=Te,Wt.toPoint=Lu,Wt.defs=c,Wt.nadgrid=function(s,l){var u=new DataView(l),g=B(u),f=q(u,g);f.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var _={header:f,subgrids:Z(u,f,g)};return Iu[s]=_,_},Wt.transform=ue,Wt.mgrs=D0,Wt.version="2.8.0",function(s){s.Proj.projections.add($s),s.Proj.projections.add(Qs),s.Proj.projections.add(q0),s.Proj.projections.add(z0),s.Proj.projections.add(X0),s.Proj.projections.add(Y0),s.Proj.projections.add(V0),s.Proj.projections.add(K0),s.Proj.projections.add(H0),s.Proj.projections.add(Z0),s.Proj.projections.add(ny),s.Proj.projections.add(ry),s.Proj.projections.add(sy),s.Proj.projections.add(ay),s.Proj.projections.add(hy),s.Proj.projections.add(ly),s.Proj.projections.add(cy),s.Proj.projections.add(uy),s.Proj.projections.add(fy),s.Proj.projections.add(my),s.Proj.projections.add(gy),s.Proj.projections.add(py),s.Proj.projections.add(_y),s.Proj.projections.add(yy),s.Proj.projections.add(xy),s.Proj.projections.add(My),s.Proj.projections.add(Sy),s.Proj.projections.add(Cy),s.Proj.projections.add(by)}(Wt),Wt})});var kl=Y((Ol,Fl)=>{(function(n,t){typeof Ol=="object"&&typeof Fl<"u"?Fl.exports=t():typeof define=="function"&&define.amd?define(t):(n=n||self).RBush=t()})(Ol,function(){"use strict";function n(v,S,R,I,A){(function L(F,D,B,q,W){for(;q>B;){if(q-B>600){var Z=q-B+1,nt=D-B+1,st=Math.log(Z),bt=.5*Math.exp(2*st/3),et=.5*Math.sqrt(st*bt*(Z-bt)/Z)*(nt-Z/2<0?-1:1),V=Math.max(B,Math.floor(D-nt*bt/Z+et)),H=Math.min(q,Math.floor(D+(Z-nt)*bt/Z+et));L(F,D,V,H,W)}var J=F[D],_t=B,ft=q;for(t(F,B,D),W(F[q],J)>0&&t(F,B,q);_t<ft;){for(t(F,_t,ft),_t++,ft--;W(F[_t],J)<0;)_t++;for(;W(F[ft],J)>0;)ft--}W(F[B],J)===0?t(F,B,ft):t(F,++ft,q),ft<=D&&(B=ft+1),D<=ft&&(q=ft-1)}})(v,S,R||0,I||v.length-1,A||e)}function t(v,S,R){var I=v[S];v[S]=v[R],v[R]=I}function e(v,S){return v<S?-1:v>S?1:0}var i=function(v){v===void 0&&(v=9),this._maxEntries=Math.max(4,v),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(v,S,R){if(!R)return S.indexOf(v);for(var I=0;I<S.length;I++)if(R(v,S[I]))return I;return-1}function o(v,S){a(v,0,v.children.length,S,v)}function a(v,S,R,I,A){A||(A=b(null)),A.minX=1/0,A.minY=1/0,A.maxX=-1/0,A.maxY=-1/0;for(var L=S;L<R;L++){var F=v.children[L];h(A,v.leaf?I(F):F)}return A}function h(v,S){return v.minX=Math.min(v.minX,S.minX),v.minY=Math.min(v.minY,S.minY),v.maxX=Math.max(v.maxX,S.maxX),v.maxY=Math.max(v.maxY,S.maxY),v}function c(v,S){return v.minX-S.minX}function d(v,S){return v.minY-S.minY}function m(v){return(v.maxX-v.minX)*(v.maxY-v.minY)}function p(v){return v.maxX-v.minX+(v.maxY-v.minY)}function E(v,S){return v.minX<=S.minX&&v.minY<=S.minY&&S.maxX<=v.maxX&&S.maxY<=v.maxY}function M(v,S){return S.minX<=v.maxX&&S.minY<=v.maxY&&S.maxX>=v.minX&&S.maxY>=v.minY}function b(v){return{children:v,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function w(v,S,R,I,A){for(var L=[S,R];L.length;)if(!((R=L.pop())-(S=L.pop())<=I)){var F=S+Math.ceil((R-S)/I/2)*I;n(v,F,S,R,A),L.push(S,F,F,R)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(v){var S=this.data,R=[];if(!M(v,S))return R;for(var I=this.toBBox,A=[];S;){for(var L=0;L<S.children.length;L++){var F=S.children[L],D=S.leaf?I(F):F;M(v,D)&&(S.leaf?R.push(F):E(v,D)?this._all(F,R):A.push(F))}S=A.pop()}return R},i.prototype.collides=function(v){var S=this.data;if(!M(v,S))return!1;for(var R=[];S;){for(var I=0;I<S.children.length;I++){var A=S.children[I],L=S.leaf?this.toBBox(A):A;if(M(v,L)){if(S.leaf||E(v,L))return!0;R.push(A)}}S=R.pop()}return!1},i.prototype.load=function(v){if(!v||!v.length)return this;if(v.length<this._minEntries){for(var S=0;S<v.length;S++)this.insert(v[S]);return this}var R=this._build(v.slice(),0,v.length-1,0);if(this.data.children.length)if(this.data.height===R.height)this._splitRoot(this.data,R);else{if(this.data.height<R.height){var I=this.data;this.data=R,R=I}this._insert(R,this.data.height-R.height-1,!0)}else this.data=R;return this},i.prototype.insert=function(v){return v&&this._insert(v,this.data.height-1),this},i.prototype.clear=function(){return this.data=b([]),this},i.prototype.remove=function(v,S){if(!v)return this;for(var R,I,A,L=this.data,F=this.toBBox(v),D=[],B=[];L||D.length;){if(L||(L=D.pop(),I=D[D.length-1],R=B.pop(),A=!0),L.leaf){var q=r(v,L.children,S);if(q!==-1)return L.children.splice(q,1),D.push(L),this._condense(D),this}A||L.leaf||!E(L,F)?I?(R++,L=I.children[R],A=!1):L=null:(D.push(L),B.push(R),R=0,I=L,L=L.children[0])}return this},i.prototype.toBBox=function(v){return v},i.prototype.compareMinX=function(v,S){return v.minX-S.minX},i.prototype.compareMinY=function(v,S){return v.minY-S.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(v){return this.data=v,this},i.prototype._all=function(v,S){for(var R=[];v;)v.leaf?S.push.apply(S,v.children):R.push.apply(R,v.children),v=R.pop();return S},i.prototype._build=function(v,S,R,I){var A,L=R-S+1,F=this._maxEntries;if(L<=F)return o(A=b(v.slice(S,R+1)),this.toBBox),A;I||(I=Math.ceil(Math.log(L)/Math.log(F)),F=Math.ceil(L/Math.pow(F,I-1))),(A=b([])).leaf=!1,A.height=I;var D=Math.ceil(L/F),B=D*Math.ceil(Math.sqrt(F));w(v,S,R,B,this.compareMinX);for(var q=S;q<=R;q+=B){var W=Math.min(q+B-1,R);w(v,q,W,D,this.compareMinY);for(var Z=q;Z<=W;Z+=D){var nt=Math.min(Z+D-1,W);A.children.push(this._build(v,Z,nt,I-1))}}return o(A,this.toBBox),A},i.prototype._chooseSubtree=function(v,S,R,I){for(;I.push(S),!S.leaf&&I.length-1!==R;){for(var A=1/0,L=1/0,F=void 0,D=0;D<S.children.length;D++){var B=S.children[D],q=m(B),W=(Z=v,nt=B,(Math.max(nt.maxX,Z.maxX)-Math.min(nt.minX,Z.minX))*(Math.max(nt.maxY,Z.maxY)-Math.min(nt.minY,Z.minY))-q);W<L?(L=W,A=q<A?q:A,F=B):W===L&&q<A&&(A=q,F=B)}S=F||S.children[0]}var Z,nt;return S},i.prototype._insert=function(v,S,R){var I=R?v:this.toBBox(v),A=[],L=this._chooseSubtree(I,this.data,S,A);for(L.children.push(v),h(L,I);S>=0&&A[S].children.length>this._maxEntries;)this._split(A,S),S--;this._adjustParentBBoxes(I,A,S)},i.prototype._split=function(v,S){var R=v[S],I=R.children.length,A=this._minEntries;this._chooseSplitAxis(R,A,I);var L=this._chooseSplitIndex(R,A,I),F=b(R.children.splice(L,R.children.length-L));F.height=R.height,F.leaf=R.leaf,o(R,this.toBBox),o(F,this.toBBox),S?v[S-1].children.push(F):this._splitRoot(R,F)},i.prototype._splitRoot=function(v,S){this.data=b([v,S]),this.data.height=v.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(v,S,R){for(var I,A,L,F,D,B,q,W=1/0,Z=1/0,nt=S;nt<=R-S;nt++){var st=a(v,0,nt,this.toBBox),bt=a(v,nt,R,this.toBBox),et=(A=st,L=bt,F=void 0,D=void 0,B=void 0,q=void 0,F=Math.max(A.minX,L.minX),D=Math.max(A.minY,L.minY),B=Math.min(A.maxX,L.maxX),q=Math.min(A.maxY,L.maxY),Math.max(0,B-F)*Math.max(0,q-D)),V=m(st)+m(bt);et<W?(W=et,I=nt,Z=V<Z?V:Z):et===W&&V<Z&&(Z=V,I=nt)}return I||R-S},i.prototype._chooseSplitAxis=function(v,S,R){var I=v.leaf?this.compareMinX:c,A=v.leaf?this.compareMinY:d;this._allDistMargin(v,S,R,I)<this._allDistMargin(v,S,R,A)&&v.children.sort(I)},i.prototype._allDistMargin=function(v,S,R,I){v.children.sort(I);for(var A=this.toBBox,L=a(v,0,S,A),F=a(v,R-S,R,A),D=p(L)+p(F),B=S;B<R-S;B++){var q=v.children[B];h(L,v.leaf?A(q):q),D+=p(L)}for(var W=R-S-1;W>=S;W--){var Z=v.children[W];h(F,v.leaf?A(Z):Z),D+=p(F)}return D},i.prototype._adjustParentBBoxes=function(v,S,R){for(var I=R;I>=0;I--)h(S[I],v)},i.prototype._condense=function(v){for(var S=v.length-1,R=void 0;S>=0;S--)v[S].children.length===0?S>0?(R=v[S-1].children).splice(R.indexOf(v[S]),1):this.clear():o(v[S],this.toBBox)},i})});var uc=Y((AO,Fm)=>{"use strict";Fm.exports=function(t,e){return function(){for(var r=new Array(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];return t.apply(e,r)}}});var Ce=Y((LO,Nm)=>{"use strict";var Wx=uc(),Gn=Object.prototype.toString;function mc(n){return Gn.call(n)==="[object Array]"}function dc(n){return typeof n>"u"}function zx(n){return n!==null&&!dc(n)&&n.constructor!==null&&!dc(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function Xx(n){return Gn.call(n)==="[object ArrayBuffer]"}function Yx(n){return typeof FormData<"u"&&n instanceof FormData}function Vx(n){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&n.buffer instanceof ArrayBuffer,t}function Kx(n){return typeof n=="string"}function Hx(n){return typeof n=="number"}function km(n){return n!==null&&typeof n=="object"}function sa(n){if(Gn.call(n)!=="[object Object]")return!1;var t=Object.getPrototypeOf(n);return t===null||t===Object.prototype}function Zx(n){return Gn.call(n)==="[object Date]"}function Jx(n){return Gn.call(n)==="[object File]"}function $x(n){return Gn.call(n)==="[object Blob]"}function Dm(n){return Gn.call(n)==="[object Function]"}function Qx(n){return km(n)&&Dm(n.pipe)}function t1(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}function e1(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function i1(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function gc(n,t){if(!(n===null||typeof n>"u"))if(typeof n!="object"&&(n=[n]),mc(n))for(var e=0,i=n.length;e<i;e++)t.call(null,n[e],e,n);else for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.call(null,n[r],r,n)}function fc(){var n={};function t(r,o){sa(n[o])&&sa(r)?n[o]=fc(n[o],r):sa(r)?n[o]=fc({},r):mc(r)?n[o]=r.slice():n[o]=r}for(var e=0,i=arguments.length;e<i;e++)gc(arguments[e],t);return n}function n1(n,t,e){return gc(t,function(r,o){e&&typeof r=="function"?n[o]=Wx(r,e):n[o]=r}),n}function r1(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n}Nm.exports={isArray:mc,isArrayBuffer:Xx,isBuffer:zx,isFormData:Yx,isArrayBufferView:Vx,isString:Kx,isNumber:Hx,isObject:km,isPlainObject:sa,isUndefined:dc,isDate:Zx,isFile:Jx,isBlob:$x,isFunction:Dm,isStream:Qx,isURLSearchParams:t1,isStandardBrowserEnv:i1,forEach:gc,merge:fc,extend:n1,trim:e1,stripBOM:r1}});var pc=Y((PO,Bm)=>{"use strict";var Pr=Ce();function Gm(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Bm.exports=function(t,e,i){if(!e)return t;var r;if(i)r=i(e);else if(Pr.isURLSearchParams(e))r=e.toString();else{var o=[];Pr.forEach(e,function(c,d){c===null||typeof c>"u"||(Pr.isArray(c)?d=d+"[]":c=[c],Pr.forEach(c,function(p){Pr.isDate(p)?p=p.toISOString():Pr.isObject(p)&&(p=JSON.stringify(p)),o.push(Gm(d)+"="+Gm(p))}))}),r=o.join("&")}if(r){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}});var jm=Y((OO,Um)=>{"use strict";var s1=Ce();function oa(){this.handlers=[]}oa.prototype.use=function(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};oa.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};oa.prototype.forEach=function(t){s1.forEach(this.handlers,function(i){i!==null&&t(i)})};Um.exports=oa});var Wm=Y((FO,qm)=>{"use strict";var o1=Ce();qm.exports=function(t,e){o1.forEach(t,function(r,o){o!==e&&o.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[o])})}});var _c=Y((kO,zm)=>{"use strict";zm.exports=function(t,e,i,r,o){return t.config=e,i&&(t.code=i),t.request=r,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}});var yc=Y((DO,Xm)=>{"use strict";var a1=_c();Xm.exports=function(t,e,i,r,o){var a=new Error(t);return a1(a,e,i,r,o)}});var Vm=Y((NO,Ym)=>{"use strict";var h1=yc();Ym.exports=function(t,e,i){var r=i.config.validateStatus;!i.status||!r||r(i.status)?t(i):e(h1("Request failed with status code "+i.status,i.config,null,i.request,i))}});var Hm=Y((GO,Km)=>{"use strict";var aa=Ce();Km.exports=aa.isStandardBrowserEnv()?function(){return{write:function(e,i,r,o,a,h){var c=[];c.push(e+"="+encodeURIComponent(i)),aa.isNumber(r)&&c.push("expires="+new Date(r).toGMTString()),aa.isString(o)&&c.push("path="+o),aa.isString(a)&&c.push("domain="+a),h===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){var i=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Jm=Y((BO,Zm)=>{"use strict";Zm.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}});var Qm=Y((UO,$m)=>{"use strict";$m.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}});var eg=Y((jO,tg)=>{"use strict";var l1=Jm(),c1=Qm();tg.exports=function(t,e){return t&&!l1(e)?c1(t,e):e}});var ng=Y((qO,ig)=>{"use strict";var xc=Ce(),u1=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];ig.exports=function(t){var e={},i,r,o;return t&&xc.forEach(t.split(`
`),function(h){if(o=h.indexOf(":"),i=xc.trim(h.substr(0,o)).toLowerCase(),r=xc.trim(h.substr(o+1)),i){if(e[i]&&u1.indexOf(i)>=0)return;i==="set-cookie"?e[i]=(e[i]?e[i]:[]).concat([r]):e[i]=e[i]?e[i]+", "+r:r}}),e}});var og=Y((WO,sg)=>{"use strict";var rg=Ce();sg.exports=rg.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a"),i;function r(o){var a=o;return t&&(e.setAttribute("href",a),a=e.href),e.setAttribute("href",a),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return i=r(window.location.href),function(a){var h=rg.isString(a)?r(a):a;return h.protocol===i.protocol&&h.host===i.host}}():function(){return function(){return!0}}()});var vc=Y((zO,ag)=>{"use strict";var ha=Ce(),d1=Vm(),f1=Hm(),m1=pc(),g1=eg(),p1=ng(),_1=og(),Ec=yc();ag.exports=function(t){return new Promise(function(i,r){var o=t.data,a=t.headers,h=t.responseType;ha.isFormData(o)&&delete a["Content-Type"];var c=new XMLHttpRequest;if(t.auth){var d=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";a.Authorization="Basic "+btoa(d+":"+m)}var p=g1(t.baseURL,t.url);c.open(t.method.toUpperCase(),m1(p,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function E(){if(!!c){var b="getAllResponseHeaders"in c?p1(c.getAllResponseHeaders()):null,w=!h||h==="text"||h==="json"?c.responseText:c.response,v={data:w,status:c.status,statusText:c.statusText,headers:b,config:t,request:c};d1(i,r,v),c=null}}if("onloadend"in c?c.onloadend=E:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(E)},c.onabort=function(){!c||(r(Ec("Request aborted",t,"ECONNABORTED",c)),c=null)},c.onerror=function(){r(Ec("Network Error",t,null,c)),c=null},c.ontimeout=function(){var w="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(w=t.timeoutErrorMessage),r(Ec(w,t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",c)),c=null},ha.isStandardBrowserEnv()){var M=(t.withCredentials||_1(p))&&t.xsrfCookieName?f1.read(t.xsrfCookieName):void 0;M&&(a[t.xsrfHeaderName]=M)}"setRequestHeader"in c&&ha.forEach(a,function(w,v){typeof o>"u"&&v.toLowerCase()==="content-type"?delete a[v]:c.setRequestHeader(v,w)}),ha.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),h&&h!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(w){!c||(c.abort(),r(w),c=null)}),o||(o=null),c.send(o)})}});var ca=Y((XO,cg)=>{"use strict";var ne=Ce(),hg=Wm(),y1=_c(),x1={"Content-Type":"application/x-www-form-urlencoded"};function lg(n,t){!ne.isUndefined(n)&&ne.isUndefined(n["Content-Type"])&&(n["Content-Type"]=t)}function E1(){var n;return typeof XMLHttpRequest<"u"?n=vc():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(n=vc()),n}function v1(n,t,e){if(ne.isString(n))try{return(t||JSON.parse)(n),ne.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(n)}var la={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:E1(),transformRequest:[function(t,e){return hg(e,"Accept"),hg(e,"Content-Type"),ne.isFormData(t)||ne.isArrayBuffer(t)||ne.isBuffer(t)||ne.isStream(t)||ne.isFile(t)||ne.isBlob(t)?t:ne.isArrayBufferView(t)?t.buffer:ne.isURLSearchParams(t)?(lg(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):ne.isObject(t)||e&&e["Content-Type"]==="application/json"?(lg(e,"application/json"),v1(t)):t}],transformResponse:[function(t){var e=this.transitional,i=e&&e.silentJSONParsing,r=e&&e.forcedJSONParsing,o=!i&&this.responseType==="json";if(o||r&&ne.isString(t)&&t.length)try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?y1(a,this,"E_JSON_PARSE"):a}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};la.headers={common:{Accept:"application/json, text/plain, */*"}};ne.forEach(["delete","get","head"],function(t){la.headers[t]={}});ne.forEach(["post","put","patch"],function(t){la.headers[t]=ne.merge(x1)});cg.exports=la});var dg=Y((YO,ug)=>{"use strict";var M1=Ce(),S1=ca();ug.exports=function(t,e,i){var r=this||S1;return M1.forEach(i,function(a){t=a.call(r,t,e)}),t}});var Mc=Y((VO,fg)=>{"use strict";fg.exports=function(t){return!!(t&&t.__CANCEL__)}});var pg=Y((KO,gg)=>{"use strict";var mg=Ce(),Sc=dg(),C1=Mc(),b1=ca();function Cc(n){n.cancelToken&&n.cancelToken.throwIfRequested()}gg.exports=function(t){Cc(t),t.headers=t.headers||{},t.data=Sc.call(t,t.data,t.headers,t.transformRequest),t.headers=mg.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),mg.forEach(["delete","get","head","post","put","patch","common"],function(r){delete t.headers[r]});var e=t.adapter||b1.adapter;return e(t).then(function(r){return Cc(t),r.data=Sc.call(t,r.data,r.headers,t.transformResponse),r},function(r){return C1(r)||(Cc(t),r&&r.response&&(r.response.data=Sc.call(t,r.response.data,r.response.headers,t.transformResponse))),Promise.reject(r)})}});var bc=Y((HO,_g)=>{"use strict";var le=Ce();_g.exports=function(t,e){e=e||{};var i={},r=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],h=["validateStatus"];function c(E,M){return le.isPlainObject(E)&&le.isPlainObject(M)?le.merge(E,M):le.isPlainObject(M)?le.merge({},M):le.isArray(M)?M.slice():M}function d(E){le.isUndefined(e[E])?le.isUndefined(t[E])||(i[E]=c(void 0,t[E])):i[E]=c(t[E],e[E])}le.forEach(r,function(M){le.isUndefined(e[M])||(i[M]=c(void 0,e[M]))}),le.forEach(o,d),le.forEach(a,function(M){le.isUndefined(e[M])?le.isUndefined(t[M])||(i[M]=c(void 0,t[M])):i[M]=c(void 0,e[M])}),le.forEach(h,function(M){M in e?i[M]=c(t[M],e[M]):M in t&&(i[M]=c(void 0,t[M]))});var m=r.concat(o).concat(a).concat(h),p=Object.keys(t).concat(Object.keys(e)).filter(function(M){return m.indexOf(M)===-1});return le.forEach(p,d),i}});var yg=Y((ZO,T1)=>{T1.exports={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}});var Sg=Y((JO,Mg)=>{"use strict";var Eg=yg(),Tc={};["object","boolean","number","function","string","symbol"].forEach(function(n,t){Tc[n]=function(i){return typeof i===n||"a"+(t<1?"n ":" ")+n}});var xg={},R1=Eg.version.split(".");function vg(n,t){for(var e=t?t.split("."):R1,i=n.split("."),r=0;r<3;r++){if(e[r]>i[r])return!0;if(e[r]<i[r])return!1}return!1}Tc.transitional=function(t,e,i){var r=e&&vg(e);function o(a,h){return"[Axios v"+Eg.version+"] Transitional option '"+a+"'"+h+(i?". "+i:"")}return function(a,h,c){if(t===!1)throw new Error(o(h," has been removed in "+e));return r&&!xg[h]&&(xg[h]=!0,console.warn(o(h," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(a,h,c):!0}};function w1(n,t,e){if(typeof n!="object")throw new TypeError("options must be an object");for(var i=Object.keys(n),r=i.length;r-- >0;){var o=i[r],a=t[o];if(a){var h=n[o],c=h===void 0||a(h,o,n);if(c!==!0)throw new TypeError("option "+o+" must be "+c);continue}if(e!==!0)throw Error("Unknown option "+o)}}Mg.exports={isOlderVersion:vg,assertOptions:w1,validators:Tc}});var Ig=Y(($O,wg)=>{"use strict";var Tg=Ce(),I1=pc(),Cg=jm(),bg=pg(),ua=bc(),Rg=Sg(),Or=Rg.validators;function Ds(n){this.defaults=n,this.interceptors={request:new Cg,response:new Cg}}Ds.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=ua(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;e!==void 0&&Rg.assertOptions(e,{silentJSONParsing:Or.transitional(Or.boolean,"1.0.0"),forcedJSONParsing:Or.transitional(Or.boolean,"1.0.0"),clarifyTimeoutError:Or.transitional(Or.boolean,"1.0.0")},!1);var i=[],r=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(t)===!1||(r=r&&E.synchronous,i.unshift(E.fulfilled,E.rejected))});var o=[];this.interceptors.response.forEach(function(E){o.push(E.fulfilled,E.rejected)});var a;if(!r){var h=[bg,void 0];for(Array.prototype.unshift.apply(h,i),h=h.concat(o),a=Promise.resolve(t);h.length;)a=a.then(h.shift(),h.shift());return a}for(var c=t;i.length;){var d=i.shift(),m=i.shift();try{c=d(c)}catch(p){m(p);break}}try{a=bg(c)}catch(p){return Promise.reject(p)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};Ds.prototype.getUri=function(t){return t=ua(this.defaults,t),I1(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};Tg.forEach(["delete","get","head","options"],function(t){Ds.prototype[t]=function(e,i){return this.request(ua(i||{},{method:t,url:e,data:(i||{}).data}))}});Tg.forEach(["post","put","patch"],function(t){Ds.prototype[t]=function(e,i,r){return this.request(ua(r||{},{method:t,url:e,data:i}))}});wg.exports=Ds});var wc=Y((QO,Ag)=>{"use strict";function Rc(n){this.message=n}Rc.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Rc.prototype.__CANCEL__=!0;Ag.exports=Rc});var Pg=Y((tF,Lg)=>{"use strict";var A1=wc();function da(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(r){t=r});var e=this;n(function(r){e.reason||(e.reason=new A1(r),t(e.reason))})}da.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};da.source=function(){var t,e=new da(function(r){t=r});return{token:e,cancel:t}};Lg.exports=da});var Fg=Y((eF,Og)=>{"use strict";Og.exports=function(t){return function(i){return t.apply(null,i)}}});var Dg=Y((iF,kg)=>{"use strict";kg.exports=function(t){return typeof t=="object"&&t.isAxiosError===!0}});var Bg=Y((nF,Ic)=>{"use strict";var Ng=Ce(),L1=uc(),fa=Ig(),P1=bc(),O1=ca();function Gg(n){var t=new fa(n),e=L1(fa.prototype.request,t);return Ng.extend(e,fa.prototype,t),Ng.extend(e,t),e}var $e=Gg(O1);$e.Axios=fa;$e.create=function(t){return Gg(P1($e.defaults,t))};$e.Cancel=wc();$e.CancelToken=Pg();$e.isCancel=Mc();$e.all=function(t){return Promise.all(t)};$e.spread=Fg();$e.isAxiosError=Dg();Ic.exports=$e;Ic.exports.default=$e});var jg=Y((rF,Ug)=>{Ug.exports=Bg()});var Pc=Y((pF,Kg)=>{"use strict";var Vg=Object.prototype.toString;Kg.exports=function(t){var e=Vg.call(t),i=e==="[object Arguments]";return i||(i=e!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Vg.call(t.callee)==="[object Function]"),i}});var np=Y((_F,ip)=>{"use strict";var ep;Object.keys||(Gs=Object.prototype.hasOwnProperty,Oc=Object.prototype.toString,Hg=Pc(),Fc=Object.prototype.propertyIsEnumerable,Zg=!Fc.call({toString:null},"toString"),Jg=Fc.call(function(){},"prototype"),Bs=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],pa=function(n){var t=n.constructor;return t&&t.prototype===n},$g={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Qg=function(){if(typeof window>"u")return!1;for(var n in window)try{if(!$g["$"+n]&&Gs.call(window,n)&&window[n]!==null&&typeof window[n]=="object")try{pa(window[n])}catch{return!0}}catch{return!0}return!1}(),tp=function(n){if(typeof window>"u"||!Qg)return pa(n);try{return pa(n)}catch{return!1}},ep=function(t){var e=t!==null&&typeof t=="object",i=Oc.call(t)==="[object Function]",r=Hg(t),o=e&&Oc.call(t)==="[object String]",a=[];if(!e&&!i&&!r)throw new TypeError("Object.keys called on a non-object");var h=Jg&&i;if(o&&t.length>0&&!Gs.call(t,0))for(var c=0;c<t.length;++c)a.push(String(c));if(r&&t.length>0)for(var d=0;d<t.length;++d)a.push(String(d));else for(var m in t)!(h&&m==="prototype")&&Gs.call(t,m)&&a.push(String(m));if(Zg)for(var p=tp(t),E=0;E<Bs.length;++E)!(p&&Bs[E]==="constructor")&&Gs.call(t,Bs[E])&&a.push(Bs[E]);return a});var Gs,Oc,Hg,Fc,Zg,Jg,Bs,pa,$g,Qg,tp;ip.exports=ep});var ap=Y((yF,op)=>{"use strict";var j1=Array.prototype.slice,q1=Pc(),rp=Object.keys,_a=rp?function(t){return rp(t)}:np(),sp=Object.keys;_a.shim=function(){if(Object.keys){var t=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);t||(Object.keys=function(i){return q1(i)?sp(j1.call(i)):sp(i)})}else Object.keys=_a;return Object.keys||_a};op.exports=_a});var kc=Y((xF,hp)=>{"use strict";hp.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),i=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;t[e]=r;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,e);if(a.value!==r||a.enumerable!==!0)return!1}return!0}});var Dc=Y((EF,cp)=>{"use strict";var lp=typeof Symbol<"u"&&Symbol,W1=kc();cp.exports=function(){return typeof lp!="function"||typeof Symbol!="function"||typeof lp("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:W1()}});var dp=Y((vF,up)=>{"use strict";var z1="Function.prototype.bind called on incompatible ",Nc=Array.prototype.slice,X1=Object.prototype.toString,Y1="[object Function]";up.exports=function(t){var e=this;if(typeof e!="function"||X1.call(e)!==Y1)throw new TypeError(z1+e);for(var i=Nc.call(arguments,1),r,o=function(){if(this instanceof r){var m=e.apply(this,i.concat(Nc.call(arguments)));return Object(m)===m?m:this}else return e.apply(t,i.concat(Nc.call(arguments)))},a=Math.max(0,e.length-i.length),h=[],c=0;c<a;c++)h.push("$"+c);if(r=Function("binder","return function ("+h.join(",")+"){ return binder.apply(this,arguments); }")(o),e.prototype){var d=function(){};d.prototype=e.prototype,r.prototype=new d,d.prototype=null}return r}});var ya=Y((MF,fp)=>{"use strict";var V1=dp();fp.exports=Function.prototype.bind||V1});var Gc=Y((SF,mp)=>{"use strict";var K1=ya();mp.exports=K1.call(Function.call,Object.prototype.hasOwnProperty)});var Qe=Y((CF,yp)=>{"use strict";var yt,Br=SyntaxError,_p=Function,Nr=TypeError,Bc=function(n){try{return _p('"use strict"; return ('+n+").constructor;")()}catch{}},Bn=Object.getOwnPropertyDescriptor;if(Bn)try{Bn({},"")}catch{Bn=null}var Uc=function(){throw new Nr},H1=Bn?function(){try{return arguments.callee,Uc}catch{try{return Bn(arguments,"callee").get}catch{return Uc}}}():Uc,kr=Dc()(),fn=Object.getPrototypeOf||function(n){return n.__proto__},Dr={},Z1=typeof Uint8Array>"u"?yt:fn(Uint8Array),Gr={"%AggregateError%":typeof AggregateError>"u"?yt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?yt:ArrayBuffer,"%ArrayIteratorPrototype%":kr?fn([][Symbol.iterator]()):yt,"%AsyncFromSyncIteratorPrototype%":yt,"%AsyncFunction%":Dr,"%AsyncGenerator%":Dr,"%AsyncGeneratorFunction%":Dr,"%AsyncIteratorPrototype%":Dr,"%Atomics%":typeof Atomics>"u"?yt:Atomics,"%BigInt%":typeof BigInt>"u"?yt:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?yt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?yt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?yt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?yt:FinalizationRegistry,"%Function%":_p,"%GeneratorFunction%":Dr,"%Int8Array%":typeof Int8Array>"u"?yt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?yt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?yt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":kr?fn(fn([][Symbol.iterator]())):yt,"%JSON%":typeof JSON=="object"?JSON:yt,"%Map%":typeof Map>"u"?yt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!kr?yt:fn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?yt:Promise,"%Proxy%":typeof Proxy>"u"?yt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?yt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?yt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!kr?yt:fn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?yt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":kr?fn(""[Symbol.iterator]()):yt,"%Symbol%":kr?Symbol:yt,"%SyntaxError%":Br,"%ThrowTypeError%":H1,"%TypedArray%":Z1,"%TypeError%":Nr,"%Uint8Array%":typeof Uint8Array>"u"?yt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?yt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?yt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?yt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?yt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?yt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?yt:WeakSet},J1=function n(t){var e;if(t==="%AsyncFunction%")e=Bc("async function () {}");else if(t==="%GeneratorFunction%")e=Bc("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=Bc("async function* () {}");else if(t==="%AsyncGenerator%"){var i=n("%AsyncGeneratorFunction%");i&&(e=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var r=n("%AsyncGenerator%");r&&(e=fn(r.prototype))}return Gr[t]=e,e},gp={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Us=ya(),xa=Gc(),$1=Us.call(Function.call,Array.prototype.concat),Q1=Us.call(Function.apply,Array.prototype.splice),pp=Us.call(Function.call,String.prototype.replace),Ea=Us.call(Function.call,String.prototype.slice),tE=Us.call(Function.call,RegExp.prototype.exec),eE=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,iE=/\\(\\)?/g,nE=function(t){var e=Ea(t,0,1),i=Ea(t,-1);if(e==="%"&&i!=="%")throw new Br("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&e!=="%")throw new Br("invalid intrinsic syntax, expected opening `%`");var r=[];return pp(t,eE,function(o,a,h,c){r[r.length]=h?pp(c,iE,"$1"):a||o}),r},rE=function(t,e){var i=t,r;if(xa(gp,i)&&(r=gp[i],i="%"+r[0]+"%"),xa(Gr,i)){var o=Gr[i];if(o===Dr&&(o=J1(i)),typeof o>"u"&&!e)throw new Nr("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:o}}throw new Br("intrinsic "+t+" does not exist!")};yp.exports=function(t,e){if(typeof t!="string"||t.length===0)throw new Nr("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new Nr('"allowMissing" argument must be a boolean');if(tE(/^%?[^%]*%?$/,t)===null)throw new Br("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=nE(t),r=i.length>0?i[0]:"",o=rE("%"+r+"%",e),a=o.name,h=o.value,c=!1,d=o.alias;d&&(r=d[0],Q1(i,$1([0,1],d)));for(var m=1,p=!0;m<i.length;m+=1){var E=i[m],M=Ea(E,0,1),b=Ea(E,-1);if((M==='"'||M==="'"||M==="`"||b==='"'||b==="'"||b==="`")&&M!==b)throw new Br("property names with quotes must have matching quotes");if((E==="constructor"||!p)&&(c=!0),r+="."+E,a="%"+r+"%",xa(Gr,a))h=Gr[a];else if(h!=null){if(!(E in h)){if(!e)throw new Nr("base intrinsic for "+t+" exists, but the property is not available.");return}if(Bn&&m+1>=i.length){var w=Bn(h,E);p=!!w,p&&"get"in w&&!("originalValue"in w.get)?h=w.get:h=h[E]}else p=xa(h,E),h=h[E];p&&!c&&(Gr[a]=h)}}return h}});var Ep=Y((bF,xp)=>{"use strict";var sE=Qe(),jc=sE("%Object.defineProperty%",!0),qc=function(){if(jc)try{return jc({},"a",{value:1}),!0}catch{return!1}return!1};qc.hasArrayLengthDefineBug=function(){if(!qc())return null;try{return jc([],"length",{value:1}).length!==1}catch{return!0}};xp.exports=qc});var Wc=Y((TF,Cp)=>{"use strict";var oE=ap(),aE=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",hE=Object.prototype.toString,lE=Array.prototype.concat,vp=Object.defineProperty,cE=function(n){return typeof n=="function"&&hE.call(n)==="[object Function]"},uE=Ep()(),Mp=vp&&uE,dE=function(n,t,e,i){t in n&&(!cE(i)||!i())||(Mp?vp(n,t,{configurable:!0,enumerable:!1,value:e,writable:!0}):n[t]=e)},Sp=function(n,t){var e=arguments.length>2?arguments[2]:{},i=oE(t);aE&&(i=lE.call(i,Object.getOwnPropertySymbols(t)));for(var r=0;r<i.length;r+=1)dE(n,i[r],t[i[r]],e[i[r]])};Sp.supportsDescriptors=!!Mp;Cp.exports=Sp});var Ap=Y((RF,va)=>{"use strict";var zc=ya(),Ur=Qe(),Rp=Ur("%Function.prototype.apply%"),wp=Ur("%Function.prototype.call%"),Ip=Ur("%Reflect.apply%",!0)||zc.call(wp,Rp),bp=Ur("%Object.getOwnPropertyDescriptor%",!0),Un=Ur("%Object.defineProperty%",!0),fE=Ur("%Math.max%");if(Un)try{Un({},"a",{value:1})}catch{Un=null}va.exports=function(t){var e=Ip(zc,wp,arguments);if(bp&&Un){var i=bp(e,"length");i.configurable&&Un(e,"length",{value:1+fE(0,t.length-(arguments.length-1))})}return e};var Tp=function(){return Ip(zc,Rp,arguments)};Un?Un(va.exports,"apply",{value:Tp}):va.exports.apply=Tp});var js=Y((wF,Op)=>{"use strict";var Lp=Qe(),Pp=Ap(),mE=Pp(Lp("String.prototype.indexOf"));Op.exports=function(t,e){var i=Lp(t,!!e);return typeof i=="function"&&mE(t,".prototype.")>-1?Pp(i):i}});var kp=Y((IF,Fp)=>{"use strict";var gE=Qe(),pE=gE("%TypeError%");Fp.exports=function(t,e){if(t==null)throw new pE(e||"Cannot call method on "+t);return t}});var Xc=Y((AF,Dp)=>{"use strict";Dp.exports=kp()});var Gp=Y((LF,Np)=>{"use strict";var _E=Qe(),yE=_E("%Object%"),xE=Xc();Np.exports=function(t){return xE(t),yE(t)}});var jp=Y((PF,Up)=>{"use strict";var Bp=Qe(),EE=Bp("%Math%"),vE=Bp("%Number%");Up.exports=vE.MAX_SAFE_INTEGER||EE.pow(2,53)-1});var Wp=Y((OF,qp)=>{"use strict";var ME=Qe(),SE=ME("%Math.abs%");qp.exports=function(t){return SE(t)}});var Xp=Y((FF,zp)=>{"use strict";var CE=Math.floor;zp.exports=function(t){return CE(t)}});var Vp=Y((kF,Yp)=>{"use strict";Yp.exports=function(t){return t===null||typeof t!="function"&&typeof t!="object"}});var Hp=Y((DF,Kp)=>{"use strict";Kp.exports=function(t){return t===null||typeof t!="function"&&typeof t!="object"}});var Zc=Y((NF,$p)=>{"use strict";var Jp=Function.prototype.toString,jr=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Vc,Ma;if(typeof jr=="function"&&typeof Object.defineProperty=="function")try{Vc=Object.defineProperty({},"length",{get:function(){throw Ma}}),Ma={},jr(function(){throw 42},null,Vc)}catch(n){n!==Ma&&(jr=null)}else jr=null;var bE=/^\s*class\b/,Kc=function(t){try{var e=Jp.call(t);return bE.test(e)}catch{return!1}},Yc=function(t){try{return Kc(t)?!1:(Jp.call(t),!0)}catch{return!1}},Sa=Object.prototype.toString,TE="[object Object]",RE="[object Function]",wE="[object GeneratorFunction]",IE="[object HTMLAllCollection]",AE="[object HTML document.all class]",LE="[object HTMLCollection]",PE=typeof Symbol=="function"&&!!Symbol.toStringTag,OE=!(0 in[,]),Hc=function(){return!1};typeof document=="object"&&(Zp=document.all,Sa.call(Zp)===Sa.call(document.all)&&(Hc=function(t){if((OE||!t)&&(typeof t>"u"||typeof t=="object"))try{var e=Sa.call(t);return(e===IE||e===AE||e===LE||e===TE)&&t("")==null}catch{}return!1}));var Zp;$p.exports=jr?function(t){if(Hc(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{jr(t,null,Vc)}catch(e){if(e!==Ma)return!1}return!Kc(t)&&Yc(t)}:function(t){if(Hc(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(PE)return Yc(t);if(Kc(t))return!1;var e=Sa.call(t);return e!==RE&&e!==wE&&!/^\[object HTML/.test(e)?!1:Yc(t)}});var Jc=Y((GF,Qp)=>{"use strict";var FE=kc();Qp.exports=function(){return FE()&&!!Symbol.toStringTag}});var e_=Y((BF,t_)=>{"use strict";var kE=Date.prototype.getDay,DE=function(t){try{return kE.call(t),!0}catch{return!1}},NE=Object.prototype.toString,GE="[object Date]",BE=Jc()();t_.exports=function(t){return typeof t!="object"||t===null?!1:BE?DE(t):NE.call(t)===GE}});var s_=Y((UF,$c)=>{"use strict";var UE=Object.prototype.toString,jE=Dc()();jE?(i_=Symbol.prototype.toString,n_=/^Symbol\(.*\)$/,r_=function(t){return typeof t.valueOf()!="symbol"?!1:n_.test(i_.call(t))},$c.exports=function(t){if(typeof t=="symbol")return!0;if(UE.call(t)!=="[object Symbol]")return!1;try{return r_(t)}catch{return!1}}):$c.exports=function(t){return!1};var i_,n_,r_});var l_=Y((jF,h_)=>{"use strict";var qE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",Qc=Hp(),a_=Zc(),WE=e_(),o_=s_(),zE=function(t,e){if(typeof t>"u"||t===null)throw new TypeError("Cannot call method on "+t);if(typeof e!="string"||e!=="number"&&e!=="string")throw new TypeError('hint must be "string" or "number"');var i=e==="string"?["toString","valueOf"]:["valueOf","toString"],r,o,a;for(a=0;a<i.length;++a)if(r=t[i[a]],a_(r)&&(o=r.call(t),Qc(o)))return o;throw new TypeError("No default value")},XE=function(t,e){var i=t[e];if(i!==null&&typeof i<"u"){if(!a_(i))throw new TypeError(i+" returned for property "+e+" of object "+t+" is not a function");return i}};h_.exports=function(t){if(Qc(t))return t;var e="default";arguments.length>1&&(arguments[1]===String?e="string":arguments[1]===Number&&(e="number"));var i;if(qE&&(Symbol.toPrimitive?i=XE(t,Symbol.toPrimitive):o_(t)&&(i=Symbol.prototype.valueOf)),typeof i<"u"){var r=i.call(t,e);if(Qc(r))return r;throw new TypeError("unable to convert exotic object to primitive")}return e==="default"&&(WE(t)||o_(t))&&(e="string"),zE(t,e==="default"?"number":e)}});var d_=Y((qF,u_)=>{"use strict";var c_=l_();u_.exports=function(t){return arguments.length>1?c_(t,arguments[1]):c_(t)}});var __=Y((WF,p_)=>{"use strict";var tu=js(),f_=Jc()(),m_,g_,eu,iu;f_&&(m_=tu("Object.prototype.hasOwnProperty"),g_=tu("RegExp.prototype.exec"),eu={},Ca=function(){throw eu},iu={toString:Ca,valueOf:Ca},typeof Symbol.toPrimitive=="symbol"&&(iu[Symbol.toPrimitive]=Ca));var Ca,YE=tu("Object.prototype.toString"),VE=Object.getOwnPropertyDescriptor,KE="[object RegExp]";p_.exports=f_?function(t){if(!t||typeof t!="object")return!1;var e=VE(t,"lastIndex"),i=e&&m_(e,"value");if(!i)return!1;try{g_(t,iu)}catch(r){return r===eu}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:YE(t)===KE}});var x_=Y((zF,y_)=>{"use strict";var HE=js(),ZE=Qe(),JE=__(),$E=HE("RegExp.prototype.exec"),QE=ZE("%TypeError%");y_.exports=function(t){if(!JE(t))throw new QE("`regex` must be a RegExp");return function(i){return $E(t,i)!==null}}});var v_=Y((XF,E_)=>{"use strict";E_.exports=function(t){if(t===null)return"Null";if(typeof t>"u")return"Undefined";if(typeof t=="function"||typeof t=="object")return"Object";if(typeof t=="number")return"Number";if(typeof t=="boolean")return"Boolean";if(typeof t=="string")return"String"}});var S_=Y((YF,M_)=>{"use strict";var tv=v_();M_.exports=function(t){return typeof t=="symbol"?"Symbol":typeof t=="bigint"?"BigInt":tv(t)}});var I_=Y((VF,w_)=>{"use strict";var ba=Qe(),nu=ba("%Number%"),ev=ba("%RegExp%"),iv=ba("%TypeError%"),C_=ba("%parseInt%"),R_=js(),Ta=x_(),b_=R_("String.prototype.slice"),nv=Ta(/^0b[01]+$/i),rv=Ta(/^0o[0-7]+$/i),sv=Ta(/^[-+]0x[0-9a-f]+$/i),ov=["\x85","\u200B","\uFFFE"].join(""),av=new ev("["+ov+"]","g"),hv=Ta(av),T_=[`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003`,"\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028","\u2029\uFEFF"].join(""),lv=new RegExp("(^["+T_+"]+)|(["+T_+"]+$)","g"),cv=R_("String.prototype.replace"),uv=function(n){return cv(n,lv,"")},dv=S_();w_.exports=function n(t){if(dv(t)!=="String")throw new iv("Conversion from 'BigInt' to 'number' is not allowed.");if(nv(t))return nu(C_(b_(t,2),2));if(rv(t))return nu(C_(b_(t,2),8));if(hv(t)||sv(t))return NaN;var e=uv(t);return e!==t?n(e):nu(t)}});var F_=Y((KF,O_)=>{"use strict";var P_=Qe(),A_=P_("%TypeError%"),L_=P_("%Number%"),fv=Vp(),mv=d_(),gv=I_();O_.exports=function(t){var e=fv(t)?t:mv(t,L_);if(typeof e=="symbol")throw new A_("Cannot convert a Symbol value to a number");if(typeof e=="bigint")throw new A_("Conversion from 'BigInt' to 'number' is not allowed.");return typeof e=="string"?gv(e):L_(e)}});var D_=Y((HF,k_)=>{"use strict";k_.exports=Number.isNaN||function(t){return t!==t}});var G_=Y((ZF,N_)=>{"use strict";var pv=Number.isNaN||function(n){return n!==n};N_.exports=Number.isFinite||function(n){return typeof n=="number"&&!pv(n)&&n!==1/0&&n!==-1/0}});var U_=Y((JF,B_)=>{"use strict";B_.exports=function(t){return t>=0?1:-1}});var q_=Y(($F,j_)=>{"use strict";var _v=Wp(),yv=Xp(),xv=F_(),Ev=D_(),vv=G_(),Mv=U_();j_.exports=function(t){var e=xv(t);if(Ev(e)||e===0)return 0;if(!vv(e))return e;var i=yv(_v(e));return i===0?0:Mv(e)*i}});var X_=Y((QF,z_)=>{"use strict";var W_=jp(),Sv=q_();z_.exports=function(t){var e=Sv(t);return e<=0?0:e>W_?W_:e}});var V_=Y((t3,Y_)=>{"use strict";Y_.exports=Zc()});var ru=Y((e3,K_)=>{"use strict";var Cv=Gp(),bv=X_(),Tv=V_();K_.exports=function(t){var e=Cv(this),i=bv(e.length);if(!Tv(t))throw new TypeError("Array#find: predicate must be a function");if(i!==0){var r;arguments.length>0&&(r=arguments[1]);for(var o=0,a;o<i;o++)if(a=e[o],t.apply(r,[a,o,e]))return a}}});var su=Y((i3,H_)=>{"use strict";H_.exports=function(){var t=Array.prototype.find&&[,1].find(function(){return!0})!==1;return t?Array.prototype.find:ru()}});var Q_=Y((n3,$_)=>{"use strict";var Rv=Gc(),J_=typeof Symbol=="function"&&typeof Symbol.unscopables=="symbol",wv=J_&&Array.prototype[Symbol.unscopables],Z_=TypeError;$_.exports=function(t){if(typeof t!="string"||!t)throw new Z_("method must be a non-empty string");if(!Rv(Array.prototype,t))throw new Z_("method must be on Array.prototype");J_&&(wv[t]=!0)}});var e0=Y((r3,t0)=>{"use strict";var Iv=Wc(),Av=Q_(),Lv=su();t0.exports=function(){var t=Lv();return Iv(Array.prototype,{find:t},{find:function(){return Array.prototype.find!==t}}),Av("find"),t}});var s0=Y((s3,r0)=>{"use strict";var Pv=Wc(),Ov=js(),Fv=Xc(),kv=ru(),i0=su(),Dv=e0(),Nv=Ov("Array.prototype.slice"),Gv=i0(),n0=function(t,e){Fv(t);var i=Nv(arguments,1);return Gv.apply(t,i)};Pv(n0,{getPolyfill:i0,implementation:kv,shim:Dv});r0.exports=n0});var nM={};Ly(nM,{Initialize:()=>Ys,Map:()=>jn});var za=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}};function Yu(n){n.stopPropagation()}var Qt=za;var ze={PROPERTYCHANGE:"propertychange"};var Xa=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}},$n=Xa;function ri(n,t){return n>t?1:n<t?-1:0}function Qn(n,t,e){let i=n.length;if(n[0]<=t)return 0;if(t<=n[i-1])return i-1;{let r;if(e>0){for(r=1;r<i;++r)if(n[r]<t)return r-1}else if(e<0){for(r=1;r<i;++r)if(n[r]<=t)return r}else for(r=1;r<i;++r){if(n[r]==t)return r;if(n[r]<t)return typeof e=="function"?e(t,n[r-1],n[r])>0?r-1:r:n[r-1]-t<t-n[r]?r-1:r}return i-1}}function Vu(n,t,e){for(;t<e;){let i=n[t];n[t]=n[e],n[e]=i,++t,--e}}function ro(n,t){let e=Array.isArray(t)?t:[t],i=e.length;for(let r=0;r<i;r++)n[n.length]=e[r]}function xe(n,t){let e=n.length;if(e!==t.length)return!1;for(let i=0;i<e;i++)if(n[i]!==t[i])return!1;return!0}function Ku(n,t,e){let i=t||ri;return n.every(function(r,o){if(o===0)return!0;let a=i(n[o-1],r);return!(a>0||e&&a===0)})}function Si(){return!0}function Ci(){return!1}function Re(){}function Hu(n){let t=!1,e,i,r;return function(){let o=Array.prototype.slice.call(arguments);return(!t||this!==r||!xe(o,i))&&(t=!0,r=this,i=o,e=n.apply(this,arguments)),e}}function si(n){for(let t in n)delete n[t]}function bi(n){let t;for(t in n)return!1;return!t}var Ya=class extends $n{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;let i=this.listeners_||(this.listeners_={}),r=i[t]||(i[t]=[]);r.includes(e)||r.push(e)}dispatchEvent(t){let e=typeof t=="string",i=e?t:t.type,r=this.listeners_&&this.listeners_[i];if(!r)return;let o=e?new Qt(t):t;o.target||(o.target=this.eventTarget_||this);let a=this.dispatching_||(this.dispatching_={}),h=this.pendingRemovals_||(this.pendingRemovals_={});i in a||(a[i]=0,h[i]=0),++a[i];let c;for(let d=0,m=r.length;d<m;++d)if("handleEvent"in r[d]?c=r[d].handleEvent(o):c=r[d].call(this,o),c===!1||o.propagationStopped){c=!1;break}if(--a[i]===0){let d=h[i];for(delete h[i];d--;)this.removeEventListener(i,Re);delete a[i]}return c}disposeInternal(){this.listeners_&&si(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){let i=this.listeners_&&this.listeners_[t];if(i){let r=i.indexOf(e);r!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[r]=Re,++this.pendingRemovals_[t]):(i.splice(r,1),i.length===0&&delete this.listeners_[t]))}}},$i=Ya;var K={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function rt(n,t,e,i,r){if(i&&i!==n&&(e=e.bind(i)),r){let a=e;e=function(){n.removeEventListener(t,e),a.apply(this,arguments)}}let o={target:n,type:t,listener:e};return n.addEventListener(t,e),o}function tr(n,t,e,i){return rt(n,t,e,i,!0)}function dt(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),si(n))}var er=class extends $i{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(K.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){let i=t.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=rt(this,t[o],e);return r}else return rt(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){let r=t.length;i=new Array(r);for(let o=0;o<r;++o)i[o]=tr(this,t[o],e)}else i=tr(this,t,e);return e.ol_key=i,i}unInternal(t,e){let i=e.ol_key;if(i)Oy(i);else if(Array.isArray(t))for(let r=0,o=t.length;r<o;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)}};er.prototype.on;er.prototype.once;er.prototype.un;function Oy(n){if(Array.isArray(n))for(let t=0,e=n.length;t<e;++t)dt(n[t]);else dt(n)}var so=er;function ct(){throw new Error("Unimplemented abstract method.")}var Fy=0;function lt(n){return n.ol_uid||(n.ol_uid=String(++Fy))}var oo=class extends Qt{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}},Va=class extends so{constructor(t){super(),this.on,this.once,this.un,lt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new oo(i,t,e)),i=ze.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new oo(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){let r=this.values_||(this.values_={});if(i)r[t]=e;else{let o=r[t];r[t]=e,o!==e&&this.notify(t,o)}}setProperties(t,e){for(let i in t)this.set(i,t[i],e)}applyProperties(t){!t.values_||Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){let i=this.values_[t];delete this.values_[t],bi(this.values_)&&(this.values_=null),e||this.notify(t,i)}}},Dt=Va;var ky={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"},Ka=class extends Error{constructor(t){let e=ky[t];super(e),this.code=t,this.name="AssertionError",this.message=e}},ao=Ka;var te={ADD:"add",REMOVE:"remove"};var Zu={LENGTH:"length"},ir=class extends Qt{constructor(t,e,i){super(t),this.element=e,this.index=i}},Ha=class extends Dt{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){let e=this.array_;for(let i=0,r=e.length;i<r;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Zu.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new ir(te.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);let e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){let e=this.array_;for(let i=0,r=e.length;i<r;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;let e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new ir(te.REMOVE,e,t)),e}setAt(t,e){let i=this.getLength();if(t>=i){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);let r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new ir(te.REMOVE,r,t)),this.dispatchEvent(new ir(te.ADD,e,t))}updateLength_(){this.set(Zu.LENGTH,this.array_.length)}assertUnique_(t,e){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===t&&i!==e)throw new ao(58)}},fe=Ha;var Qi=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Ju=Qi.includes("firefox"),Dy=Qi.includes("safari")&&!Qi.includes("chrom"),GM=Dy&&(Qi.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Qi)),$u=Qi.includes("webkit")&&!Qi.includes("edge"),Qu=Qi.includes("macintosh"),ho=typeof devicePixelRatio<"u"?devicePixelRatio:1,nr=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,td=typeof Image<"u"&&Image.prototype.decode,lo=function(){let n=!1;try{let t=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return n}();function tt(n,t){if(!n)throw new ao(t)}var zM=new Array(6);function se(){return[1,0,0,1,0,0]}function Ny(n,t,e,i,r,o,a){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n[4]=o,n[5]=a,n}function id(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function Ot(n,t){let e=t[0],i=t[1];return t[0]=n[0]*e+n[2]*i+n[4],t[1]=n[1]*e+n[3]*i+n[5],t}function nd(n,t,e){return Ny(n,t,0,0,e,0,0)}function me(n,t,e,i,r,o,a,h){let c=Math.sin(o),d=Math.cos(o);return n[0]=i*d,n[1]=r*c,n[2]=-i*c,n[3]=r*d,n[4]=a*i*d-h*i*c+t,n[5]=a*r*c+h*r*d+e,n}function rr(n,t){let e=Gy(t);tt(e!==0,32);let i=t[0],r=t[1],o=t[2],a=t[3],h=t[4],c=t[5];return n[0]=a/e,n[1]=-r/e,n[2]=-o/e,n[3]=i/e,n[4]=(o*c-a*h)/e,n[5]=-(i*c-r*h)/e,n}function Gy(n){return n[0]*n[3]-n[1]*n[2]}var ed;function co(n){let t="matrix("+n.join(", ")+")";if(nr)return t;let e=ed||(ed=document.createElement("div"));return e.style.transform=t,e.style.transform}var Yt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Za(n){let t=Ft();for(let e=0,i=n.length;e<i;++e)Mn(t,n[e]);return t}function By(n,t,e){let i=Math.min.apply(null,n),r=Math.min.apply(null,t),o=Math.max.apply(null,n),a=Math.max.apply(null,t);return Ee(i,r,o,a,e)}function Ti(n,t,e){return e?(e[0]=n[0]-t,e[1]=n[1]-t,e[2]=n[2]+t,e[3]=n[3]+t,e):[n[0]-t,n[1]-t,n[2]+t,n[3]+t]}function fo(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n.slice()}function mo(n,t,e){let i,r;return t<n[0]?i=n[0]-t:n[2]<t?i=t-n[2]:i=0,e<n[1]?r=n[1]-e:n[3]<e?r=e-n[3]:r=0,i*i+r*r}function tn(n,t){return Ja(n,t[0],t[1])}function Xe(n,t){return n[0]<=t[0]&&t[2]<=n[2]&&n[1]<=t[1]&&t[3]<=n[3]}function Ja(n,t,e){return n[0]<=t&&t<=n[2]&&n[1]<=e&&e<=n[3]}function uo(n,t){let e=n[0],i=n[1],r=n[2],o=n[3],a=t[0],h=t[1],c=Yt.UNKNOWN;return a<e?c=c|Yt.LEFT:a>r&&(c=c|Yt.RIGHT),h<i?c=c|Yt.BELOW:h>o&&(c=c|Yt.ABOVE),c===Yt.UNKNOWN&&(c=Yt.INTERSECTING),c}function Ft(){return[1/0,1/0,-1/0,-1/0]}function Ee(n,t,e,i,r){return r?(r[0]=n,r[1]=t,r[2]=e,r[3]=i,r):[n,t,e,i]}function sr(n){return Ee(1/0,1/0,-1/0,-1/0,n)}function rd(n,t){let e=n[0],i=n[1];return Ee(e,i,e,i,t)}function sd(n,t,e,i,r){let o=sr(r);return $a(o,n,t,e,i)}function Ri(n,t){return n[0]==t[0]&&n[2]==t[2]&&n[1]==t[1]&&n[3]==t[3]}function go(n,t){return t[0]<n[0]&&(n[0]=t[0]),t[2]>n[2]&&(n[2]=t[2]),t[1]<n[1]&&(n[1]=t[1]),t[3]>n[3]&&(n[3]=t[3]),n}function Mn(n,t){t[0]<n[0]&&(n[0]=t[0]),t[0]>n[2]&&(n[2]=t[0]),t[1]<n[1]&&(n[1]=t[1]),t[1]>n[3]&&(n[3]=t[1])}function $a(n,t,e,i,r){for(;e<i;e+=r)Uy(n,t[e],t[e+1]);return n}function Uy(n,t,e){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}function po(n,t){let e;return e=t(or(n)),e||(e=t(ar(n)),e)||(e=t(hr(n)),e)||(e=t(Pe(n)),e)?e:!1}function ns(n){let t=0;return ss(n)||(t=gt(n)*oe(n)),t}function or(n){return[n[0],n[1]]}function ar(n){return[n[2],n[1]]}function oi(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function od(n,t){let e;return t==="bottom-left"?e=or(n):t==="bottom-right"?e=ar(n):t==="top-left"?e=Pe(n):t==="top-right"?e=hr(n):tt(!1,13),e}function rs(n,t,e,i,r){let[o,a,h,c,d,m,p,E]=_o(n,t,e,i);return Ee(Math.min(o,h,d,p),Math.min(a,c,m,E),Math.max(o,h,d,p),Math.max(a,c,m,E),r)}function _o(n,t,e,i){let r=t*i[0]/2,o=t*i[1]/2,a=Math.cos(e),h=Math.sin(e),c=r*a,d=r*h,m=o*a,p=o*h,E=n[0],M=n[1];return[E-c+p,M-d-m,E-c-p,M-d+m,E+c-p,M+d+m,E+c+p,M+d-m,E-c+p,M-d-m]}function oe(n){return n[3]-n[1]}function en(n,t,e){let i=e||Ft();return Nt(n,t)?(n[0]>t[0]?i[0]=n[0]:i[0]=t[0],n[1]>t[1]?i[1]=n[1]:i[1]=t[1],n[2]<t[2]?i[2]=n[2]:i[2]=t[2],n[3]<t[3]?i[3]=n[3]:i[3]=t[3]):sr(i),i}function Pe(n){return[n[0],n[3]]}function hr(n){return[n[2],n[3]]}function gt(n){return n[2]-n[0]}function Nt(n,t){return n[0]<=t[2]&&n[2]>=t[0]&&n[1]<=t[3]&&n[3]>=t[1]}function ss(n){return n[2]<n[0]||n[3]<n[1]}function ad(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n}function hd(n,t,e){let i=!1,r=uo(n,t),o=uo(n,e);if(r===Yt.INTERSECTING||o===Yt.INTERSECTING)i=!0;else{let a=n[0],h=n[1],c=n[2],d=n[3],m=t[0],p=t[1],E=e[0],M=e[1],b=(M-p)/(E-m),w,v;!!(o&Yt.ABOVE)&&!(r&Yt.ABOVE)&&(w=E-(M-d)/b,i=w>=a&&w<=c),!i&&!!(o&Yt.RIGHT)&&!(r&Yt.RIGHT)&&(v=M-(E-c)*b,i=v>=h&&v<=d),!i&&!!(o&Yt.BELOW)&&!(r&Yt.BELOW)&&(w=E-(M-h)/b,i=w>=a&&w<=c),!i&&!!(o&Yt.LEFT)&&!(r&Yt.LEFT)&&(v=M-(E-a)*b,i=v>=h&&v<=d)}return i}function ld(n,t,e,i){let r=[];if(i>1){let h=n[2]-n[0],c=n[3]-n[1];for(let d=0;d<i;++d)r.push(n[0]+h*d/i,n[1],n[2],n[1]+c*d/i,n[2]-h*d/i,n[3],n[0],n[3]-c*d/i)}else r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]];t(r,r,2);let o=[],a=[];for(let h=0,c=r.length;h<c;h+=2)o.push(r[h]),a.push(r[h+1]);return By(o,a,e)}function Qa(n,t){let e=t.getExtent(),i=oi(n);if(t.canWrapX()&&(i[0]<e[0]||i[0]>=e[2])){let r=gt(e),a=Math.floor((i[0]-e[0])/r)*r;n[0]-=a,n[2]-=a}return n}function cd(n,t){if(t.canWrapX()){let e=t.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[e[0],n[1],e[2],n[3]]];Qa(n,t);let i=gt(e);if(gt(n)>i)return[[e[0],n[1],e[2],n[3]]];if(n[0]<e[0])return[[n[0]+i,n[1],e[2],n[3]],[e[0],n[1],n[2],n[3]]];if(n[2]>e[2])return[[n[0],n[1],e[2],n[3]],[e[0],n[1],n[2]-i,n[3]]]}return[n]}function pt(n,t,e){return Math.min(Math.max(n,t),e)}function ud(n,t,e,i,r,o){let a=r-e,h=o-i;if(a!==0||h!==0){let c=((n-e)*a+(t-i)*h)/(a*a+h*h);c>1?(e=r,i=o):c>0&&(e+=a*c,i+=h*c)}return wi(n,t,e,i)}function wi(n,t,e,i){let r=e-n,o=i-t;return r*r+o*o}function dd(n){let t=n.length;for(let i=0;i<t;i++){let r=i,o=Math.abs(n[i][i]);for(let h=i+1;h<t;h++){let c=Math.abs(n[h][i]);c>o&&(o=c,r=h)}if(o===0)return null;let a=n[r];n[r]=n[i],n[i]=a;for(let h=i+1;h<t;h++){let c=-n[h][i]/n[i][i];for(let d=i;d<t+1;d++)i==d?n[h][d]=0:n[h][d]+=c*n[i][d]}}let e=new Array(t);for(let i=t-1;i>=0;i--){e[i]=n[i][t]/n[i][i];for(let r=i-1;r>=0;r--)n[r][t]-=n[r][i]*e[i]}return e}function lr(n){return n*Math.PI/180}function Oe(n,t){let e=n%t;return e*t<0?e+t:e}function Ii(n,t,e){return n+e*(t-n)}function fd(n,t){let e=Math.pow(10,t);return Math.round(n*e)/e}function os(n,t){return Math.floor(fd(n,t))}function as(n,t){return Math.ceil(fd(n,t))}var jy=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,qy=/^([a-z]*)$|^hsla?\(.*\)$/i;function yo(n){return typeof n=="string"?n:th(n)}function Wy(n){let t=document.createElement("div");if(t.style.color=n,t.style.color!==""){document.body.appendChild(t);let e=getComputedStyle(t).color;return document.body.removeChild(t),e}else return""}var zy=function(){let t={},e=0;return function(i){let r;if(t.hasOwnProperty(i))r=t[i];else{if(e>=1024){let o=0;for(let a in t)(o++&3)===0&&(delete t[a],--e)}r=Xy(i),t[i]=r,++e}return r}}();function Sn(n){return Array.isArray(n)?n:zy(n)}function Xy(n){let t,e,i,r,o;if(qy.exec(n)&&(n=Wy(n)),jy.exec(n)){let a=n.length-1,h;a<=4?h=1:h=2;let c=a===4||a===8;t=parseInt(n.substr(1+0*h,h),16),e=parseInt(n.substr(1+1*h,h),16),i=parseInt(n.substr(1+2*h,h),16),c?r=parseInt(n.substr(1+3*h,h),16):r=255,h==1&&(t=(t<<4)+t,e=(e<<4)+e,i=(i<<4)+i,c&&(r=(r<<4)+r)),o=[t,e,i,r/255]}else n.startsWith("rgba(")?(o=n.slice(5,-1).split(",").map(Number),md(o)):n.startsWith("rgb(")?(o=n.slice(4,-1).split(",").map(Number),o.push(1),md(o)):tt(!1,14);return o}function md(n){return n[0]=pt(n[0]+.5|0,0,255),n[1]=pt(n[1]+.5|0,0,255),n[2]=pt(n[2]+.5|0,0,255),n[3]=pt(n[3],0,1),n}function th(n){let t=n[0];t!=(t|0)&&(t=t+.5|0);let e=n[1];e!=(e|0)&&(e=e+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);let r=n[3]===void 0?1:Math.round(n[3]*100)/100;return"rgba("+t+","+e+","+i+","+r+")"}var eh=class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(let e in this.cache_){let i=this.cache_[e];(t++&3)===0&&!i.hasListener()&&(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,i){let r=gd(t,e,i);return r in this.cache_?this.cache_[r]:null}set(t,e,i,r){let o=gd(t,e,i);this.cache_[o]=r,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};function gd(n,t,e){let i=e?yo(e):"null";return t+":"+n+":"+i}var cr=new eh;var Mt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var ih=class extends Dt{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;let e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[Mt.OPACITY]=t.opacity!==void 0?t.opacity:1,tt(typeof e[Mt.OPACITY]=="number",64),e[Mt.VISIBLE]=t.visible!==void 0?t.visible:!0,e[Mt.Z_INDEX]=t.zIndex,e[Mt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[Mt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[Mt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[Mt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){let e=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return e.opacity=pt(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=i===void 0&&!e.managed?1/0:i,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return ct()}getLayerStatesArray(t){return ct()}getExtent(){return this.get(Mt.EXTENT)}getMaxResolution(){return this.get(Mt.MAX_RESOLUTION)}getMinResolution(){return this.get(Mt.MIN_RESOLUTION)}getMinZoom(){return this.get(Mt.MIN_ZOOM)}getMaxZoom(){return this.get(Mt.MAX_ZOOM)}getOpacity(){return this.get(Mt.OPACITY)}getSourceState(){return ct()}getVisible(){return this.get(Mt.VISIBLE)}getZIndex(){return this.get(Mt.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Mt.EXTENT,t)}setMaxResolution(t){this.set(Mt.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Mt.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Mt.MAX_ZOOM,t)}setMinZoom(t){this.set(Mt.MIN_ZOOM,t)}setOpacity(t){tt(typeof t=="number",64),this.set(Mt.OPACITY,t)}setVisible(t){this.set(Mt.VISIBLE,t)}setZIndex(t){this.set(Mt.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},xo=ih;var Fe={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var nh=class extends xo{constructor(t){let e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Mt.SOURCE,this.handleSourcePropertyChange_);let i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(Mt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){let t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(dt(this.sourceChangeKey_),this.sourceChangeKey_=null);let t=this.getSource();t&&(this.sourceChangeKey_=rt(t,K.CHANGE,this.handleSourceChange_,this)),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(e=>e([]))}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}render(t,e){let i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(Mt.MAP,t)}getMapInternal(){return this.get(Mt.MAP)}setMap(t){this.mapPrecomposeKey_&&(dt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(dt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=rt(t,Fe.PRECOMPOSE,function(e){let r=e.frameState.layerStatesArray,o=this.getLayerState(!1);tt(!r.some(function(a){return a.layer===o.layer}),67),r.push(o)},this),this.mapRenderKey_=rt(this,K.CHANGE,t.render,t),this.changed())}setSource(t){this.set(Mt.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function ur(n,t){if(!n.visible)return!1;let e=t.resolution;if(e<n.minResolution||e>=n.maxResolution)return!1;let i=t.zoom;return i>n.minZoom&&i<=n.maxZoom}var Cn=nh;function pd(n,t){let e=(""+n).split("."),i=(""+t).split(".");for(let r=0;r<Math.max(e.length,i.length);r++){let o=parseInt(e[r]||"0",10),a=parseInt(i[r]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}function _d(n,t){return n[0]+=+t[0],n[1]+=+t[1],n}function bn(n,t){let e=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=t[i]){e=!1;break}return e}function dr(n,t){let e=Math.cos(t),i=Math.sin(t),r=n[0]*e-n[1]*i,o=n[1]*e+n[0]*i;return n[0]=r,n[1]=o,n}function yd(n,t){return n[0]*=t,n[1]*=t,n}function Eo(n,t){if(t.canWrapX()){let e=gt(t.getExtent()),i=rh(n,t,e);i&&(n[0]-=i*e)}return n}function rh(n,t,e){let i=t.getExtent(),r=0;return t.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(e=e||gt(i),r=Math.floor((n[0]-i[0])/e)),r}var sh=class extends $n{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){ct()}calculateMatrices2D(t){let e=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;me(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),rr(r,i)}forEachFeatureAtCoordinate(t,e,i,r,o,a,h,c){let d,m=e.viewState;function p(A,L,F,D){return o.call(a,L,A?F:null,D)}let E=m.projection,M=Eo(t.slice(),E),b=[[0,0]];if(E.canWrapX()&&r){let A=E.getExtent(),L=gt(A);b.push([-L,0],[L,0])}let w=e.layerStatesArray,v=w.length,S=[],R=[];for(let A=0;A<b.length;A++)for(let L=v-1;L>=0;--L){let F=w[L],D=F.layer;if(D.hasRenderer()&&ur(F,m)&&h.call(c,D)){let B=D.getRenderer(),q=D.getSource();if(B&&q){let W=q.getWrapX()?M:t,Z=p.bind(null,F.managed);R[0]=W[0]+b[A][0],R[1]=W[1]+b[A][1],d=B.forEachFeatureAtCoordinate(R,e,i,Z,S)}if(d)return d}}if(S.length===0)return;let I=1/S.length;return S.forEach((A,L)=>A.distanceSq+=L*I),S.sort((A,L)=>A.distanceSq-L.distanceSq),S.some(A=>d=A.callback(A.feature,A.layer,A.geometry)),d}hasFeatureAtCoordinate(t,e,i,r,o,a){return this.forEachFeatureAtCoordinate(t,e,i,r,Si,this,o,a)!==void 0}getMap(){return this.map_}renderFrame(t){ct()}scheduleExpireIconCache(t){cr.canExpireCache()&&t.postRenderFunctions.push(Yy)}};function Yy(n,t){cr.expire()}var xd=sh;var oh=class extends Qt{constructor(t,e,i,r){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=r}},vo=oh;var hs="ol-hidden",vd="ol-selectable",ge="ol-unselectable",ah="ol-unsupported",ai="ol-control",hh="ol-collapsed",Vy=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Ed=["style","variant","weight","size","lineHeight","family"],lh=function(n){let t=n.match(Vy);if(!t)return null;let e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=Ed.length;i<r;++i){let o=t[i+1];o!==void 0&&(e[Ed[i]]=o)}return e.families=e.family.split(/,\s?/),e};function Gt(n,t,e,i){let r;return e&&e.length?r=e.shift():nr?r=new OffscreenCanvas(n||300,t||300):r=document.createElement("canvas"),n&&(r.width=n),t&&(r.height=t),r.getContext("2d",i)}function Mo(n){let t=n.canvas;t.width=1,t.height=1,n.clearRect(0,0,1,1)}function Md(n){let t=n.offsetWidth,e=getComputedStyle(n);return t+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10),t}function Sd(n){let t=n.offsetHeight,e=getComputedStyle(n);return t+=parseInt(e.marginTop,10)+parseInt(e.marginBottom,10),t}function fr(n,t){let e=t.parentNode;e&&e.replaceChild(n,t)}function Tn(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function So(n){for(;n.lastChild;)n.removeChild(n.lastChild)}function Cd(n,t){let e=n.childNodes;for(let i=0;;++i){let r=e[i],o=t[i];if(!r&&!o)break;if(r!==o){if(!r){n.appendChild(o);continue}if(!o){n.removeChild(r),--i;continue}n.insertBefore(o,r)}}}var bo="10px sans-serif",ve="#000",Rn="round",Ai=[],Li=0,li="round",Pi=10,Oi="#000",nn="center",wn="middle",Fi=[0,0,0,0],ki=1,hi=new Dt,mr=null,ch,uh={},bd=function(){let t="32px ",e=["monospace","serif"],i=e.length,r="wmytzilWMYTZIL@#/&?$%10\uF013",o,a;function h(d,m,p){let E=!0;for(let M=0;M<i;++M){let b=e[M];if(a=Co(d+" "+m+" "+t+b,r),p!=b){let w=Co(d+" "+m+" "+t+p+","+b,r);E=E&&w!=a}}return!!E}function c(){let d=!0,m=hi.getKeys();for(let p=0,E=m.length;p<E;++p){let M=m[p];hi.get(M)<100&&(h.apply(this,M.split(`
`))?(si(uh),mr=null,ch=void 0,hi.set(M,100)):(hi.set(M,hi.get(M)+1,!0),d=!1))}d&&(clearInterval(o),o=void 0)}return function(d){let m=lh(d);if(!m)return;let p=m.families;for(let E=0,M=p.length;E<M;++E){let b=p[E],w=m.style+`
`+m.weight+`
`+b;hi.get(w)===void 0&&(hi.set(w,100,!0),h(m.style,m.weight,b)||(hi.set(w,0,!0),o===void 0&&(o=setInterval(c,32))))}}}(),Ky=function(){let n;return function(t){let e=uh[t];if(e==null){if(nr){let i=lh(t),r=Td(t,"\u017Dg");e=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=t,document.body.appendChild(n),e=n.offsetHeight,document.body.removeChild(n);uh[t]=e}return e}}();function Td(n,t){return mr||(mr=Gt(1,1)),n!=ch&&(mr.font=n,ch=mr.font),mr.measureText(t)}function Co(n,t){return Td(n,t).width}function dh(n,t,e){if(t in e)return e[t];let i=t.split(`
`).reduce((r,o)=>Math.max(r,Co(n,o)),0);return e[t]=i,i}function Rd(n,t){let e=[],i=[],r=[],o=0,a=0,h=0,c=0;for(let d=0,m=t.length;d<=m;d+=2){let p=t[d];if(p===`
`||d===m){o=Math.max(o,a),r.push(a),a=0,h+=c;continue}let E=t[d+1]||n.font,M=Co(E,p);e.push(M),a+=M;let b=Ky(E);i.push(b),c=Math.max(c,b)}return{width:o,height:h,widths:e,heights:i,lineWidths:r}}function wd(n,t,e,i,r,o,a,h,c,d,m){n.save(),e!==1&&(n.globalAlpha*=e),t&&n.setTransform.apply(n,t),i.contextInstructions?(n.translate(c,d),n.scale(m[0],m[1]),Hy(i,n)):m[0]<0||m[1]<0?(n.translate(c,d),n.scale(m[0],m[1]),n.drawImage(i,r,o,a,h,0,0,a,h)):n.drawImage(i,r,o,a,h,c,d,a*m[0],h*m[1]),n.restore()}function Hy(n,t){let e=n.contextInstructions;for(let i=0,r=e.length;i<r;i+=2)Array.isArray(e[i+1])?t[e[i]].apply(t,e[i+1]):t[e[i]]=e[i+1]}var fh=class extends xd{constructor(t){super(t),this.fontChangeListenerKey_=rt(hi,ze.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");let e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=ge+" ol-layers";let i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){let i=this.getMap();if(i.hasListener(t)){let r=new vo(t,void 0,e);i.dispatchEvent(r)}}disposeInternal(){dt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Fe.PRECOMPOSE,t);let e=t.layerStatesArray.sort(function(a,h){return a.zIndex-h.zIndex}),i=t.viewState;this.children_.length=0;let r=[],o=null;for(let a=0,h=e.length;a<h;++a){let c=e[a];t.layerIndex=a;let d=c.layer,m=d.getSourceState();if(!ur(c,i)||m!="ready"&&m!="undefined"){d.unrender();continue}let p=d.render(t,o);!p||(p!==o&&(this.children_.push(p),o=p),"getDeclutter"in d&&r.push(d))}for(let a=r.length-1;a>=0;--a)r[a].renderDeclutter(t);Cd(this.element_,this.children_),this.dispatchRenderEvent(Fe.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}},Id=fh;var Ye=class extends Qt{constructor(t,e){super(t),this.layer=e}},mh={LAYERS:"layers"},ls=class extends xo{constructor(t){t=t||{};let e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(mh.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new fe(i.slice(),{unique:!0}):tt(typeof i.getArray=="function",43):i=new fe(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(dt),this.layersListenerKeys_.length=0;let t=this.getLayers();this.layersListenerKeys_.push(rt(t,te.ADD,this.handleLayersAdd_,this),rt(t,te.REMOVE,this.handleLayersRemove_,this));for(let i in this.listenerKeys_)this.listenerKeys_[i].forEach(dt);si(this.listenerKeys_);let e=t.getArray();for(let i=0,r=e.length;i<r;i++){let o=e[i];this.registerLayerListeners_(o),this.dispatchEvent(new Ye("addlayer",o))}this.changed()}registerLayerListeners_(t){let e=[rt(t,ze.PROPERTYCHANGE,this.handleLayerChange_,this),rt(t,K.CHANGE,this.handleLayerChange_,this)];t instanceof ls&&e.push(rt(t,"addlayer",this.handleLayerGroupAdd_,this),rt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[lt(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new Ye("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Ye("removelayer",t.layer))}handleLayersAdd_(t){let e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Ye("addlayer",e)),this.changed()}handleLayersRemove_(t){let e=t.element,i=lt(e);this.listenerKeys_[i].forEach(dt),delete this.listenerKeys_[i],this.dispatchEvent(new Ye("removelayer",e)),this.changed()}getLayers(){return this.get(mh.LAYERS)}setLayers(t){let e=this.getLayers();if(e){let i=e.getArray();for(let r=0,o=i.length;r<o;++r)this.dispatchEvent(new Ye("removelayer",i[r]))}this.set(mh.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){let e=t!==void 0?t:[],i=e.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(e)});let r=this.getLayerState(),o=r.zIndex;!t&&r.zIndex===void 0&&(o=0);for(let a=i,h=e.length;a<h;a++){let c=e[a];c.opacity*=r.opacity,c.visible=c.visible&&r.visible,c.maxResolution=Math.min(c.maxResolution,r.maxResolution),c.minResolution=Math.max(c.minResolution,r.minResolution),c.minZoom=Math.max(c.minZoom,r.minZoom),c.maxZoom=Math.min(c.maxZoom,r.maxZoom),r.extent!==void 0&&(c.extent!==void 0?c.extent=en(c.extent,r.extent):c.extent=r.extent),c.zIndex===void 0&&(c.zIndex=o)}return e}getSourceState(){return"ready"}},Di=ls;var gh=class extends Qt{constructor(t,e,i){super(t),this.map=e,this.frameState=i!==void 0?i:null}},rn=gh;var ph=class extends rn{constructor(t,e,i,r,o,a){super(t,e,o),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},ci=ph;var wt={SINGLECLICK:"singleclick",CLICK:K.CLICK,DBLCLICK:K.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var Ve={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var _h=class extends $i{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;let i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=rt(i,Ve.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=rt(i,Ve.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(K.TOUCHMOVE,this.boundHandleTouchMove_,lo?{passive:!1}:!1)}emulateClick_(t){let e=new ci(wt.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new ci(wt.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;let i=new ci(wt.SINGLECLICK,this.map_,t);this.dispatchEvent(i)}.bind(this),250)}updateActivePointers_(t){let e=t,i=e.pointerId;if(e.type==wt.POINTERUP||e.type==wt.POINTERCANCEL){delete this.trackedTouches_[i];for(let r in this.trackedTouches_)if(this.trackedTouches_[r].target!==e.target){delete this.trackedTouches_[r];break}}else(e.type==wt.POINTERDOWN||e.type==wt.POINTERMOVE)&&(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);let e=new ci(wt.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(dt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);let e=new ci(wt.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.down_={};for(let i in t){let r=t[i];this.down_[i]=typeof r=="function"?Re:r}if(this.dragListenerKeys_.length===0){let i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(rt(i,wt.POINTERMOVE,this.handlePointerMove_,this),rt(i,wt.POINTERUP,this.handlePointerUp_,this),rt(this.element_,wt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(rt(this.element_.getRootNode(),wt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;let e=new ci(wt.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;let e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new ci(wt.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){let e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(dt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(K.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(dt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(dt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},Ad=_h;var ke={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};var Vt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var cs=1/0,yh=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,si(this.queuedElements_)}dequeue(){let t=this.elements_,e=this.priorities_,i=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));let r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(t){tt(!(this.keyFunction_(t)in this.queuedElements_),31);let e=this.priorityFunction_(t);return e!=cs?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){let e=this.elements_,i=this.priorities_,r=e.length,o=e[t],a=i[t],h=t;for(;t<r>>1;){let c=this.getLeftChildIndex_(t),d=this.getRightChildIndex_(t),m=d<r&&i[d]<i[c]?d:c;e[t]=e[m],i[t]=i[m],t=m}e[t]=o,i[t]=a,this.siftDown_(h,t)}siftDown_(t,e){let i=this.elements_,r=this.priorities_,o=i[e],a=r[e];for(;e>t;){let h=this.getParentIndex_(e);if(r[h]>a)i[e]=i[h],r[e]=r[h],e=h;else break}i[e]=o,r[e]=a}reprioritize(){let t=this.priorityFunction_,e=this.elements_,i=this.priorities_,r=0,o=e.length,a,h,c;for(h=0;h<o;++h)a=e[h],c=t(a),c==cs?delete this.queuedElements_[this.keyFunction_(a)]:(i[r]=c,e[r++]=a);e.length=r,i.length=r,this.heapify_()}},Ld=yh;var Q={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var xh=class extends Ld{constructor(t,e){super(function(i){return t.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){let e=super.enqueue(t);return e&&t[0].addEventListener(K.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){let e=t.target,i=e.getState();if(i===Q.LOADED||i===Q.ERROR||i===Q.EMPTY){i!==Q.ERROR&&e.removeEventListener(K.CHANGE,this.boundHandleTileChange_);let r=e.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i=0,r,o,a;for(;this.tilesLoading_<t&&i<e&&this.getCount()>0;)o=this.dequeue()[0],a=o.getKey(),r=o.getState(),r===Q.IDLE&&!(a in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[a]=!0,++this.tilesLoading_,++i,o.load())}},Pd=xh;function Od(n,t,e,i,r){if(!n||!(e in n.wantedTiles))return cs;if(!n.wantedTiles[e][t.getKey()])return cs;let o=n.viewState.center,a=i[0]-o[0],h=i[1]-o[1];return 65536*Math.log(r)+Math.sqrt(a*a+h*h)/r}var Kt={ANIMATING:0,INTERACTING:1};var De={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var we={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};var Eh=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||we[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}},gr=Eh;var us=6378137,pr=Math.PI*us,Zy=[-pr,-pr,pr,pr],Jy=[-180,-85,180,85],To=us*Math.log(Math.tan(Math.PI/2)),sn=class extends gr{constructor(t){super({code:t,units:"m",extent:Zy,global:!0,worldExtent:Jy,getPointResolution:function(e,i){return e/Math.cosh(i[1]/us)}})}},vh=[new sn("EPSG:3857"),new sn("EPSG:102100"),new sn("EPSG:102113"),new sn("EPSG:900913"),new sn("http://www.opengis.net/def/crs/EPSG/0/3857"),new sn("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Fd(n,t,e){let i=n.length;e=e>1?e:2,t===void 0&&(e>2?t=n.slice():t=new Array(i));for(let r=0;r<i;r+=e){t[r]=pr*n[r]/180;let o=us*Math.log(Math.tan(Math.PI*(+n[r+1]+90)/360));o>To?o=To:o<-To&&(o=-To),t[r+1]=o}return t}function kd(n,t,e){let i=n.length;e=e>1?e:2,t===void 0&&(e>2?t=n.slice():t=new Array(i));for(let r=0;r<i;r+=e)t[r]=180*n[r]/pr,t[r+1]=360*Math.atan(Math.exp(n[r+1]/us))/Math.PI-90;return t}var $y=6378137,Dd=[-180,-90,180,90],Qy=Math.PI*$y/180,Ni=class extends gr{constructor(t,e){super({code:t,units:"degrees",extent:Dd,axisOrientation:e,global:!0,metersPerUnit:Qy,worldExtent:Dd})}},Mh=[new Ni("CRS:84"),new Ni("EPSG:4326","neu"),new Ni("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ni("urn:ogc:def:crs:OGC:2:84"),new Ni("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ni("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ni("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var Sh={};function Nd(n){return Sh[n]||Sh[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Gd(n,t){Sh[n]=t}var _r={};function In(n,t,e){let i=n.getCode(),r=t.getCode();i in _r||(_r[i]={}),_r[i][r]=e}function Ro(n,t){let e;return n in _r&&t in _r[n]&&(e=_r[n][t]),e}var tx=63710088e-1;function Ch(n,t,e){e=e||tx;let i=lr(n[1]),r=lr(t[1]),o=(r-i)/2,a=lr(t[0]-n[0])/2,h=Math.sin(o)*Math.sin(o)+Math.sin(a)*Math.sin(a)*Math.cos(i)*Math.cos(r);return 2*e*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}var bh=!0;function Th(n){bh=!(n===void 0?!0:n)}function Rh(n,t,e){if(t!==void 0){for(let i=0,r=n.length;i<r;++i)t[i]=n[i];t=t}else t=n.slice();return t}function Ud(n,t,e){if(t!==void 0&&n!==t){for(let i=0,r=n.length;i<r;++i)t[i]=n[i];n=t}return n}function wh(n){Gd(n.getCode(),n),In(n,n,Rh)}function ex(n){n.forEach(wh)}function Rt(n){return typeof n=="string"?Nd(n):n||null}function yr(n,t,e,i){n=Rt(n);let r,o=n.getPointResolutionFunc();if(o){if(r=o(t,e),i&&i!==n.getUnits()){let a=n.getMetersPerUnit();a&&(r=r*a/we[i])}}else{let a=n.getUnits();if(a=="degrees"&&!i||i=="degrees")r=t;else{let h=ds(n,Rt("EPSG:4326"));if(h===Ud&&a!=="degrees")r=t*n.getMetersPerUnit();else{let d=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];d=h(d,d,2);let m=Ch(d.slice(0,2),d.slice(2,4)),p=Ch(d.slice(4,6),d.slice(6,8));r=(m+p)/2}let c=i?we[i]:n.getMetersPerUnit();c!==void 0&&(r/=c)}}return r}function wo(n){ex(n),n.forEach(function(t){n.forEach(function(e){t!==e&&In(t,e,Rh)})})}function ix(n,t,e,i){n.forEach(function(r){t.forEach(function(o){In(r,o,e),In(o,r,i)})})}function Io(n,t){return n?typeof n=="string"?Rt(n):n:Rt(t)}function Bd(n){return function(t,e,i){let r=t.length;i=i!==void 0?i:2,e=e!==void 0?e:new Array(r);for(let o=0;o<r;o+=i){let a=n(t.slice(o,o+i)),h=a.length;for(let c=0,d=i;c<d;++c)e[o+c]=c>=h?t[o+c]:a[c]}return e}}function jd(n,t,e,i){let r=Rt(n),o=Rt(t);In(r,o,Bd(e)),In(o,r,Bd(i))}function An(n,t){return Th(),Pn(n,"EPSG:4326",t!==void 0?t:"EPSG:3857")}function Gi(n,t){if(n===t)return!0;let e=n.getUnits()===t.getUnits();return(n.getCode()===t.getCode()||ds(n,t)===Rh)&&e}function ds(n,t){let e=n.getCode(),i=t.getCode(),r=Ro(e,i);return r||(r=Ud),r}function Ln(n,t){let e=Rt(n),i=Rt(t);return ds(e,i)}function Pn(n,t,e){return Ln(t,e)(n,void 0,n.length)}function fs(n,t,e,i){let r=Ln(t,e);return ld(n,r,void 0,i)}var Ke=null;function Ao(){return Ke}function ms(n,t){return Ke?Pn(n,t,Ke):n}function He(n,t){return Ke?Pn(n,Ke,t):(bh&&!bn(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(bh=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n)}function xr(n,t){return Ke?fs(n,t,Ke):n}function Ze(n,t){return Ke?fs(n,Ke,t):n}function qd(n,t){if(!Ke)return n;let e=Rt(t).getUnits(),i=Ke.getUnits();return e&&i?n*we[e]/we[i]:n}function Ih(n,t,e){return function(i){let r,o;if(n.canWrapX()){let a=n.getExtent(),h=gt(a);i=i.slice(0),o=rh(i,n,h),o&&(i[0]=i[0]-o*h),i[0]=pt(i[0],a[0],a[2]),i[1]=pt(i[1],a[1],a[3]),r=e(i)}else r=e(i);return o&&t.canWrapX()&&(r[0]+=o*gt(t.getExtent())),r}}function nx(){wo(vh),wo(Mh),ix(Mh,vh,Fd,kd)}nx();function Ah(n,t,e){return function(i,r,o,a,h){if(!i)return;if(!r&&!t)return i;let c=t?0:o[0]*r,d=t?0:o[1]*r,m=h?h[0]:0,p=h?h[1]:0,E=n[0]+c/2+m,M=n[2]-c/2+m,b=n[1]+d/2+p,w=n[3]-d/2+p;E>M&&(E=(M+E)/2,M=E),b>w&&(b=(w+b)/2,w=b);let v=pt(i[0],E,M),S=pt(i[1],b,w);if(a&&e&&r){let R=30*r;v+=-R*Math.log(1+Math.max(0,E-i[0])/R)+R*Math.log(1+Math.max(0,i[0]-M)/R),S+=-R*Math.log(1+Math.max(0,b-i[1])/R)+R*Math.log(1+Math.max(0,i[1]-w)/R)}return[v,S]}}function Lo(n){return n}function Lh(n,t,e,i){let r=gt(t)/e[0],o=oe(t)/e[1];return i?Math.min(n,Math.max(r,o)):Math.min(n,Math.min(r,o))}function Ph(n,t,e){let i=Math.min(n,t),r=50;return i*=Math.log(1+r*Math.max(0,n/t-1))/r+1,e&&(i=Math.max(i,e),i/=Math.log(1+r*Math.max(0,e/n-1))/r+1),pt(i,e/2,t*2)}function Wd(n,t,e,i){return t=t!==void 0?t:!0,function(r,o,a,h){if(r!==void 0){let c=n[0],d=n[n.length-1],m=e?Lh(c,e,a,i):c;if(h)return t?Ph(r,m,d):pt(r,d,m);let p=Math.min(m,r),E=Math.floor(Qn(n,p,o));return n[E]>m&&E<n.length-1?n[E+1]:n[E]}else return}}function zd(n,t,e,i,r,o){return i=i!==void 0?i:!0,e=e!==void 0?e:0,function(a,h,c,d){if(a!==void 0){let m=r?Lh(t,r,c,o):t;if(d)return i?Ph(a,m,e):pt(a,e,m);let p=1e-9,E=Math.ceil(Math.log(t/m)/Math.log(n)-p),M=-h*(.5-p)+.5,b=Math.min(m,a),w=Math.floor(Math.log(t/b)/Math.log(n)+M),v=Math.max(E,w),S=t/Math.pow(n,v);return pt(S,e,m)}else return}}function Oh(n,t,e,i,r){return e=e!==void 0?e:!0,function(o,a,h,c){if(o!==void 0){let d=i?Lh(n,i,h,r):n;return!e||!c?pt(o,t,d):Ph(o,d,t)}else return}}function Er(n){if(n!==void 0)return 0}function Fh(n){if(n!==void 0)return n}function Xd(n){let t=2*Math.PI/n;return function(e,i){if(i)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function Yd(n){return n=n||lr(5),function(t,e){if(e)return t;if(t!==void 0)return Math.abs(t)<=n?0:t}}function kh(n){return Math.pow(n,3)}function Me(n){return 1-kh(1-n)}function Vd(n){return 3*n*n-2*n*n*n}function Kd(n){return n}function Ne(n,t,e,i,r,o){o=o||[];let a=0;for(let h=t;h<e;h+=i){let c=n[h],d=n[h+1];o[a++]=r[0]*c+r[2]*d+r[4],o[a++]=r[1]*c+r[3]*d+r[5]}return o&&o.length!=a&&(o.length=a),o}function Po(n,t,e,i,r,o,a){a=a||[];let h=Math.cos(r),c=Math.sin(r),d=o[0],m=o[1],p=0;for(let E=t;E<e;E+=i){let M=n[E]-d,b=n[E+1]-m;a[p++]=d+M*h-b*c,a[p++]=m+M*c+b*h;for(let w=E+2;w<E+i;++w)a[p++]=n[w]}return a&&a.length!=p&&(a.length=p),a}function Hd(n,t,e,i,r,o,a,h){h=h||[];let c=a[0],d=a[1],m=0;for(let p=t;p<e;p+=i){let E=n[p]-c,M=n[p+1]-d;h[m++]=c+r*E,h[m++]=d+o*M;for(let b=p+2;b<p+i;++b)h[m++]=n[b]}return h&&h.length!=m&&(h.length=m),h}function Zd(n,t,e,i,r,o,a){a=a||[];let h=0;for(let c=t;c<e;c+=i){a[h++]=n[c]+r,a[h++]=n[c+1]+o;for(let d=c+2;d<c+i;++d)a[h++]=n[d]}return a&&a.length!=h&&(a.length=h),a}var Jd=se(),Dh=class extends Dt{constructor(){super(),this.extent_=Ft(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Hu(function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);let r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return ct()}closestPointXY(t,e,i,r){return ct()}containsXY(t,e){let i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return ct()}getExtent(t){if(this.extentRevision_!=this.getRevision()){let e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&sr(e),this.extentRevision_=this.getRevision()}return ad(this.extent_,t)}rotate(t,e){ct()}scale(t,e,i){ct()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return ct()}getType(){return ct()}applyTransform(t){ct()}intersectsExtent(t){return ct()}translate(t,e){ct()}transform(t,e){let i=Rt(t),r=i.getUnits()=="tile-pixels"?function(o,a,h){let c=i.getExtent(),d=i.getWorldExtent(),m=oe(d)/oe(c);return me(Jd,d[0],d[3],m,-m,0,0,0),Ne(o,0,o.length,h,Jd,a),Ln(i,e)(o,a,h)}:Ln(i,e);return this.applyTransform(r),this}},$d=Dh;var Nh=class extends $d{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return sd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return ct()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;let e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Qd(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){ct()}setLayout(t,e,i){let r;if(t)r=Qd(t);else{for(let o=0;o<i;++o)if(e.length===0){this.layout="XY",this.stride=2;return}else e=e[0];r=e.length,t=rx(r)}this.layout=t,this.stride=r}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){let i=this.getFlatCoordinates();if(i){let r=this.getStride();Po(i,0,i.length,r,t,e,i),this.changed()}}scale(t,e,i){e===void 0&&(e=t),i||(i=oi(this.getExtent()));let r=this.getFlatCoordinates();if(r){let o=this.getStride();Hd(r,0,r.length,o,t,e,i,r),this.changed()}}translate(t,e){let i=this.getFlatCoordinates();if(i){let r=this.getStride();Zd(i,0,i.length,r,t,e,i),this.changed()}}};function rx(n){let t;return n==2?t="XY":n==3?t="XYZ":n==4&&(t="XYZM"),t}function Qd(n){let t;return n=="XY"?t=2:n=="XYZ"||n=="XYM"?t=3:n=="XYZM"&&(t=4),t}function tf(n,t,e){let i=n.getFlatCoordinates();if(i){let r=n.getStride();return Ne(i,0,i.length,r,t,e)}else return null}var vr=Nh;function ef(n,t,e,i,r,o,a){let h=n[t],c=n[t+1],d=n[e]-h,m=n[e+1]-c,p;if(d===0&&m===0)p=t;else{let E=((r-h)*d+(o-c)*m)/(d*d+m*m);if(E>1)p=e;else if(E>0){for(let M=0;M<i;++M)a[M]=Ii(n[t+M],n[e+M],E);a.length=i;return}else p=t}for(let E=0;E<i;++E)a[E]=n[p+E];a.length=i}function Gh(n,t,e,i,r){let o=n[t],a=n[t+1];for(t+=i;t<e;t+=i){let h=n[t],c=n[t+1],d=wi(o,a,h,c);d>r&&(r=d),o=h,a=c}return r}function nf(n,t,e,i,r){for(let o=0,a=e.length;o<a;++o){let h=e[o];r=Gh(n,t,h,i,r),t=h}return r}function Bh(n,t,e,i,r,o,a,h,c,d,m){if(t==e)return d;let p,E;if(r===0)if(E=wi(a,h,n[t],n[t+1]),E<d){for(p=0;p<i;++p)c[p]=n[t+p];return c.length=i,E}else return d;m=m||[NaN,NaN];let M=t+i;for(;M<e;)if(ef(n,M-i,M,i,a,h,m),E=wi(a,h,m[0],m[1]),E<d){for(d=E,p=0;p<i;++p)c[p]=m[p];c.length=i,M+=i}else M+=i*Math.max((Math.sqrt(E)-Math.sqrt(d))/r|0,1);if(o&&(ef(n,e-i,t,i,a,h,m),E=wi(a,h,m[0],m[1]),E<d)){for(d=E,p=0;p<i;++p)c[p]=m[p];c.length=i}return d}function rf(n,t,e,i,r,o,a,h,c,d,m){m=m||[NaN,NaN];for(let p=0,E=e.length;p<E;++p){let M=e[p];d=Bh(n,t,M,i,r,o,a,h,c,d,m),t=M}return d}function sf(n,t,e,i){for(let r=0,o=e.length;r<o;++r)n[t++]=e[r];return t}function Uh(n,t,e,i){for(let r=0,o=e.length;r<o;++r){let a=e[r];for(let h=0;h<i;++h)n[t++]=a[h]}return t}function of(n,t,e,i,r){r=r||[];let o=0;for(let a=0,h=e.length;a<h;++a){let c=Uh(n,t,e[a],i);r[o++]=c,t=c}return r.length=o,r}function af(n,t,e,i,r,o,a){let h=(e-t)/i;if(h<3){for(;t<e;t+=i)o[a++]=n[t],o[a++]=n[t+1];return a}let c=new Array(h);c[0]=1,c[h-1]=1;let d=[t,e-i],m=0;for(;d.length>0;){let p=d.pop(),E=d.pop(),M=0,b=n[E],w=n[E+1],v=n[p],S=n[p+1];for(let R=E+i;R<p;R+=i){let I=n[R],A=n[R+1],L=ud(I,A,b,w,v,S);L>M&&(m=R,M=L)}M>r&&(c[(m-t)/i]=1,E+i<m&&d.push(E,m),m+i<p&&d.push(m,p))}for(let p=0;p<h;++p)c[p]&&(o[a++]=n[t+p*i],o[a++]=n[t+p*i+1]);return a}function on(n,t){return t*Math.round(n/t)}function sx(n,t,e,i,r,o,a){if(t==e)return a;let h=on(n[t],r),c=on(n[t+1],r);t+=i,o[a++]=h,o[a++]=c;let d,m;do if(d=on(n[t],r),m=on(n[t+1],r),t+=i,t==e)return o[a++]=d,o[a++]=m,a;while(d==h&&m==c);for(;t<e;){let p=on(n[t],r),E=on(n[t+1],r);if(t+=i,p==d&&E==m)continue;let M=d-h,b=m-c,w=p-h,v=E-c;if(M*v==b*w&&(M<0&&w<M||M==w||M>0&&w>M)&&(b<0&&v<b||b==v||b>0&&v>b)){d=p,m=E;continue}o[a++]=d,o[a++]=m,h=d,c=m,d=p,m=E}return o[a++]=d,o[a++]=m,a}function hf(n,t,e,i,r,o,a,h){for(let c=0,d=e.length;c<d;++c){let m=e[c];a=sx(n,t,m,i,r,o,a),h.push(a),t=m}return a}function an(n,t,e,i,r){r=r!==void 0?r:[];let o=0;for(let a=t;a<e;a+=i)r[o++]=n.slice(a,a+i);return r.length=o,r}function Mr(n,t,e,i,r){r=r!==void 0?r:[];let o=0;for(let a=0,h=e.length;a<h;++a){let c=e[a];r[o++]=an(n,t,c,i,r[o]),t=c}return r.length=o,r}function jh(n,t,e,i,r){r=r!==void 0?r:[];let o=0;for(let a=0,h=e.length;a<h;++a){let c=e[a];r[o++]=c.length===1&&c[0]===t?[]:Mr(n,t,c,i,r[o]),t=c[c.length-1]}return r.length=o,r}function qh(n,t,e,i){let r=0,o=n[e-i],a=n[e-i+1];for(;t<e;t+=i){let h=n[t],c=n[t+1];r+=a*h-o*c,o=h,a=c}return r/2}function lf(n,t,e,i){let r=0;for(let o=0,a=e.length;o<a;++o){let h=e[o];r+=qh(n,t,h,i),t=h}return r}var Sr=class extends vr{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new Sr(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,r){return r<mo(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Gh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Bh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,r))}getArea(){return qh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return an(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){let e=[];return e.length=af(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Sr(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Uh(this.flatCoordinates,0,t,this.stride),this.changed()}},Wh=Sr;var gs=class extends vr{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){let t=new gs(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,r){let o=this.flatCoordinates,a=wi(t,e,o[0],o[1]);if(a<r){let h=this.stride;for(let c=0;c<h;++c)i[c]=o[c];return i.length=h,a}else return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return rd(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Ja(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=sf(this.flatCoordinates,0,t,this.stride),this.changed()}},On=gs;function cf(n,t,e,i,r){return!po(r,function(a){return!hn(n,t,e,i,a[0],a[1])})}function hn(n,t,e,i,r,o){let a=0,h=n[e-i],c=n[e-i+1];for(;t<e;t+=i){let d=n[t],m=n[t+1];c<=o?m>o&&(d-h)*(o-c)-(r-h)*(m-c)>0&&a++:m<=o&&(d-h)*(o-c)-(r-h)*(m-c)<0&&a--,h=d,c=m}return a!==0}function Oo(n,t,e,i,r,o){if(e.length===0||!hn(n,t,e[0],i,r,o))return!1;for(let a=1,h=e.length;a<h;++a)if(hn(n,e[a-1],e[a],i,r,o))return!1;return!0}function uf(n,t,e,i,r,o,a){let h,c,d,m,p,E,M,b=r[o+1],w=[];for(let R=0,I=e.length;R<I;++R){let A=e[R];for(m=n[A-i],E=n[A-i+1],h=t;h<A;h+=i)p=n[h],M=n[h+1],(b<=E&&M<=b||E<=b&&b<=M)&&(d=(b-E)/(M-E)*(p-m)+m,w.push(d)),m=p,E=M}let v=NaN,S=-1/0;for(w.sort(ri),m=w[0],h=1,c=w.length;h<c;++h){p=w[h];let R=Math.abs(p-m);R>S&&(d=(m+p)/2,Oo(n,t,e,i,d,b)&&(v=d,S=R)),m=p}return isNaN(v)&&(v=r[o]),a?(a.push(v,b,S),a):[v,b,S]}function df(n,t,e,i,r){let o;for(t+=i;t<e;t+=i)if(o=r(n.slice(t-i,t),n.slice(t,t+i)),o)return o;return!1}function ff(n,t,e,i,r){let o=$a(Ft(),n,t,e,i);return Nt(r,o)?Xe(r,o)||o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3]?!0:df(n,t,e,i,function(a,h){return hd(r,a,h)}):!1}function zh(n,t,e,i,r){return!!(ff(n,t,e,i,r)||hn(n,t,e,i,r[0],r[1])||hn(n,t,e,i,r[0],r[3])||hn(n,t,e,i,r[2],r[1])||hn(n,t,e,i,r[2],r[3]))}function mf(n,t,e,i,r){if(!zh(n,t,e[0],i,r))return!1;if(e.length===1)return!0;for(let o=1,a=e.length;o<a;++o)if(cf(n,e[o-1],e[o],i,r)&&!ff(n,e[o-1],e[o],i,r))return!1;return!0}function gf(n,t,e,i){for(;t<e-i;){for(let r=0;r<i;++r){let o=n[t+r];n[t+r]=n[e-i+r],n[e-i+r]=o}t+=i,e-=i}}function pf(n,t,e,i){let r=0,o=n[e-i],a=n[e-i+1];for(;t<e;t+=i){let h=n[t],c=n[t+1];r+=(h-o)*(c+a),o=h,a=c}return r===0?void 0:r>0}function _f(n,t,e,i,r){r=r!==void 0?r:!1;for(let o=0,a=e.length;o<a;++o){let h=e[o],c=pf(n,t,h,i);if(o===0){if(r&&c||!r&&!c)return!1}else if(r&&!c||!r&&c)return!1;t=h}return!0}function Xh(n,t,e,i,r){r=r!==void 0?r:!1;for(let o=0,a=e.length;o<a;++o){let h=e[o],c=pf(n,t,h,i);(o===0?r&&c||!r&&!c:r&&!c||!r&&c)&&gf(n,t,h,i),t=h}return t}var Fn=class extends vr{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?ro(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let t=new Fn(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,r){return r<mo(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(nf(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),rf(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,r))}containsXY(t,e){return Oo(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return lf(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),Xh(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Mr(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){let t=oi(this.getExtent());this.flatInteriorPoint_=uf(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new On(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Wh(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){let t=this.layout,e=this.flatCoordinates,i=this.ends_,r=[],o=0;for(let a=0,h=i.length;a<h;++a){let c=i[a],d=new Wh(e.slice(o,c),t);r.push(d),o=c}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let t=this.flatCoordinates;_f(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Xh(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){let e=[],i=[];return e.length=hf(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new Fn(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return mf(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);let i=of(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}},yf=Fn;function Yh(n){let t=n[0],e=n[1],i=n[2],r=n[3],o=[t,e,t,r,i,r,i,e,t,e];return new Fn(o,"XY",[o.length])}var Vh=0,Hh=class extends Dt{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Io(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&Th(),t.center&&(t.center=He(t.center,this.projection_)),t.extent&&(t.extent=Ze(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){let e=Object.assign({},t);for(let h in De)delete e[h];this.setProperties(e,!0);let i=ax(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;let r=ox(t),o=i.constraint,a=hx(t);this.constraints_={center:r,resolution:o,rotation:a},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;let i=this.getCenter();if(i){let r=t||[0,0,0,0];e=e||[0,0,0,0];let o=this.getResolution(),a=o/2*(r[3]-e[3]+e[1]-r[1]),h=o/2*(r[0]-e[0]+e[2]-r[2]);this.setCenterInternal([i[0]+a,i[1]-h])}}getUpdatedOptions_(t){let e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);let e=new Array(arguments.length);for(let i=0;i<e.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=He(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=He(r.anchor,this.getProjection())),e[i]=r}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,i;e>1&&typeof arguments[e-1]=="function"&&(i=arguments[e-1],--e);let r=0;for(;r<e&&!this.isDef();++r){let m=arguments[r];m.center&&this.setCenterInternal(m.center),m.zoom!==void 0?this.setZoom(m.zoom):m.resolution&&this.setResolution(m.resolution),m.rotation!==void 0&&this.setRotation(m.rotation)}if(r===e){i&&Fo(i,!0);return}let o=Date.now(),a=this.targetCenter_.slice(),h=this.targetResolution_,c=this.targetRotation_,d=[];for(;r<e;++r){let m=arguments[r],p={start:o,complete:!1,anchor:m.anchor,duration:m.duration!==void 0?m.duration:1e3,easing:m.easing||Vd,callback:i};if(m.center&&(p.sourceCenter=a,p.targetCenter=m.center.slice(),a=p.targetCenter),m.zoom!==void 0?(p.sourceResolution=h,p.targetResolution=this.getResolutionForZoom(m.zoom),h=p.targetResolution):m.resolution&&(p.sourceResolution=h,p.targetResolution=m.resolution,h=p.targetResolution),m.rotation!==void 0){p.sourceRotation=c;let E=Oe(m.rotation-c+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=c+E,c=p.targetRotation}lx(p)?p.complete=!0:o+=p.duration,d.push(p)}this.animations_.push(d),this.setHint(Kt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Kt.ANIMATING]>0}getInteracting(){return this.hints_[Kt.INTERACTING]>0}cancelAnimations(){this.setHint(Kt.ANIMATING,-this.hints_[Kt.ANIMATING]);let t;for(let e=0,i=this.animations_.length;e<i;++e){let r=this.animations_[e];if(r[0].callback&&Fo(r[0].callback,!1),!t)for(let o=0,a=r.length;o<a;++o){let h=r[o];if(!h.complete){t=h.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;let t=Date.now(),e=!1;for(let i=this.animations_.length-1;i>=0;--i){let r=this.animations_[i],o=!0;for(let a=0,h=r.length;a<h;++a){let c=r[a];if(c.complete)continue;let d=t-c.start,m=c.duration>0?d/c.duration:1;m>=1?(c.complete=!0,m=1):o=!1;let p=c.easing(m);if(c.sourceCenter){let E=c.sourceCenter[0],M=c.sourceCenter[1],b=c.targetCenter[0],w=c.targetCenter[1];this.nextCenter_=c.targetCenter;let v=E+p*(b-E),S=M+p*(w-M);this.targetCenter_=[v,S]}if(c.sourceResolution&&c.targetResolution){let E=p===1?c.targetResolution:c.sourceResolution+p*(c.targetResolution-c.sourceResolution);if(c.anchor){let M=this.getViewportSize_(this.getRotation()),b=this.constraints_.resolution(E,0,M,!0);this.targetCenter_=this.calculateCenterZoom(b,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=E,this.applyTargetState_(!0)}if(c.sourceRotation!==void 0&&c.targetRotation!==void 0){let E=p===1?Oe(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+p*(c.targetRotation-c.sourceRotation);if(c.anchor){let M=this.constraints_.rotation(E,!0);this.targetCenter_=this.calculateCenterRotate(M,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=E}if(this.applyTargetState_(!0),e=!0,!c.complete)break}if(o){this.animations_[i]=null,this.setHint(Kt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;let a=r[0].callback;a&&Fo(a,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i,r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-e[0],r[1]-e[1]],dr(i,t-this.getRotation()),_d(i,e)),i}calculateCenterZoom(t,e){let i,r=this.getCenterInternal(),o=this.getResolution();if(r!==void 0&&o!==void 0){let a=e[0]-t*(e[0]-r[0])/o,h=e[1]-t*(e[1]-r[1])/o;i=[a,h]}return i}getViewportSize_(t){let e=this.viewportSize_;if(t){let i=e[0],r=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(r*Math.cos(t))]}else return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){let t=this.getCenterInternal();return t&&ms(t,this.getProjection())}getCenterInternal(){return this.get(De.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){let e=this.calculateExtentInternal(t);return xr(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();let e=this.getCenterInternal();tt(e,1);let i=this.getResolution();tt(i!==void 0,2);let r=this.getRotation();return tt(r!==void 0,3),rs(e,i,r,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(De.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Ze(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();let i=gt(t)/e[0],r=oe(t)/e[1];return Math.max(i,r)}getResolutionForValueFunction(t){t=t||2;let e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(e/i)/Math.log(t);return function(o){return e/Math.pow(t,o*r)}}getRotation(){return this.get(De.ROTATION)}getValueForResolutionFunction(t){let e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,o=Math.log(i/r)/e;return function(a){return Math.log(i/a)/e/o}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t),i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){let t=this.getProjection(),e=this.getResolution(),i=this.getRotation(),r=this.getCenterInternal(),o=this.padding_;if(o){let a=this.getViewportSizeMinusPadding_();r=Kh(r,this.getViewportSize_(),[a[0]/2+o[3],a[1]/2+o[0]],e,i)}return{center:r.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getZoom(){let t,e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,i,r;if(this.resolutions_){let o=Qn(this.resolutions_,t,1);e=o,i=this.resolutions_[o],o==this.resolutions_.length-1?r=2:r=i/this.resolutions_[o+1]}else i=this.maxResolution_,r=this.zoomFactor_;return e+Math.log(i/t)/Math.log(r)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;let e=pt(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,pt(t-e,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(tt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){tt(!ss(t),25);let r=Ze(t,this.getProjection());i=Yh(r)}else if(t.getType()==="Circle"){let r=Ze(t.getExtent(),this.getProjection());i=Yh(r),i.rotate(this.getRotation(),oi(r))}else{let r=Ao();r?i=t.clone().transform(r,this.getProjection()):i=t}this.fitInternal(i,e)}rotatedExtentForGeometry(t){let e=this.getRotation(),i=Math.cos(e),r=Math.sin(-e),o=t.getFlatCoordinates(),a=t.getStride(),h=1/0,c=1/0,d=-1/0,m=-1/0;for(let p=0,E=o.length;p<E;p+=a){let M=o[p]*i-o[p+1]*r,b=o[p]*r+o[p+1]*i;h=Math.min(h,M),c=Math.min(c,b),d=Math.max(d,M),m=Math.max(m,b)}return[h,c,d,m]}fitInternal(t,e){e=e||{};let i=e.size;i||(i=this.getViewportSizeMinusPadding_());let r=e.padding!==void 0?e.padding:[0,0,0,0],o=e.nearest!==void 0?e.nearest:!1,a;e.minResolution!==void 0?a=e.minResolution:e.maxZoom!==void 0?a=this.getResolutionForZoom(e.maxZoom):a=0;let h=this.rotatedExtentForGeometry(t),c=this.getResolutionForExtentInternal(h,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);c=isNaN(c)?a:Math.max(c,a),c=this.getConstrainedResolution(c,o?0:1);let d=this.getRotation(),m=Math.sin(d),p=Math.cos(d),E=oi(h);E[0]+=(r[1]-r[3])/2*c,E[1]+=(r[0]-r[2])/2*c;let M=E[0]*p-E[1]*m,b=E[1]*p+E[0]*m,w=this.getConstrainedCenter([M,b],c),v=e.callback?e.callback:Re;e.duration!==void 0?this.animateInternal({resolution:c,center:w,duration:e.duration,easing:e.easing},v):(this.targetResolution_=c,this.targetCenter_=w,this.applyTargetState_(!1,!0),Fo(v,!0))}centerOn(t,e,i){this.centerOnInternal(He(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(Kh(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,r){let o,a=this.padding_;if(a&&t){let h=this.getViewportSizeMinusPadding_(-i),c=Kh(t,r,[h[0]/2+a[3],h[1]/2+a[0]],e,i);o=[t[0]-c[0],t[1]-c[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){let e=ms(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){let e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&He(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){let i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,r,i);e&&(this.targetCenter_=this.calculateCenterZoom(o,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=He(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){let i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(r,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&He(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){let i=this.getAnimating()||this.getInteracting()||e,r=this.constraints_.rotation(this.targetRotation_,i),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,0,o,i),h=this.constraints_.center(this.targetCenter_,a,o,i,this.calculateCenterShift(this.targetCenter_,a,r,o));this.get(De.ROTATION)!==r&&this.set(De.ROTATION,r),this.get(De.RESOLUTION)!==a&&(this.set(De.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!h||!this.get(De.CENTER)||!bn(this.get(De.CENTER),h))&&this.set(De.CENTER,h),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=t!==void 0?t:200;let r=e||0,o=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(o),h=this.constraints_.resolution(this.targetResolution_,r,a),c=this.constraints_.center(this.targetCenter_,h,a,!1,this.calculateCenterShift(this.targetCenter_,h,o,a));if(t===0&&!this.cancelAnchor_){this.targetResolution_=h,this.targetRotation_=o,this.targetCenter_=c,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==h||this.getRotation()!==o||!this.getCenterInternal()||!bn(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:c,resolution:h,duration:t,easing:Me,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Kt.INTERACTING,1)}endInteraction(t,e,i){i=i&&He(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.setHint(Kt.INTERACTING,-1),this.resolveConstraints(t,e,i)}getConstrainedCenter(t,e){let i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){let i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;let i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}};function Fo(n,t){setTimeout(function(){n(t)},0)}function ox(n){if(n.extent!==void 0){let e=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Ah(n.extent,n.constrainOnlyCenter,e)}let t=Io(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&t.isGlobal()){let e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,Ah(e,!1,!1)}return Lo}function ax(n){let t,e,i,a=n.minZoom!==void 0?n.minZoom:Vh,h=n.maxZoom!==void 0?n.maxZoom:28,c=n.zoomFactor!==void 0?n.zoomFactor:2,d=n.multiWorld!==void 0?n.multiWorld:!1,m=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,p=n.showFullExtent!==void 0?n.showFullExtent:!1,E=Io(n.projection,"EPSG:3857"),M=E.getExtent(),b=n.constrainOnlyCenter,w=n.extent;if(!d&&!w&&E.isGlobal()&&(b=!1,w=M),n.resolutions!==void 0){let v=n.resolutions;e=v[a],i=v[h]!==void 0?v[h]:v[v.length-1],n.constrainResolution?t=Wd(v,m,!b&&w,p):t=Oh(e,i,m,!b&&w,p)}else{let S=(M?Math.max(gt(M),oe(M)):360*we.degrees/E.getMetersPerUnit())/256/Math.pow(2,Vh),R=S/Math.pow(2,28-Vh);e=n.maxResolution,e!==void 0?a=0:e=S/Math.pow(c,a),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=e/Math.pow(c,h):i=S/Math.pow(c,h):i=R),h=a+Math.floor(Math.log(e/i)/Math.log(c)),i=e/Math.pow(c,h-a),n.constrainResolution?t=zd(c,e,i,m,!b&&w,p):t=Oh(e,i,m,!b&&w,p)}return{constraint:t,maxResolution:e,minResolution:i,minZoom:a,zoomFactor:c}}function hx(n){if(n.enableRotation!==void 0?n.enableRotation:!0){let e=n.constrainRotation;return e===void 0||e===!0?Yd():e===!1?Fh:typeof e=="number"?Xd(e):Fh}else return Er}function lx(n){return!(n.sourceCenter&&n.targetCenter&&!bn(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function Kh(n,t,e,i,r){let o=Math.cos(-r),a=Math.sin(-r),h=n[0]*o-n[1]*a,c=n[1]*o+n[0]*a;h+=(t[0]/2-e[0])*i,c+=(e[1]-t[1]/2)*i,a=-a;let d=h*o-c*a,m=c*o+h*a;return[d,m]}var ui=Hh;var Zh=class extends Dt{constructor(t){super();let e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Tn(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Tn(this.element);for(let e=0,i=this.listenerKeys.length;e<i;++e)dt(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Re&&this.listenerKeys.push(rt(t,ke.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}},ae=Zh;var Jh=class extends ae{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);let e=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",r=t.expandClassName!==void 0?t.expandClassName:e+"-expand",o=t.collapseLabel!==void 0?t.collapseLabel:"\u203A",a=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=a):this.collapseLabel_=o;let h=t.label!==void 0?t.label:"i";typeof h=="string"?(this.label_=document.createElement("span"),this.label_.textContent=h,this.label_.className=r):this.label_=h;let c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener(K.CLICK,this.handleClick_.bind(this),!1);let d=e+" "+ge+" "+ai+(this.collapsed_&&this.collapsible_?" "+hh:"")+(this.collapsible_?"":" ol-uncollapsible"),m=this.element;m.className=d,m.appendChild(this.toggleButton_),m.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){let e={},i=[],r=!0,o=t.layerStatesArray;for(let a=0,h=o.length;a<h;++a){let c=o[a];if(!ur(c,t.viewState))continue;let d=c.layer.getSource();if(!d)continue;let m=d.getAttributions();if(!m)continue;let p=m(t);if(!!p)if(r=r&&d.getAttributionsCollapsible()!==!1,Array.isArray(p))for(let E=0,M=p.length;E<M;++E)p[E]in e||(i.push(p[E]),e[p[E]]=!0);else p in e||(i.push(p),e[p]=!0)}return this.overrideCollapsible_||this.setCollapsible(r),i}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!xe(e,this.renderedAttributions_)){So(this.ulElement_);for(let r=0,o=e.length;r<o;++r){let a=document.createElement("li");a.innerHTML=e[r],this.ulElement_.appendChild(a)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(hh),this.collapsed_?fr(this.collapseLabel_,this.label_):fr(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}},ps=Jh;var $h=class extends ae{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});let e=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"\u21E7",r=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));let o=t.tipLabel?t.tipLabel:"Reset rotation",a=document.createElement("button");a.className=e+"-reset",a.setAttribute("type","button"),a.title=o,a.appendChild(this.label_),a.addEventListener(K.CLICK,this.handleClick_.bind(this),!1);let h=e+" "+ge+" "+ai,c=this.element;c.className=h,c.appendChild(a),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(hs)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){let e=this.getMap().getView();if(!e)return;let i=e.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:Me}):e.setRotation(0))}render(t){let e=t.frameState;if(!e)return;let i=e.viewState.rotation;if(i!=this.rotation_){let r="rotate("+i+"rad)";if(this.autoHide_){let o=this.element.classList.contains(hs);!o&&i===0?this.element.classList.add(hs):o&&i!==0&&this.element.classList.remove(hs)}this.label_.style.transform=r}this.rotation_=i}},Ef=$h;var Qh=class extends ae{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});let e=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,r=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",o=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",a=t.zoomInLabel!==void 0?t.zoomInLabel:"+",h=t.zoomOutLabel!==void 0?t.zoomOutLabel:"\u2013",c=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",d=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",m=document.createElement("button");m.className=r,m.setAttribute("type","button"),m.title=c,m.appendChild(typeof a=="string"?document.createTextNode(a):a),m.addEventListener(K.CLICK,this.handleClick_.bind(this,i),!1);let p=document.createElement("button");p.className=o,p.setAttribute("type","button"),p.title=d,p.appendChild(typeof h=="string"?document.createTextNode(h):h),p.addEventListener(K.CLICK,this.handleClick_.bind(this,-i),!1);let E=e+" "+ge+" "+ai,M=this.element;M.className=E,M.appendChild(m),M.appendChild(p),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){let i=this.getMap().getView();if(!i)return;let r=i.getZoom();if(r!==void 0){let o=i.getConstrainedZoom(r+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:o,duration:this.duration_,easing:Me})):i.setZoom(o)}}},vf=Qh;function _s(n){n=n||{};let t=new fe;return(n.zoom!==void 0?n.zoom:!0)&&t.push(new vf(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&t.push(new Ef(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&t.push(new ps(n.attributionOptions)),t}var tl={ACTIVE:"active"};var el=class extends Dt{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(tl.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(tl.ACTIVE,t)}setMap(t){this.map_=t}};function Mf(n,t,e){let i=n.getCenterInternal();if(i){let r=[i[0]+t[0],i[1]+t[1]];n.animateInternal({duration:e!==void 0?e:250,easing:Kd,center:n.getConstrainedCenter(r)})}}function Cr(n,t,e,i){let r=n.getZoom();if(r===void 0)return;let o=n.getConstrainedZoom(r+t),a=n.getResolutionForZoom(o);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:a,anchor:e,duration:i!==void 0?i:250,easing:Me})}var di=el;var il=class extends di{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==wt.DBLCLICK){let i=t.originalEvent,r=t.map,o=t.coordinate,a=i.shiftKey?-this.delta_:this.delta_,h=r.getView();Cr(h,a,o,this.duration_),i.preventDefault(),e=!0}return!e}},Sf=il;var nl=class extends di{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==wt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==wt.POINTERUP){let i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==wt.POINTERDOWN){let i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==wt.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};function br(n){let t=n.length,e=0,i=0;for(let r=0;r<t;r++)e+=n[r].clientX,i+=n[r].clientY;return[e/t,i/t]}var fi=nl;function ys(n){let t=arguments;return function(e){let i=!0;for(let r=0,o=t.length;r<o&&(i=i&&t[r](e),!!i);++r);return i}}var Cf=function(n){let t=n.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},cx=function(n){let t=n.map.getTargetElement(),e=n.map.getOwnerDocument().activeElement;return t.contains(e)},ko=function(n){return n.map.getTargetElement().hasAttribute("tabindex")?cx(n):!0},bf=Si;var Do=function(n){let t=n.originalEvent;return t.button==0&&!($u&&Qu&&t.ctrlKey)};var No=function(n){let t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};var Tf=function(n){let t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Go=function(n){let t=n.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},Bo=function(n){let t=n.originalEvent;return tt(t!==void 0,56),t.pointerType=="mouse"};var Rf=function(n){let t=n.originalEvent;return tt(t!==void 0,56),t.isPrimary&&t.button===0};var rl=class extends fi{constructor(t){super({stopDown:Ci}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;let e=t.condition?t.condition:ys(No,Rf);this.condition_=t.onFocusOnly?ys(ko,e):e,this.noKinetic_=!1}handleDragEvent(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());let e=this.targetPointers,i=br(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){let r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=t.map.getView();yd(r,a.getResolution()),dr(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()}handleUpEvent(t){let e=t.map,i=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){let r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),a=i.getCenterInternal(),h=e.getPixelFromCoordinateInternal(a),c=e.getCoordinateFromPixelInternal([h[0]-r*Math.cos(o),h[1]-r*Math.sin(o)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:Me})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){let i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1}},wf=rl;var sl=class extends fi{constructor(t){t=t||{},super({stopDown:Ci}),this.condition_=t.condition?t.condition:Cf,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!Bo(t))return;let e=t.map,i=e.getView();if(i.getConstraints().rotation===Er)return;let r=e.getSize(),o=t.pixel,a=Math.atan2(r[1]/2-o[1],o[0]-r[0]/2);if(this.lastAngle_!==void 0){let h=a-this.lastAngle_;i.adjustRotationInternal(-h)}this.lastAngle_=a}handleUpEvent(t){return Bo(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return Bo(t)&&Do(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}},If=sl;var ol=class extends $n{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){let t=this.startPixel_,e=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(t[0],e[0])+i,r.top=Math.min(t[1],e[1])+i,r.width=Math.abs(e[0]-t[0])+i,r.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);let e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){let t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new yf([r])}getGeometry(){return this.geometry_}},Af=ol;var Uo={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},xs=class extends Qt{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}},al=class extends fi{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new Af(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:Do,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){let r=i[0]-e[0],o=i[1]-e[1];return r*r+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new xs(Uo.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);let e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new xs(e?Uo.BOXEND:Uo.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new xs(Uo.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}},Lf=al;var hl=class extends Lf{constructor(t){t=t||{};let e=t.condition?t.condition:Tf;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){let i=this.getMap().getView(),r=this.getGeometry();if(this.out_){let o=i.rotatedExtentForGeometry(r),a=i.getResolutionForExtentInternal(o),h=i.getResolution()/a;r=r.clone(),r.scale(h*h)}i.fitInternal(r,{duration:this.duration_,easing:Me})}},Pf=hl;var ln={LEFT:37,UP:38,RIGHT:39,DOWN:40};var ll=class extends di{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return No(e)&&Go(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==K.KEYDOWN){let i=t.originalEvent,r=i.keyCode;if(this.condition_(t)&&(r==ln.DOWN||r==ln.LEFT||r==ln.RIGHT||r==ln.UP)){let a=t.map.getView(),h=a.getResolution()*this.pixelDelta_,c=0,d=0;r==ln.DOWN?d=-h:r==ln.LEFT?c=-h:r==ln.RIGHT?c=h:d=h;let m=[c,d];dr(m,a.getRotation()),Mf(a,m,this.duration_),i.preventDefault(),e=!0}}return!e}},Of=ll;var cl=class extends di{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:Go,this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==K.KEYDOWN||t.type==K.KEYPRESS){let i=t.originalEvent,r=i.charCode;if(this.condition_(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){let o=t.map,a=r=="+".charCodeAt(0)?this.delta_:-this.delta_,h=o.getView();Cr(h,a,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}},Ff=cl;var ul=class{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;let t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;let r=this.points_[e+2]-this.points_[i+2];if(r<1e3/60)return!1;let o=this.points_[e]-this.points_[i],a=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(a,o),this.initialVelocity_=Math.sqrt(o*o+a*a)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},kf=ul;var dl=class extends di{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;let e=t.condition?t.condition:bf;this.condition_=t.onFocusOnly?ys(ko,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;let t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==K.WHEEL)return!0;let i=t.map,r=t.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let o;if(t.type==K.WHEEL&&(o=r.deltaY,Ju&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=ho),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)),o===0)return!1;this.lastDelta_=o;let a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");let h=i.getView();if(this.mode_==="trackpad"&&!(h.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(h.getAnimating()&&h.cancelAnimations(),h.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),h.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=a,!1;this.totalDelta_+=o;let c=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1}handleWheelZoom_(t){let e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-pt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Cr(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}},Df=dl;var fl=class extends fi{constructor(t){t=t||{};let e=t;e.stopDown||(e.stopDown=Ci),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0,i=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){let m=o-this.lastAngle_;this.rotationDelta_+=m,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=m}this.lastAngle_=o;let a=t.map,h=a.getView();if(h.getConstraints().rotation===Er)return;let c=a.getViewport().getBoundingClientRect(),d=br(this.targetPointers);d[0]-=c.left,d[1]-=c.top,this.anchor_=a.getCoordinateFromPixelInternal(d),this.rotating_&&(a.render(),h.adjustRotationInternal(e,this.anchor_))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){let e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}else return!1}},Nf=fl;var ml=class extends fi{constructor(t){t=t||{};let e=t;e.stopDown||(e.stopDown=Ci),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1,i=this.targetPointers[0],r=this.targetPointers[1],o=i.clientX-r.clientX,a=i.clientY-r.clientY,h=Math.sqrt(o*o+a*a);this.lastDistance_!==void 0&&(e=this.lastDistance_/h),this.lastDistance_=h;let c=t.map,d=c.getView();e!=1&&(this.lastScaleDelta_=e);let m=c.getViewport().getBoundingClientRect(),p=br(this.targetPointers);p[0]-=m.left,p[1]-=m.top,this.anchor_=c.getCoordinateFromPixelInternal(p),c.render(),d.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){let i=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}else return!0}handleDownEvent(t){if(this.targetPointers.length>=2){let e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}else return!1}},Gf=ml;function Bf(n){n=n||{};let t=new fe,e=new kf(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&t.push(new If),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&t.push(new Sf({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&t.push(new wf({onFocusOnly:n.onFocusOnly,kinetic:e})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&t.push(new Nf),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&t.push(new Gf({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(t.push(new Of),t.push(new Ff({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&t.push(new Df({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&t.push(new Pf({duration:n.zoomDuration})),t}function gl(n,t,e){return e===void 0&&(e=[0,0]),e[0]=n[0]+2*t,e[1]=n[1]+2*t,e}function pl(n){return n[0]>0&&n[1]>0}function jo(n,t,e){return e===void 0&&(e=[0,0]),e[0]=n[0]*t+.5|0,e[1]=n[1]*t+.5|0,e}function Bt(n,t){return Array.isArray(n)?n:(t===void 0?t=[n,n]:(t[0]=n,t[1]=n),t)}function Uf(n){if(n instanceof Cn){n.setMapInternal(null);return}n instanceof Di&&n.getLayers().forEach(Uf)}function jf(n,t){if(n instanceof Cn){n.setMapInternal(t);return}if(n instanceof Di){let e=n.getLayers().getArray();for(let i=0,r=e.length;i<r;++i)jf(e[i],t)}}var _l=class extends Dt{constructor(t){super(),t=t||{},this.on,this.once,this.un;let e=ux(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:ho,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=se(),this.pixelToCoordinateTransform_=se(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=e.controls||_s(),this.interactions=e.interactions||Bf({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Pd(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Vt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Vt.VIEW,this.handleViewChanged_),this.addChangeListener(Vt.SIZE,this.handleSizeChanged_),this.addChangeListener(Vt.TARGET,this.handleTargetChanged_),this.setProperties(e.values);let i=this;t.view&&!(t.view instanceof ui)&&t.view.then(function(r){i.setView(new ui(r))}),this.controls.addEventListener(te.ADD,function(r){r.element.setMap(this)}.bind(this)),this.controls.addEventListener(te.REMOVE,function(r){r.element.setMap(null)}.bind(this)),this.interactions.addEventListener(te.ADD,function(r){r.element.setMap(this)}.bind(this)),this.interactions.addEventListener(te.REMOVE,function(r){r.element.setMap(null)}.bind(this)),this.overlays_.addEventListener(te.ADD,function(r){this.addOverlayInternal_(r.element)}.bind(this)),this.overlays_.addEventListener(te.REMOVE,function(r){let o=r.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],r.element.setMap(null)}.bind(this)),this.controls.forEach(function(r){r.setMap(this)}.bind(this)),this.interactions.forEach(function(r){r.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){jf(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){let e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;let r=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};let o=i.hitTolerance!==void 0?i.hitTolerance:0,a=i.layerFilter!==void 0?i.layerFilter:Si,h=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,o,h,e,null,a,null)}getFeaturesAtPixel(t,e){let i=[];return this.forEachFeatureAtPixel(t,function(r){i.push(r)},e),i}getAllLayers(){let t=[];function e(i){i.forEach(function(r){r instanceof Di?e(r.getLayers()):t.push(r)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;let i=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};let r=e.layerFilter!==void 0?e.layerFilter:Si,o=e.hitTolerance!==void 0?e.hitTolerance:0,a=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,o,a,r,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){let e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]}getTarget(){return this.get(Vt.TARGET)}getTargetElement(){let t=this.getTarget();return t!==void 0?typeof t=="string"?document.getElementById(t):t:null}getCoordinateFromPixel(t){return ms(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){let e=this.frameState_;return e?Ot(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){let e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Vt.LAYERGROUP)}setLayers(t){let e=this.getLayerGroup();if(t instanceof fe){e.setLayers(t);return}let i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){let t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){let r=t[e];if(!r.visible)continue;let o=r.layer.getRenderer();if(o&&!o.ready)return!0;let a=r.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(t){let e=He(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){let e=this.frameState_;return e?Ot(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Vt.SIZE)}getView(){return this.get(Vt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){let t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,r){return Od(this.frameState_,t,e,i,r)}handleBrowserEvent(t,e){e=e||t.type;let i=new ci(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;let e=t.originalEvent,i=e.type;if(i===Ve.POINTERDOWN||i===K.WHEEL||i===K.KEYDOWN){let r=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():r,a=e.target;if(this.overlayContainerStopEvent_.contains(a)||!(o===r?r.documentElement:o).contains(a))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){let r=this.getInteractions().getArray().slice();for(let o=r.length-1;o>=0;o--){let a=r[o];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){let t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let r=this.maxTilesLoading_,o=r;if(t){let a=t.viewHints;if(a[Kt.ANIMATING]||a[Kt.INTERACTING]){let h=Date.now()-t.time>8;r=h?0:8,o=h?0:2}}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,o))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(Fe.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Fe.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new rn(ke.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new rn(ke.LOADSTART,this,t))));let i=this.postRenderFunctions_;for(let r=0,o=i.length;r<o;++r)i[r](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let e=0,i=this.targetChangeHandlerKeys_.length;e<i;++e)dt(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(K.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(K.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Tn(this.viewport_)}let t=this.getTargetElement();if(!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Id(this)),this.mapBrowserEventHandler_=new Ad(this,this.moveTolerance_);for(let r in wt)this.mapBrowserEventHandler_.addEventListener(wt[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(K.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(K.WHEEL,this.boundHandleBrowserEvent_,lo?{passive:!1}:!1);let e=this.getOwnerDocument().defaultView,i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[rt(i,K.KEYDOWN,this.handleBrowserEvent,this),rt(i,K.KEYPRESS,this.handleBrowserEvent,this),rt(e,K.RESIZE,this.updateSize,this)]}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(dt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(dt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);let t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=rt(t,ze.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=rt(t,K.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(dt),this.layerGroupPropertyListenerKeys_=null);let t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Ye("addlayer",t)),this.layerGroupPropertyListenerKeys_=[rt(t,ze.PROPERTYCHANGE,this.render,this),rt(t,K.CHANGE,this.render,this),rt(t,"addlayer",this.handleLayerAdd_,this),rt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){let t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){let r=t[e].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Uf(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){let e=this.getSize(),i=this.getView(),r=this.frameState_,o=null;if(e!==void 0&&pl(e)&&i&&i.isDef()){let a=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=i.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:rs(h.center,h.resolution,h.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:h,viewHints:a,wantedTiles:{},mapId:lt(this),renderTargets:{}},h.nextCenter&&h.nextResolution){let c=isNaN(h.nextRotation)?h.rotation:h.nextRotation;o.nextExtent=rs(h.nextCenter,h.nextResolution,c,e)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),r&&(!this.previousExtent_||!ss(this.previousExtent_)&&!Ri(o.extent,this.previousExtent_))&&(this.dispatchEvent(new rn(ke.MOVESTART,this,r)),this.previousExtent_=sr(this.previousExtent_)),this.previousExtent_&&!o.viewHints[Kt.ANIMATING]&&!o.viewHints[Kt.INTERACTING]&&!Ri(o.extent,this.previousExtent_)&&(this.dispatchEvent(new rn(ke.MOVEEND,this,o)),fo(o.extent,this.previousExtent_))),this.dispatchEvent(new rn(ke.POSTRENDER,this,o)),this.renderComplete_=this.hasListener(ke.LOADSTART)||this.hasListener(ke.LOADEND)||this.hasListener(Fe.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){let e=this.getLayerGroup();e&&this.handleLayerRemove_(new Ye("removelayer",e)),this.set(Vt.LAYERGROUP,t)}setSize(t){this.set(Vt.SIZE,t)}setTarget(t){this.set(Vt.TARGET,t)}setView(t){if(!t||t instanceof ui){this.set(Vt.VIEW,t);return}this.set(Vt.VIEW,new ui);let e=this;t.then(function(i){e.setView(new ui(i))})}updateSize(){let t=this.getTargetElement(),e;if(t){let i=getComputedStyle(t),r=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),o=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(e=[r,o],!pl(e)&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(e),this.updateViewportSize_()}updateViewportSize_(){let t=this.getView();if(t){let e,i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}}};function ux(n){let t=null;n.keyboardEventTarget!==void 0&&(t=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);let e={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Di({layers:n.layers});e[Vt.LAYERGROUP]=i,e[Vt.TARGET]=n.target,e[Vt.VIEW]=n.view instanceof ui?n.view:new ui;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new fe(n.controls.slice()):(tt(typeof n.controls.getArray=="function",47),r=n.controls));let o;n.interactions!==void 0&&(Array.isArray(n.interactions)?o=new fe(n.interactions.slice()):(tt(typeof n.interactions.getArray=="function",48),o=n.interactions));let a;return n.overlays!==void 0?Array.isArray(n.overlays)?a=new fe(n.overlays.slice()):(tt(typeof n.overlays.getArray=="function",49),a=n.overlays):a=new fe,{controls:r,interactions:o,keyboardEventTarget:t,overlays:a,values:e}}var qf=_l;var qo=class{constructor(t,e,i,r){this.minX=t,this.maxX=e,this.minY=i,this.maxY=r}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}};function kn(n,t,e,i,r){return r!==void 0?(r.minX=n,r.maxX=t,r.minY=e,r.maxY=i,r):new qo(n,t,e,i)}var Wo=qo;function yl(n,t,e,i){return i!==void 0?(i[0]=n,i[1]=t,i[2]=e,i):[n,t,e]}function Dn(n,t,e){return n+"/"+t+"/"+e}function zo(n){return Dn(n[0],n[1],n[2])}function Wf(n){return n.split("/").map(Number)}function Xo(n){return(n[1]<<n[0])+n[2]}function zf(n,t){let e=n[0],i=n[1],r=n[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;let o=t.getFullTileRange(e);return o?o.containsXY(i,r):!0}var dx=[0,0,0],cn=5,xl=class{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,tt(Ku(this.resolutions_,function(r,o){return o-r},!0),17);let e;if(!t.origins){for(let r=0,o=this.resolutions_.length-1;r<o;++r)if(!e)e=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,tt(this.origins_.length==this.resolutions_.length,20));let i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Pe(i)),tt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,tt(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:256,tt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(r,o){let a=new Wo(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){let h=this.getTileRangeForExtentAndZ(i,o);a.minX=Math.max(h.minX,a.minX),a.maxX=Math.min(h.maxX,a.maxX),a.minY=Math.max(h.minY,a.minY),a.maxY=Math.min(h.maxY,a.maxY)}return a},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){let r=this.getTileRangeForExtentAndZ(t,e);for(let o=r.minX,a=r.maxX;o<=a;++o)for(let h=r.minY,c=r.maxY;h<=c;++h)i([e,o,h])}forEachTileCoordParentTileRange(t,e,i,r){let o,a,h,c=null,d=t[0]-1;for(this.zoomFactor_===2?(a=t[1],h=t[2]):c=this.getTileCoordExtent(t,r);d>=this.minZoom;){if(this.zoomFactor_===2?(a=Math.floor(a/2),h=Math.floor(h/2),o=kn(a,a,h,h,i)):o=this.getTileRangeForExtentAndZ(c,d,i),e(d,o))return!0;--d}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){let o=t[1]*2,a=t[2]*2;return kn(o,o+1,a,a+1,e)}let r=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;let r=t[0],o=t[1],a=t[2];if(e===r)return kn(o,a,o,a,i);if(this.zoomFactor_){let c=Math.pow(this.zoomFactor_,e-r),d=Math.floor(o*c),m=Math.floor(a*c);if(e<r)return kn(d,d,m,m,i);let p=Math.floor(c*(o+1))-1,E=Math.floor(c*(a+1))-1;return kn(d,p,m,E,i)}let h=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(h,e,i)}getTileRangeExtent(t,e,i){let r=this.getOrigin(t),o=this.getResolution(t),a=Bt(this.getTileSize(t),this.tmpSize_),h=r[0]+e.minX*a[0]*o,c=r[0]+(e.maxX+1)*a[0]*o,d=r[1]+e.minY*a[1]*o,m=r[1]+(e.maxY+1)*a[1]*o;return Ee(h,d,c,m,i)}getTileRangeForExtentAndZ(t,e,i){let r=dx;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,r);let o=r[1],a=r[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,r),kn(o,r[1],a,r[2],i)}getTileCoordCenter(t){let e=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Bt(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*i,e[1]-(t[2]+.5)*r[1]*i]}getTileCoordExtent(t,e){let i=this.getOrigin(t[0]),r=this.getResolution(t[0]),o=Bt(this.getTileSize(t[0]),this.tmpSize_),a=i[0]+t[1]*o[0]*r,h=i[1]-(t[2]+1)*o[1]*r,c=a+o[0]*r,d=h+o[1]*r;return Ee(a,h,c,d,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,r,o){let a=this.getZForResolution(i),h=i/this.getResolution(a),c=this.getOrigin(a),d=Bt(this.getTileSize(a),this.tmpSize_),m=h*(t-c[0])/i/d[0],p=h*(c[1]-e)/i/d[1];return r?(m=as(m,cn)-1,p=as(p,cn)-1):(m=os(m,cn),p=os(p,cn)),yl(a,m,p,o)}getTileCoordForXYAndZ_(t,e,i,r,o){let a=this.getOrigin(i),h=this.getResolution(i),c=Bt(this.getTileSize(i),this.tmpSize_),d=(t-a[0])/h/c[0],m=(a[1]-e)/h/c[1];return r?(d=as(d,cn)-1,m=as(m,cn)-1):(d=os(d,cn),m=os(m,cn)),yl(i,d,m,o)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){let i=Qn(this.resolutions_,t,e||0);return pt(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return zh(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){let e=this.resolutions_.length,i=new Array(e);for(let r=this.minZoom;r<e;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=i}},Yo=xl;var El=class extends Yo{constructor(t){super({extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes}),this.matrixIds_=t.matrixIds}getMatrixId(t){return this.matrixIds_[t]}getMatrixIds(){return this.matrixIds_}},Vo=El;var bu=no(Xf());function Yf(n){let t=Object.keys(n.defs),e=t.length,i,r;for(i=0;i<e;++i){let o=t[i];if(!Rt(o)){let a=n.defs(o),h=a.units;!h&&a.projName==="longlat"&&(h="degrees"),wh(new gr({code:o,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:h}))}}for(i=0;i<e;++i){let o=t[i],a=Rt(o);for(r=0;r<e;++r){let h=t[r],c=Rt(h);if(!Ro(o,h))if(n.defs[o]===n.defs[h])wo([a,c]);else{let d=n(o,h);jd(a,c,Ih(a,c,d.forward),Ih(c,a,d.inverse))}}}}var Vf=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],Kf={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},Sl=class extends ae{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.on,this.once,this.un,this.keys_=t.keys!==void 0?t.keys:!1,this.source_=t.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=t.className!==void 0?t.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=t.activeClassName!==void 0?t.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=t.inactiveClassName!==void 0?t.inactiveClassName.split(" "):[this.cssClassName_+"-false"];let e=t.label!==void 0?t.label:"\u2922";this.labelNode_=typeof e=="string"?document.createTextNode(e):e;let i=t.labelActive!==void 0?t.labelActive:"\xD7";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;let r=t.tipLabel?t.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=r,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(K.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${ge} ${ai}`,this.element.appendChild(this.button_)}handleClick_(t){t.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){let t=this.getMap();if(!t)return;let e=t.getOwnerDocument();if(!!Hf(e))if(Zf(e))mx(e);else{let i;this.source_?i=typeof this.source_=="string"?e.getElementById(this.source_):this.source_:i=t.getTargetElement(),this.keys_?fx(i):Jf(i)}}handleFullScreenChange_(){let t=this.getMap();if(!t)return;let e=this.isInFullscreen_;this.isInFullscreen_=Zf(t.getOwnerDocument()),e!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(fr(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(Kf.ENTERFULLSCREEN)):(fr(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(Kf.LEAVEFULLSCREEN)),t.updateSize())}setClassName_(t,e){e?(t.classList.remove(...this.inactiveClassName_),t.classList.add(...this.activeClassName_)):(t.classList.remove(...this.activeClassName_),t.classList.add(...this.inactiveClassName_))}setMap(t){let e=this.getMap();e&&e.removeChangeListener(Vt.TARGET,this.boundHandleMapTargetChange_),super.setMap(t),this.handleMapTargetChange_(),t&&t.addChangeListener(Vt.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){let t=this.documentListeners_;for(let i=0,r=t.length;i<r;++i)dt(t[i]);t.length=0;let e=this.getMap();if(e){let i=e.getOwnerDocument();Hf(i)?this.element.classList.remove(ah):this.element.classList.add(ah);for(let r=0,o=Vf.length;r<o;++r)t.push(rt(i,Vf[r],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}};function Hf(n){let t=n.body;return!!(t.webkitRequestFullscreen||t.requestFullscreen&&n.fullscreenEnabled)}function Zf(n){return!!(n.webkitIsFullScreen||n.fullscreenElement)}function Jf(n){n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen()}function fx(n){n.webkitRequestFullscreen?n.webkitRequestFullscreen():Jf(n)}function mx(n){n.exitFullscreen?n.exitFullscreen():n.webkitExitFullscreen&&n.webkitExitFullscreen()}var Cl=Sl;var he={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},bl=class extends Dt{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,this.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,this.element=document.createElement("div"),this.element.className=t.className!==void 0?t.className:"ol-overlay-container "+vd,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=t.autoPan===!0?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(he.ELEMENT,this.handleElementChanged),this.addChangeListener(he.MAP,this.handleMapChanged),this.addChangeListener(he.OFFSET,this.handleOffsetChanged),this.addChangeListener(he.POSITION,this.handlePositionChanged),this.addChangeListener(he.POSITIONING,this.handlePositioningChanged),t.element!==void 0&&this.setElement(t.element),this.setOffset(t.offset!==void 0?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),t.position!==void 0&&this.setPosition(t.position)}getElement(){return this.get(he.ELEMENT)}getId(){return this.id}getMap(){return this.get(he.MAP)||null}getOffset(){return this.get(he.OFFSET)}getPosition(){return this.get(he.POSITION)}getPositioning(){return this.get(he.POSITIONING)}handleElementChanged(){So(this.element);let t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(Tn(this.element),dt(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);let t=this.getMap();if(t){this.mapPostrenderListenerKey=rt(t,ke.POSTRENDER,this.render,this),this.updatePixelPosition();let e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(he.ELEMENT,t)}setMap(t){this.set(he.MAP,t)}setOffset(t){this.set(he.OFFSET,t)}setPosition(t){this.set(he.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){let e=this.getMap();if(!e||!e.getTargetElement()||!this.get(he.POSITION))return;let i=this.getRect(e.getTargetElement(),e.getSize()),r=this.getElement(),o=this.getRect(r,[Md(r),Sd(r)]);t=t||{};let a=t.margin===void 0?20:t.margin;if(!Xe(i,o)){let h=o[0]-i[0],c=i[2]-o[2],d=o[1]-i[1],m=i[3]-o[3],p=[0,0];if(h<0?p[0]=h-a:c<0&&(p[0]=Math.abs(c)+a),d<0?p[1]=d-a:m<0&&(p[1]=Math.abs(m)+a),p[0]!==0||p[1]!==0){let E=e.getView().getCenterInternal(),M=e.getPixelFromCoordinateInternal(E);if(!M)return;let b=[M[0]+p[0],M[1]+p[1]],w=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(b),duration:w.duration,easing:w.easing})}}}getRect(t,e){let i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[r,o,r+e[0],o+e[1]]}setPositioning(t){this.set(he.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){let t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e){this.setVisible(!1);return}let i=t.getPixelFromCoordinate(e),r=t.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(t,e){let i=this.element.style,r=this.getOffset(),o=this.getPositioning();this.setVisible(!0);let a=Math.round(t[0]+r[0])+"px",h=Math.round(t[1]+r[1])+"px",c="0%",d="0%";o=="bottom-right"||o=="center-right"||o=="top-right"?c="-100%":(o=="bottom-center"||o=="center-center"||o=="top-center")&&(c="-50%"),o=="bottom-left"||o=="bottom-center"||o=="bottom-right"?d="-100%":(o=="center-left"||o=="center-center"||o=="center-right")&&(d="-50%");let m=`translate(${c}, ${d}) translate(${a}, ${h})`;this.rendered.transform_!=m&&(this.rendered.transform_=m,i.transform=m)}getOptions(){return this.options}},$f=bl;var Tl="units",gx=[1,2,5],Es=25.4/.28,Rl=class extends ae{constructor(t){t=t||{};let e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un;let i=t.className!==void 0?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+ge,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=t.minWidth!==void 0?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(Tl,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(Tl)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(Tl,t)}setDpi(t){this.dpi_=t}updateElement_(){let t=this.viewState_;if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let e=t.center,i=t.projection,r=this.getUnits(),o=r=="degrees"?"degrees":"m",a=yr(i,t.resolution,e,o),h=this.minWidth_*(this.dpi_||Es)/Es,c=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Es)/Es:void 0,d=h*a,m="";if(r=="degrees"){let I=we.degrees;d*=I,d<I/60?(m="\u2033",a*=3600):d<I?(m="\u2032",a*=60):m="\xB0"}else r=="imperial"?d<.9144?(m="in",a/=.0254):d<1609.344?(m="ft",a/=.3048):(m="mi",a/=1609.344):r=="nautical"?(a/=1852,m="NM"):r=="metric"?d<.001?(m="\u03BCm",a*=1e6):d<1?(m="mm",a*=1e3):d<1e3?m="m":(m="km",a/=1e3):r=="us"?d<.9144?(m="in",a*=39.37):d<1609.344?(m="ft",a/=.30480061):(m="mi",a/=1609.3472):tt(!1,33);let p=3*Math.floor(Math.log(h*a)/Math.log(10)),E,M,b,w,v,S;for(;;){b=Math.floor(p/3);let I=Math.pow(10,b);if(E=gx[(p%3+3)%3]*I,M=Math.round(E/a),isNaN(M)){this.element.style.display="none",this.renderedVisible_=!1;return}if(c!==void 0&&M>=c){E=w,M=v,b=S;break}else if(M>=h)break;w=E,v=M,S=b,++p}let R=this.scaleBar_?this.createScaleBar(M,E,m):E.toFixed(b<0?-b:0)+" "+m;this.renderedHTML_!=R&&(this.innerElement_.innerHTML=R,this.renderedHTML_=R),this.renderedWidth_!=M&&(this.innerElement_.style.width=M+"px",this.renderedWidth_=M),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,e,i){let r=this.getScaleForResolution(),o=r<1?Math.round(1/r).toLocaleString()+" : 1":"1 : "+Math.round(r).toLocaleString(),a=this.scaleBarSteps_,h=t/a,c=[this.createMarker("absolute")];for(let m=0;m<a;++m){let p=m%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";c.push(`<div><div class="ol-scale-singlebar ${p}" style="width: ${h}px;"></div>`+this.createMarker("relative")+(m%2===0||a===2?this.createStepText(m,t,!1,e,i):"")+"</div>")}return c.push(this.createStepText(a,t,!0,e,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+o+"</div>":"")+c.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${t==="absolute"?3:-10}px;"></div>`}createStepText(t,e,i,r,o){let h=(t===0?0:Math.round(r/this.scaleBarSteps_*t*100)/100)+(t===0?"":" "+o),c=t===0?-3:e/this.scaleBarSteps_*-1,d=t===0?0:e/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${c}px;text-align: ${t===0?"left":"center"};min-width: ${d}px;left: ${i?e+"px":"unset"};">`+h+"</div>"}getScaleForResolution(){let t=yr(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),e=this.dpi_||Es,i=1e3/25.4;return t*i*e}render(t){let e=t.frameState;e?this.viewState_=e.viewState:this.viewState_=null,this.updateElement_()}},wl=Rl;var vs={VERTICAL:0,HORIZONTAL:1},Il=class extends ae{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=vs.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=t.duration!==void 0?t.duration:200;let e=t.className!==void 0?t.className:"ol-zoomslider",i=document.createElement("button");i.setAttribute("type","button"),i.className=e+"-thumb "+ge;let r=this.element;r.className=e+" "+ge+" "+ai,r.appendChild(i),r.addEventListener(Ve.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),r.addEventListener(Ve.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),r.addEventListener(Ve.POINTERUP,this.handleDraggerEnd_.bind(this),!1),r.addEventListener(K.CLICK,this.handleContainerClick_.bind(this),!1),i.addEventListener(K.CLICK,Yu,!1)}setMap(t){super.setMap(t),t&&t.render()}initSlider_(){let t=this.element,e=t.offsetWidth,i=t.offsetHeight;if(e===0&&i===0)return this.sliderInitialized_=!1;let r=getComputedStyle(t);e-=parseFloat(r.paddingRight)+parseFloat(r.paddingLeft),i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom);let o=t.firstElementChild,a=getComputedStyle(o),h=o.offsetWidth+parseFloat(a.marginRight)+parseFloat(a.marginLeft),c=o.offsetHeight+parseFloat(a.marginTop)+parseFloat(a.marginBottom);return this.thumbSize_=[h,c],e>i?(this.direction_=vs.HORIZONTAL,this.widthLimit_=e-h):(this.direction_=vs.VERTICAL,this.heightLimit_=i-c),this.sliderInitialized_=!0}handleContainerClick_(t){let e=this.getMap().getView(),i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),r=this.getResolutionForPosition_(i),o=e.getConstrainedZoom(e.getZoomForResolution(r));e.animateInternal({zoom:o,duration:this.duration_,easing:Me})}handleDraggerStart_(t){if(!this.dragging_&&t.target===this.element.firstElementChild){let e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,this.dragListenerKeys_.length===0){let i=this.handleDraggerDrag_,r=this.handleDraggerEnd_,o=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(rt(o,Ve.POINTERMOVE,i,this),rt(o,Ve.POINTERUP,r,this))}}}handleDraggerDrag_(t){if(this.dragging_){let e=t.clientX-this.startX_,i=t.clientY-this.startY_,r=this.getRelativePosition_(e,i);this.currentResolution_=this.getResolutionForPosition_(r),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(dt),this.dragListenerKeys_.length=0)}setThumbPosition_(t){let e=this.getPositionForResolution_(t),i=this.element.firstElementChild;this.direction_==vs.HORIZONTAL?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"}getRelativePosition_(t,e){let i;return this.direction_===vs.HORIZONTAL?i=t/this.widthLimit_:i=e/this.heightLimit_,pt(i,0,1)}getResolutionForPosition_(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)}getPositionForResolution_(t){let e=this.getMap().getView().getValueForResolutionFunction();return pt(1-e(t),0,1)}render(t){if(!t.frameState||!this.sliderInitialized_&&!this.initSlider_())return;let e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}},Al=Il;var At={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var Ms=class{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Bt(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){let t=this.getScale();return new Ms({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ct()}getImage(t){return ct()}getHitDetectionImage(){return ct()}getPixelRatio(t){return 1}getImageState(){return ct()}getImageSize(){return ct()}getOrigin(){return ct()}getSize(){return ct()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Bt(t)}listenImageChange(t){ct()}load(){ct()}unlistenImageChange(t){ct()}},Ko=Ms;function Se(n){return Array.isArray(n)?th(n):n}var Ss=class extends Ko{constructor(t){let e=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:e,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){let t=this.getScale(),e=new Ss({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){let t=this.size_;if(!t)return null;let e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){let i=this.renderOptions_,r=Gt(i.size*t,i.size*t);this.draw_(i,r,t),e=r.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return At.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let r=this.radius_,o=this.radius2_===void 0?r:this.radius2_;if(r<o){let F=r;r=o,o=F}let a=this.radius2_===void 0?this.points_:this.points_*2,h=2*Math.PI/a,c=o*Math.sin(h),d=Math.sqrt(o*o-c*c),m=r-d,p=Math.sqrt(c*c+m*m),E=p/c;if(t==="miter"&&E<=i)return E*e;let M=e/2/E,b=e/2*(m/p),v=Math.sqrt((r+M)*(r+M)+b*b)-r;if(this.radius2_===void 0||t==="bevel")return v*2;let S=r*Math.sin(h),R=Math.sqrt(r*r-S*S),I=o-R,L=Math.sqrt(S*S+I*I)/S;if(L<=i){let F=L*e/2-o-r;return 2*Math.max(v,F)}return v*2}createRenderOptions(){let t=li,e=0,i=null,r=0,o,a=0;this.stroke_&&(o=this.stroke_.getColor(),o===null&&(o=Oi),o=Se(o),a=this.stroke_.getWidth(),a===void 0&&(a=ki),i=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=li),e=this.stroke_.getMiterLimit(),e===void 0&&(e=Pi));let h=this.calculateLineJoinSize_(t,a,e),c=Math.max(this.radius_,this.radius2_||0),d=Math.ceil(2*c+h);return{strokeStyle:o,strokeWidth:a,size:d,lineDash:i,lineDashOffset:r,lineJoin:t,miterLimit:e}}render(){this.renderOptions_=this.createRenderOptions();let t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let r=this.fill_.getColor();r===null&&(r=ve),e.fillStyle=Se(r),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),i=0;if(typeof e=="string"&&(e=Sn(e)),e===null?i=1:Array.isArray(e)&&(i=e.length===4?e[3]:1),i===0){let r=Gt(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_,i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{let r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(e*=2);let o=this.angle_-Math.PI/2,a=2*Math.PI/e;for(let h=0;h<e;h++){let c=o+h*a,d=h%2===0?i:r;t.lineTo(d*Math.cos(c),d*Math.sin(c))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=ve,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}},Ho=Ss;var Cs=class extends Ho{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){let t=this.getScale(),e=new Cs({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}},Zo=Cs;var bs=class{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){let t=this.getColor();return new bs({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}},Tr=bs;var Ts=class{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){let t=this.getColor();return new Ts({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}},Jo=Ts;var Rr=class{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Qf,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Rr({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Qf,this.geometry_=t}setZIndex(t){this.zIndex_=t}};function tm(n){let t;if(typeof n=="function")t=n;else{let e;Array.isArray(n)?e=n:(tt(typeof n.getZIndex=="function",41),e=[n]),t=function(){return e}}return t}var Ll=null;function em(n,t){if(!Ll){let e=new Tr({color:"rgba(255,255,255,0.4)"}),i=new Jo({color:"#3399CC",width:1.25});Ll=[new Rr({image:new Zo({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}return Ll}function Qf(n){return n.getGeometry()}var Bi=Rr;function $o(n,t,e){let i=n,r=!0,o=!1,a=!1,h=[tr(i,K.LOAD,function(){a=!0,o||t()})];return i.src&&td?(o=!0,i.decode().then(function(){r&&t()}).catch(function(c){r&&(a?t():e())})):h.push(tr(i,K.ERROR,e)),function(){r=!1,h.forEach(dt)}}var Rs=null,Pl=class extends $i{constructor(t,e,i,r,o,a){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=r,this.canvas_={},this.color_=a,this.unlisten_=null,this.imageState_=o,this.size_=i,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===At.LOADED){Rs||(Rs=Gt(1,1)),Rs.drawImage(this.image_,0,0);try{Rs.getImageData(0,0,1,1),this.tainted_=!1}catch{Rs=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(K.CHANGE)}handleImageError_(){this.imageState_=At.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=At.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){let t=this.size_[0],e=this.size_[1],i=Gt(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===At.IDLE){this.image_||this.initializeImage_(),this.imageState_=At.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=$o(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==At.LOADED)return;let e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);let r=i.getContext("2d");r.scale(t,t),r.drawImage(e,0,0),r.globalCompositeOperation="multiply",r.fillStyle=yo(this.color_),r.fillRect(0,0,i.width/t,i.height/t),r.globalCompositeOperation="destination-in",r.drawImage(e,0,0),this.canvas_[t]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};function im(n,t,e,i,r,o){let a=cr.get(t,i,o);return a||(a=new Pl(n,t,e,i,r,o),cr.set(t,i,o,a)),a}var ws=class extends Ko{constructor(t){t=t||{};let e=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,r=t.scale!==void 0?t.scale:1,o=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:i,scale:r,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:o,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;let a=t.img!==void 0?t.img:null;this.imgSize_=t.imgSize;let h=t.src;tt(!(h!==void 0&&a),4),tt(!a||a&&this.imgSize_,5),(h===void 0||h.length===0)&&a&&(h=a.src||lt(a)),tt(h!==void 0&&h.length>0,6);let c=t.src!==void 0?At.IDLE:At.LOADED;this.color_=t.color!==void 0?Sn(t.color):null,this.iconImage_=im(a,h,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,c,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null}clone(){let t=this.getScale();return new ws({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;let r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=r[0]),this.anchorYUnits_=="fraction"&&(t[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+r[1])}this.normalizedAnchor_=t}let e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){let e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(t){this.iconImage_.addEventListener(K.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(K.CHANGE,t)}},Ui=ws;var nm=no(kl(),1);var Dl=class{constructor(t){this.rbush_=new nm.default(t),this.items_={}}insert(t,e){let i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[lt(e)]=i}load(t,e){let i=new Array(e.length);for(let r=0,o=e.length;r<o;r++){let a=t[r],h=e[r],c={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:h};i[r]=c,this.items_[lt(h)]=c}this.rbush_.load(i)}remove(t){let e=lt(t),i=this.items_[e];return delete this.items_[e],this.rbush_.remove(i)!==null}update(t,e){let i=this.items_[lt(e)],r=[i.minX,i.minY,i.maxX,i.maxY];Ri(r,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){let e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(r){return r.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let r=0,o=t.length;r<o;r++)if(i=e(t[r]),i)return i;return i}isEmpty(){return bi(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){let e=this.rbush_.toJSON();return Ee(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(let e in t.items_)this.items_[e]=t.items_[e]}},Nl=Dl;var Gl=class extends Dt{constructor(t){super(),this.projection=Rt(t.projection),this.attributions_=rm(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;let e=this;this.viewPromise_=new Promise(function(i,r){e.viewResolver=i,e.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return ct()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=rm(t),this.changed()}setState(t){this.state_=t,this.changed()}};function rm(n){return n?Array.isArray(n)?function(t){return n}:typeof n=="function"?n:function(t){return[n]}:null}var Qo=Gl;var Ge={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function sm(n,t){return[[-1/0,-1/0,1/0,1/0]]}var px=!1;function _x(n,t,e,i,r,o,a){let h=new XMLHttpRequest;h.open("GET",typeof n=="function"?n(e,i,r):n,!0),t.getType()=="arraybuffer"&&(h.responseType="arraybuffer"),h.withCredentials=px,h.onload=function(c){if(!h.status||h.status>=200&&h.status<300){let d=t.getType(),m;d=="json"||d=="text"?m=h.responseText:d=="xml"?(m=h.responseXML,m||(m=new DOMParser().parseFromString(h.responseText,"application/xml"))):d=="arraybuffer"&&(m=h.response),m?o(t.readFeatures(m,{extent:e,featureProjection:r}),t.readProjection(m)):a()}else a()},h.onerror=a,h.send()}function Bl(n,t){return function(e,i,r,o,a){let h=this;_x(n,t,e,i,r,function(c,d){h.addFeatures(c),o!==void 0&&o(c)},a||Re)}}var mi=class extends Qt{constructor(t,e,i){super(t),this.feature=e,this.features=i}},Ul=class extends Qo{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=Re,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(tt(this.format_,7),this.loader_=Bl(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:sm;let e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new Nl:null,this.loadedExtentsRtree_=new Nl,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(t.features)?r=t.features:t.features&&(i=t.features,r=i.getArray()),!e&&i===void 0&&(i=new fe(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){let e=lt(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);let i=t.getGeometry();if(i){let r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new mi(Ge.ADDFEATURE,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[rt(e,K.CHANGE,this.handleFeatureChange_,this),rt(e,ze.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let i=!0,r=e.getId();return r!==void 0&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=e),i&&(tt(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){let e=[],i=[],r=[];for(let o=0,a=t.length;o<a;o++){let h=t[o],c=lt(h);this.addToIndex_(c,h)&&i.push(h)}for(let o=0,a=i.length;o<a;o++){let h=i[o],c=lt(h);this.setupChangeEvents_(c,h);let d=h.getGeometry();if(d){let m=d.getExtent();e.push(m),r.push(h)}else this.nullGeometryFeatures_[c]=h}if(this.featuresRtree_&&this.featuresRtree_.load(e,r),this.hasListener(Ge.ADDFEATURE))for(let o=0,a=i.length;o<a;o++)this.dispatchEvent(new mi(Ge.ADDFEATURE,i[o]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(Ge.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(Ge.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(te.ADD,function(i){e||(e=!0,this.addFeature(i.element),e=!1)}.bind(this)),t.addEventListener(te.REMOVE,function(i){e||(e=!0,this.removeFeature(i.element),e=!1)}.bind(this)),this.featuresCollection_=t}clear(t){if(t){for(let i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(dt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){let i=function(r){this.removeFeatureInternal(r)}.bind(this);this.featuresRtree_.forEach(i);for(let r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};let e=new mi(Ge.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){let i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(r){if(r.getGeometry().intersectsCoordinate(t))return e(r)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){let o=e(i);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),bi(this.nullGeometryFeatures_)||ro(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){let e=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){e.push(i)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);let r=cd(t,e);return[].concat(...r.map(o=>this.featuresRtree_.getInExtent(o)))}else return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){let i=t[0],r=t[1],o=null,a=[NaN,NaN],h=1/0,c=[-1/0,-1/0,1/0,1/0];return e=e||Si,this.featuresRtree_.forEachInExtent(c,function(d){if(e(d)){let m=d.getGeometry(),p=h;if(h=m.closestPointXY(i,r,a,h),h<p){o=d;let E=Math.sqrt(h);c[0]=i-E,c[1]=r-E,c[2]=i+E,c[3]=r+E}}}),o}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){let e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){let e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){let e=t.target,i=lt(e),r=e.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);else{let a=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(a,e)):this.featuresRtree_&&this.featuresRtree_.update(a,e)}let o=e.getId();if(o!==void 0){let a=o.toString();this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new mi(Ge.CHANGEFEATURE,e))}hasFeature(t){let e=t.getId();return e!==void 0?e in this.idIndex_:lt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&bi(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,i){let r=this.loadedExtentsRtree_,o=this.strategy_(t,e,i);for(let a=0,h=o.length;a<h;++a){let c=o[a];r.forEachInExtent(c,function(m){return Xe(m.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new mi(Ge.FEATURESLOADSTART)),this.loader_.call(this,c,e,i,function(m){--this.loadingExtentsCount_,this.dispatchEvent(new mi(Ge.FEATURESLOADEND,void 0,m))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new mi(Ge.FEATURESLOADERROR))}.bind(this)),r.insert(c,{extent:c.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){let e=this.loadedExtentsRtree_,i;e.forEachInExtent(t,function(r){if(Ri(r.extent,t))return i=r,!0}),i&&e.remove(i)}removeFeature(t){if(!t)return;let e=lt(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){let e=lt(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(dt),delete this.featureChangeKeys_[e];let r=t.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[e],this.dispatchEvent(new mi(Ge.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(let i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){tt(this.format_,7),this.url_=t,this.setLoader(Bl(t,this.format_))}},ta=Ul;var hm=no(kl(),1);var yx="#333",Is=class{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Bt(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Tr({color:yx}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){let t=this.getScale();return new Is({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Bt(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}},om=Is;function jl(n){return new Bi({fill:As(n,""),stroke:Ls(n,""),text:xx(n),image:Ex(n)})}function As(n,t){let e=n[t+"fill-color"];if(!!e)return new Tr({color:e})}function Ls(n,t){let e=n[t+"stroke-width"],i=n[t+"stroke-color"];if(!(!e&&!i))return new Jo({width:e,color:i,lineCap:n[t+"stroke-line-cap"],lineJoin:n[t+"stroke-line-join"],lineDash:n[t+"stroke-line-dash"],lineDashOffset:n[t+"stroke-line-dash-offset"],miterLimit:n[t+"stroke-miter-limit"]})}function xx(n){let t=n["text-value"];return t?new om({text:t,font:n["text-font"],maxAngle:n["text-max-angle"],offsetX:n["text-offset-x"],offsetY:n["text-offset-y"],overflow:n["text-overflow"],placement:n["text-placement"],scale:n["text-scale"],rotateWithView:n["text-rotate-with-view"],rotation:n["text-rotation"],textAlign:n["text-align"],justify:n["text-justify"],textBaseline:n["text-baseline"],padding:n["text-padding"],fill:As(n,"text-"),backgroundFill:As(n,"text-background-"),stroke:Ls(n,"text-"),backgroundStroke:Ls(n,"text-background-")}):void 0}function Ex(n){let t=n["icon-src"],e=n["icon-img"];if(t||e)return new Ui({src:t,img:e,imgSize:n["icon-img-size"],anchor:n["icon-anchor"],anchorOrigin:n["icon-anchor-origin"],anchorXUnits:n["icon-anchor-x-units"],anchorYUnits:n["icon-anchor-y-units"],color:n["icon-color"],crossOrigin:n["icon-cross-origin"],offset:n["icon-offset"],displacement:n["icon-displacement"],opacity:n["icon-opacity"],scale:n["icon-scale"],rotation:n["icon-rotation"],rotateWithView:n["icon-rotate-with-view"],size:n["icon-size"],declutterMode:n["icon-declutter-mode"]});let i=n["shape-points"];if(i){let o="shape-";return new Ho({points:i,fill:As(n,o),stroke:Ls(n,o),radius:n["shape-radius"],radius1:n["shape-radius1"],radius2:n["shape-radius2"],angle:n["shape-angle"],displacement:n["shape-displacement"],rotation:n["shape-rotation"],rotateWithView:n["shape-rotate-with-view"],scale:n["shape-scale"],declutterMode:n["shape-declutter-mode"]})}let r=n["circle-radius"];if(r){let o="circle-";return new Zo({radius:r,fill:As(n,o),stroke:Ls(n,o),displacement:n["circle-displacement"],scale:n["circle-scale"],rotation:n["circle-rotation"],rotateWithView:n["circle-rotate-with-view"],declutterMode:n["circle-declutter-mode"]})}}var am={RENDER_ORDER:"renderOrder"},ql=class extends Cn{constructor(t){t=t||{};let e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(am.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new hm.default(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(am.RENDER_ORDER,t)}setStyle(t){let e;if(t===void 0)e=em;else if(t===null)e=null;else if(typeof t=="function")e=t;else if(t instanceof Bi)e=t;else if(Array.isArray(t)){let i=t.length,r=new Array(i);for(let o=0;o<i;++o){let a=t[o];a instanceof Bi?r[o]=a:r[o]=jl(a)}e=r}else e=jl(t);this.style_=e,this.styleFunction_=t===null?void 0:tm(this.style_),this.changed()}},lm=ql;var Ps={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Os=[Ps.FILL],gi=[Ps.STROKE],ji=[Ps.BEGIN_PATH],Wl=[Ps.CLOSE_PATH],it=Ps;var zl=class{drawCustom(t,e,i,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}},ea=zl;var Xl=class extends ea{constructor(t,e,i,r){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){let e=this.pixelRatio;return e==1?t:t.map(function(i){return i*e})}appendFlatPointCoordinates(t,e){let i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,o=this.coordinates,a=o.length;for(let h=0,c=t.length;h<c;h+=e)r[0]=t[h],r[1]=t[h+1],tn(i,r)&&(o[a++]=r[0],o[a++]=r[1]);return a}appendFlatLineCoordinates(t,e,i,r,o,a){let h=this.coordinates,c=h.length,d=this.getBufferedMaxExtent();a&&(e+=r);let m=t[e],p=t[e+1],E=this.tmpCoordinate_,M=!0,b,w,v;for(b=e+r;b<i;b+=r)E[0]=t[b],E[1]=t[b+1],v=uo(d,E),v!==w?(M&&(h[c++]=m,h[c++]=p,M=!1),h[c++]=E[0],h[c++]=E[1]):v===Yt.INTERSECTING?(h[c++]=E[0],h[c++]=E[1],M=!1):M=!0,m=E[0],p=E[1],w=v;return(o&&M||b===e+r)&&(h[c++]=m,h[c++]=p),c}drawCustomCoordinates_(t,e,i,r,o){for(let a=0,h=i.length;a<h;++a){let c=i[a],d=this.appendFlatLineCoordinates(t,e,c,r,!1,!1);o.push(d),e=c}return e}drawCustom(t,e,i,r){this.beginGeometry(t,e);let o=t.getType(),a=t.getStride(),h=this.coordinates.length,c,d,m,p,E;switch(o){case"MultiPolygon":c=t.getOrientedFlatCoordinates(),p=[];let M=t.getEndss();E=0;for(let b=0,w=M.length;b<w;++b){let v=[];E=this.drawCustomCoordinates_(c,E,M[b],a,v),p.push(v)}this.instructions.push([it.CUSTOM,h,p,t,i,jh]),this.hitDetectionInstructions.push([it.CUSTOM,h,p,t,r||i,jh]);break;case"Polygon":case"MultiLineString":m=[],c=o=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),E=this.drawCustomCoordinates_(c,0,t.getEnds(),a,m),this.instructions.push([it.CUSTOM,h,m,t,i,Mr]),this.hitDetectionInstructions.push([it.CUSTOM,h,m,t,r||i,Mr]);break;case"LineString":case"Circle":c=t.getFlatCoordinates(),d=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([it.CUSTOM,h,d,t,i,an]),this.hitDetectionInstructions.push([it.CUSTOM,h,d,t,r||i,an]);break;case"MultiPoint":c=t.getFlatCoordinates(),d=this.appendFlatPointCoordinates(c,a),d>h&&(this.instructions.push([it.CUSTOM,h,d,t,i,an]),this.hitDetectionInstructions.push([it.CUSTOM,h,d,t,r||i,an]));break;case"Point":c=t.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),d=this.coordinates.length,this.instructions.push([it.CUSTOM,h,d,t,i]),this.hitDetectionInstructions.push([it.CUSTOM,h,d,t,r||i]);break;default:}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[it.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[it.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){let t=this.hitDetectionInstructions;t.reverse();let e,i=t.length,r,o,a=-1;for(e=0;e<i;++e)r=t[e],o=r[0],o==it.END_GEOMETRY?a=e:o==it.BEGIN_GEOMETRY&&(r[2]=e,Vu(this.hitDetectionInstructions,a,e),a=-1)}setFillStrokeStyle(t,e){let i=this.state;if(t){let r=t.getColor();i.fillStyle=Se(r||ve)}else i.fillStyle=void 0;if(e){let r=e.getColor();i.strokeStyle=Se(r||Oi);let o=e.getLineCap();i.lineCap=o!==void 0?o:Rn;let a=e.getLineDash();i.lineDash=a?a.slice():Ai;let h=e.getLineDashOffset();i.lineDashOffset=h||Li;let c=e.getLineJoin();i.lineJoin=c!==void 0?c:li;let d=e.getWidth();i.lineWidth=d!==void 0?d:ki;let m=e.getMiterLimit();i.miterLimit=m!==void 0?m:Pi,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){let e=t.fillStyle,i=[it.SET_FILL_STYLE,e];return typeof e!="string"&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[it.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){let i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){let i=t.strokeStyle,r=t.lineCap,o=t.lineDash,a=t.lineDashOffset,h=t.lineJoin,c=t.lineWidth,d=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||o!=t.currentLineDash&&!xe(t.currentLineDash,o)||t.currentLineDashOffset!=a||t.currentLineJoin!=h||t.currentLineWidth!=c||t.currentMiterLimit!=d)&&(i!==void 0&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=o,t.currentLineDashOffset=a,t.currentLineJoin=h,t.currentLineWidth=c,t.currentMiterLimit=d)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;let e=[it.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=fo(this.maxExtent),this.maxLineWidth>0)){let t=this.resolution*(this.maxLineWidth+1)/2;Ti(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}},pi=Xl;var Yl=class extends pi{constructor(t,e,i,r){super(t,e,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);let i=t.getFlatCoordinates(),r=t.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(i,r);this.instructions.push([it.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([it.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);let i=t.getFlatCoordinates(),r=t.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(i,r);this.instructions.push([it.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([it.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){let i=t.getAnchor(),r=t.getSize(),o=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}},cm=Yl;var Vl=class extends pi{constructor(t,e,i,r){super(t,e,i,r)}drawFlatCoordinates_(t,e,i,r){let o=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,i,r,!1,!1),h=[it.MOVE_TO_LINE_TO,o,a];return this.instructions.push(h),this.hitDetectionInstructions.push(h),i}drawLineString(t,e){let i=this.state,r=i.strokeStyle,o=i.lineWidth;if(r===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([it.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ai,Li],ji);let a=t.getFlatCoordinates(),h=t.getStride();this.drawFlatCoordinates_(a,0,a.length,h),this.hitDetectionInstructions.push(gi),this.endGeometry(e)}drawMultiLineString(t,e){let i=this.state,r=i.strokeStyle,o=i.lineWidth;if(r===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([it.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],ji);let a=t.getEnds(),h=t.getFlatCoordinates(),c=t.getStride(),d=0;for(let m=0,p=a.length;m<p;++m)d=this.drawFlatCoordinates_(h,d,a[m],c);this.hitDetectionInstructions.push(gi),this.endGeometry(e)}finish(){let t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(gi),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(gi),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(ji)}},um=Vl;var Kl=class extends pi{constructor(t,e,i,r){super(t,e,i,r)}drawFlatCoordinatess_(t,e,i,r){let o=this.state,a=o.fillStyle!==void 0,h=o.strokeStyle!==void 0,c=i.length;this.instructions.push(ji),this.hitDetectionInstructions.push(ji);for(let d=0;d<c;++d){let m=i[d],p=this.coordinates.length,E=this.appendFlatLineCoordinates(t,e,m,r,!0,!h),M=[it.MOVE_TO_LINE_TO,p,E];this.instructions.push(M),this.hitDetectionInstructions.push(M),h&&(this.instructions.push(Wl),this.hitDetectionInstructions.push(Wl)),e=m}return a&&(this.instructions.push(Os),this.hitDetectionInstructions.push(Os)),h&&(this.instructions.push(gi),this.hitDetectionInstructions.push(gi)),e}drawCircle(t,e){let i=this.state,r=i.fillStyle,o=i.strokeStyle;if(r===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([it.SET_FILL_STYLE,ve]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([it.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);let a=t.getFlatCoordinates(),h=t.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,h,!1,!1);let d=[it.CIRCLE,c];this.instructions.push(ji,d),this.hitDetectionInstructions.push(ji,d),i.fillStyle!==void 0&&(this.instructions.push(Os),this.hitDetectionInstructions.push(Os)),i.strokeStyle!==void 0&&(this.instructions.push(gi),this.hitDetectionInstructions.push(gi)),this.endGeometry(e)}drawPolygon(t,e){let i=this.state,r=i.fillStyle,o=i.strokeStyle;if(r===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([it.SET_FILL_STYLE,ve]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([it.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);let a=t.getEnds(),h=t.getOrientedFlatCoordinates(),c=t.getStride();this.drawFlatCoordinatess_(h,0,a,c),this.endGeometry(e)}drawMultiPolygon(t,e){let i=this.state,r=i.fillStyle,o=i.strokeStyle;if(r===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([it.SET_FILL_STYLE,ve]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([it.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);let a=t.getEndss(),h=t.getOrientedFlatCoordinates(),c=t.getStride(),d=0;for(let m=0,p=a.length;m<p;++m)d=this.drawFlatCoordinatess_(h,d,a[m],c);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;let t=this.tolerance;if(t!==0){let e=this.coordinates;for(let i=0,r=e.length;i<r;++i)e[i]=on(e[i],t)}return super.finish()}setFillStrokeStyles_(){let t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}},Hl=Kl;function dm(n,t,e,i,r){let o=e,a=e,h=0,c=0,d=e,m,p,E,M,b,w,v,S,R,I;for(p=e;p<i;p+=r){let A=t[p],L=t[p+1];b!==void 0&&(R=A-b,I=L-w,M=Math.sqrt(R*R+I*I),v!==void 0&&(c+=E,m=Math.acos((v*R+S*I)/(E*M)),m>n&&(c>h&&(h=c,o=d,a=p),c=0,d=p-r)),E=M,v=R,S=I),b=A,w=L}return c+=M,c>h?[d,p]:[o,a]}var wr={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Zl=class extends pi{constructor(t,e,i,r){super(t,e,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){let t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){let i=this.textFillState_,r=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!i&&!r)return;let a=this.coordinates,h=a.length,c=t.getType(),d=null,m=t.getStride();if(o.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!Nt(this.getBufferedMaxExtent(),t.getExtent()))return;let p;if(d=t.getFlatCoordinates(),c=="LineString")p=[d.length];else if(c=="MultiLineString")p=t.getEnds();else if(c=="Polygon")p=t.getEnds().slice(0,1);else if(c=="MultiPolygon"){let w=t.getEndss();p=[];for(let v=0,S=w.length;v<S;++v)p.push(w[v][0])}this.beginGeometry(t,e);let E=o.textAlign,M=0,b;for(let w=0,v=p.length;w<v;++w){if(E==null){let R=dm(o.maxAngle,d,M,p[w],m);M=R[0],b=R[1]}else b=p[w];for(let R=M;R<b;R+=m)a.push(d[R],d[R+1]);let S=a.length;M=p[w],this.drawChars_(h,S),h=S}this.endGeometry(e)}else{let p=o.overflow?null:[];switch(c){case"Point":case"MultiPoint":d=t.getFlatCoordinates();break;case"LineString":d=t.getFlatMidpoint();break;case"Circle":d=t.getCenter();break;case"MultiLineString":d=t.getFlatMidpoints(),m=2;break;case"Polygon":d=t.getFlatInteriorPoint(),o.overflow||p.push(d[2]/this.resolution),m=3;break;case"MultiPolygon":let v=t.getFlatInteriorPoints();d=[];for(let S=0,R=v.length;S<R;S+=3)o.overflow||p.push(v[S+2]/this.resolution),d.push(v[S],v[S+1]);if(d.length===0)return;m=2;break;default:}let E=this.appendFlatPointCoordinates(d,m);if(E===h)return;if(p&&(E-h)/2!==d.length/m){let v=h/2;p=p.filter((S,R)=>{let I=a[(v+R)*2]===d[R*m]&&a[(v+R)*2+1]===d[R*m+1];return I||--v,I})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let M=o.padding;if(M!=Fi&&(o.scale[0]<0||o.scale[1]<0)){let v=o.padding[0],S=o.padding[1],R=o.padding[2],I=o.padding[3];o.scale[0]<0&&(S=-S,I=-I),o.scale[1]<0&&(v=-v,R=-R),M=[v,S,R,I]}let b=this.pixelRatio;this.instructions.push([it.DRAW_IMAGE,h,E,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,M==Fi?Fi:M.map(function(v){return v*b}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,p]);let w=1/b;this.hitDetectionInstructions.push([it.DRAW_IMAGE,h,E,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[w,w],NaN,void 0,this.declutterImageWithText_,M,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,p]),this.endGeometry(e)}}saveTextStates_(){let t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));let o=this.textKey_;o in this.textStates||(this.textStates[o]={font:e.font,textAlign:e.textAlign||nn,justify:e.justify,textBaseline:e.textBaseline||wn,scale:e.scale});let a=this.fillKey_;i&&(a in this.fillStates||(this.fillStates[a]={fillStyle:i.fillStyle}))}drawChars_(t,e){let i=this.textStrokeState_,r=this.textState_,o=this.strokeKey_,a=this.textKey_,h=this.fillKey_;this.saveTextStates_();let c=this.pixelRatio,d=wr[r.textBaseline],m=this.textOffsetY_*c,p=this.text_,E=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([it.DRAW_CHARS,t,e,d,r.overflow,h,r.maxAngle,c,m,o,E*c,p,a,1]),this.hitDetectionInstructions.push([it.DRAW_CHARS,t,e,d,r.overflow,h,r.maxAngle,1,m,o,E,p,a,1/c])}setTextStyle(t,e){let i,r,o;if(!t)this.text_="";else{let a=t.getFill();a?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Se(a.getColor()||ve)):(r=null,this.textFillState_=r);let h=t.getStroke();if(!h)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);let b=h.getLineDash(),w=h.getLineDashOffset(),v=h.getWidth(),S=h.getMiterLimit();o.lineCap=h.getLineCap()||Rn,o.lineDash=b?b.slice():Ai,o.lineDashOffset=w===void 0?Li:w,o.lineJoin=h.getLineJoin()||li,o.lineWidth=v===void 0?ki:v,o.miterLimit=S===void 0?Pi:S,o.strokeStyle=Se(h.getColor()||Oi)}i=this.textState_;let c=t.getFont()||bo;bd(c);let d=t.getScaleArray();i.overflow=t.getOverflow(),i.font=c,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||wn,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Fi,i.scale=d===void 0?[1,1]:d;let m=t.getOffsetX(),p=t.getOffsetY(),E=t.getRotateWithView(),M=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=m===void 0?0:m,this.textOffsetY_=p===void 0?0:p,this.textRotateWithView_=E===void 0?!1:E,this.textRotation_=M===void 0?0:M,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:lt(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+lt(r.fillStyle):""}this.declutterImageWithText_=e}},fm=Zl;var vx={Circle:Hl,Default:pi,Image:cm,LineString:um,Polygon:Hl,Text:fm},Jl=class{constructor(t,e,i,r){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){let t={};for(let e in this.buildersByZIndex_){t[e]=t[e]||{};let i=this.buildersByZIndex_[e];for(let r in i){let o=i[r].finish();t[e][r]=o}}return t}getBuilder(t,e){let i=t!==void 0?t.toString():"0",r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let o=r[e];if(o===void 0){let a=vx[e];o=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[e]=o}return o}},$l=Jl;var Ql=class extends so{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return ct()}getData(t){return null}prepareFrame(t){return ct()}renderFrame(t,e){return ct()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return function(r,o){let a=this.loadedTileCallback.bind(this,i,r);return t.forEachLoadedTile(e,r,o,a)}.bind(this)}forEachFeatureAtCoordinate(t,e,i,r,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===At.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=At.LOADED&&e!=At.ERROR&&t.addEventListener(K.CHANGE,this.boundHandleImageChange_),e==At.IDLE&&(t.load(),e=t.getState()),e==At.LOADED}renderIfReadyAndVisible(){let t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},mm=Ql;var ec=[],Ir=null;function Mx(){let n=document.createElement("canvas");n.width=1,n.height=1,Ir=n.getContext("2d")}var tc=class extends mm{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=se(),this.pixelTransform=se(),this.inversePixelTransform=se(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){Ir||Mx(),Ir.clearRect(0,0,1,1);let r;try{Ir.drawImage(t,e,i,1,1,0,0,1,1),r=Ir.getImageData(0,0,1,1).data}catch{return Ir=null,null}return r}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,e,i){let r=this.getLayer().getClassName(),o,a;if(t&&t.className===r&&(!i||t&&t.style.backgroundColor&&xe(Sn(t.style.backgroundColor),Sn(i)))){let h=t.firstElementChild;h instanceof HTMLCanvasElement&&(a=h.getContext("2d"))}if(a&&a.canvas.style.transform===e?(this.container=t,this.context=a,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){o=document.createElement("div"),o.className=r;let h=o.style;h.position="absolute",h.width="100%",h.height="100%",a=Gt();let c=a.canvas;o.appendChild(c),h=c.style,h.position="absolute",h.left="0",h.transformOrigin="top left",this.container=o,this.context=a}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){let r=Pe(i),o=hr(i),a=ar(i),h=or(i);Ot(e.coordinateToPixelTransform,r),Ot(e.coordinateToPixelTransform,o),Ot(e.coordinateToPixelTransform,a),Ot(e.coordinateToPixelTransform,h);let c=this.inversePixelTransform;Ot(c,r),Ot(c,o),Ot(c,a),Ot(c,h),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(h[0]),Math.round(h[1])),t.clip()}dispatchRenderEvent_(t,e,i){let r=this.getLayer();if(r.hasListener(t)){let o=new vo(t,this.inversePixelTransform,i,e);r.dispatchEvent(o)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(Fe.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(Fe.POSTRENDER,t,e)}getRenderTransform(t,e,i,r,o,a,h){let c=o/2,d=a/2,m=r/e,p=-m,E=-t[0]+h,M=-t[1];return me(this.tempTransform,c,d,m,p,-i,E,M)}disposeInternal(){delete this.frameState,super.disposeInternal()}},ia=tc;function gm(n,t,e,i,r,o,a,h,c,d,m,p){let E=n[t],M=n[t+1],b=0,w=0,v=0,S=0;function R(){b=E,w=M,t+=i,E=n[t],M=n[t+1],S+=v,v=Math.sqrt((E-b)*(E-b)+(M-w)*(M-w))}do R();while(t<e-i&&S+v<o);let I=v===0?0:(o-S)/v,A=Ii(b,E,I),L=Ii(w,M,I),F=t-i,D=S,B=o+h*c(d,r,m);for(;t<e-i&&S+v<B;)R();I=v===0?0:(B-S)/v;let q=Ii(b,E,I),W=Ii(w,M,I),Z;if(p){let V=[A,L,q,W];Po(V,0,4,2,p,V,V),Z=V[0]>V[2]}else Z=A>q;let nt=Math.PI,st=[],bt=F+i===t;t=F,v=0,S=D,E=n[t],M=n[t+1];let et;if(bt){R(),et=Math.atan2(M-w,E-b),Z&&(et+=et>0?-nt:nt);let V=(q+A)/2,H=(W+L)/2;return st[0]=[V,H,(B-o)/2,et,r],st}r=r.replace(/\n/g," ");for(let V=0,H=r.length;V<H;){R();let J=Math.atan2(M-w,E-b);if(Z&&(J+=J>0?-nt:nt),et!==void 0){let xt=J-et;if(xt+=xt>nt?-2*nt:xt<-nt?2*nt:0,Math.abs(xt)>a)return null}et=J;let _t=V,ft=0;for(;V<H;++V){let xt=Z?H-V-1:V,St=h*c(d,r[xt],m);if(t+i<e&&S+v<o+ft+St/2)break;ft+=St}if(V===_t)continue;let Lt=Z?r.substring(H-_t,H-V):r.substring(_t,V);I=v===0?0:(o+ft/2-S)/v;let U=Ii(b,E,I),ce=Ii(w,M,I);st.push([U,ce,ft/2,J,Lt]),o+=ft}return st}function pm(n,t,e,i){let r=n[t],o=n[t+1],a=0;for(let h=t+i;h<e;h+=i){let c=n[h],d=n[h+1];a+=Math.sqrt((c-r)*(c-r)+(d-o)*(d-o)),r=c,o=d}return a}var Ar=Ft(),un=[],qi=[],Wi=[],dn=[];function _m(n){return n[3].declutterBox}var Sx=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function ym(n,t){return(t==="start"||t==="end")&&!Sx.test(n)&&(t=t==="start"?"left":"right"),wr[t]}function Cx(n,t,e){return e>0&&n.push(`
`,""),n.push(t,""),n}var ic=class{constructor(t,e,i,r){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=se(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,r){let o=t+e+i+r;if(this.labels_[o])return this.labels_[o];let a=r?this.strokeStates[r]:null,h=i?this.fillStates[i]:null,c=this.textStates[e],d=this.pixelRatio,m=[c.scale[0]*d,c.scale[1]*d],p=Array.isArray(t),E=c.justify?wr[c.justify]:ym(Array.isArray(t)?t[0]:t,c.textAlign||nn),M=r&&a.lineWidth?a.lineWidth:0,b=p?t:t.split(`
`).reduce(Cx,[]),{width:w,height:v,widths:S,heights:R,lineWidths:I}=Rd(c,b),A=w+M,L=[],F=(A+2)*m[0],D=(v+M)*m[1],B={width:F<0?Math.floor(F):Math.ceil(F),height:D<0?Math.floor(D):Math.ceil(D),contextInstructions:L};(m[0]!=1||m[1]!=1)&&L.push("scale",m),r&&(L.push("strokeStyle",a.strokeStyle),L.push("lineWidth",M),L.push("lineCap",a.lineCap),L.push("lineJoin",a.lineJoin),L.push("miterLimit",a.miterLimit),L.push("setLineDash",[a.lineDash]),L.push("lineDashOffset",a.lineDashOffset)),i&&L.push("fillStyle",h.fillStyle),L.push("textBaseline","middle"),L.push("textAlign","center");let q=.5-E,W=E*A+q*M,Z=[],nt=[],st=0,bt=0,et=0,V=0,H;for(let J=0,_t=b.length;J<_t;J+=2){let ft=b[J];if(ft===`
`){bt+=st,st=0,W=E*A+q*M,++V;continue}let Lt=b[J+1]||c.font;Lt!==H&&(r&&Z.push("font",Lt),i&&nt.push("font",Lt),H=Lt),st=Math.max(st,R[et]);let U=[ft,W+q*S[et]+E*(S[et]-I[V]),.5*(M+st)+bt];W+=S[et],r&&Z.push("strokeText",U),i&&nt.push("fillText",U),++et}return Array.prototype.push.apply(L,Z),Array.prototype.push.apply(L,nt),this.labels_[o]=B,B}replayTextBackground_(t,e,i,r,o,a,h){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,o),t.lineTo.apply(t,e),a&&(this.alignFill_=a[2],this.fill_(t)),h&&(this.setStrokeStyle_(t,h),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,r,o,a,h,c,d,m,p,E,M,b,w,v){h*=E[0],c*=E[1];let S=i-h,R=r-c,I=o+d>t?t-d:o,A=a+m>e?e-m:a,L=b[3]+I*E[0]+b[1],F=b[0]+A*E[1]+b[2],D=S-b[3],B=R-b[0];(w||p!==0)&&(un[0]=D,dn[0]=D,un[1]=B,qi[1]=B,qi[0]=D+L,Wi[0]=qi[0],Wi[1]=B+F,dn[1]=Wi[1]);let q;return p!==0?(q=me(se(),i,r,1,1,p,-i,-r),Ot(q,un),Ot(q,qi),Ot(q,Wi),Ot(q,dn),Ee(Math.min(un[0],qi[0],Wi[0],dn[0]),Math.min(un[1],qi[1],Wi[1],dn[1]),Math.max(un[0],qi[0],Wi[0],dn[0]),Math.max(un[1],qi[1],Wi[1],dn[1]),Ar)):Ee(Math.min(D,D+L),Math.min(B,B+F),Math.max(D,D+L),Math.max(B,B+F),Ar),M&&(S=Math.round(S),R=Math.round(R)),{drawImageX:S,drawImageY:R,drawImageW:I,drawImageH:A,originX:d,originY:m,declutterBox:{minX:Ar[0],minY:Ar[1],maxX:Ar[2],maxY:Ar[3],value:v},canvasTransform:q,scale:E}}replayImageOrLabel_(t,e,i,r,o,a,h){let c=!!(a||h),d=r.declutterBox,m=t.canvas,p=h?h[2]*r.scale[0]/2:0;return d.minX-p<=m.width/e&&d.maxX+p>=0&&d.minY-p<=m.height/e&&d.maxY+p>=0&&(c&&this.replayTextBackground_(t,un,qi,Wi,dn,a,h),wd(t,r.canvasTransform,o,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(t){if(this.alignFill_){let e=Ot(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,r){let o=this.textStates[e],a=this.createLabel(t,e,r,i),h=this.strokeStates[i],c=this.pixelRatio,d=ym(Array.isArray(t)?t[0]:t,o.textAlign||nn),m=wr[o.textBaseline||wn],p=h&&h.lineWidth?h.lineWidth:0,E=a.width/c-2*o.scale[0],M=d*E+2*(.5-d)*p,b=m*a.height/c+2*(.5-m)*p;return{label:a,anchorX:M,anchorY:b}}execute_(t,e,i,r,o,a,h,c){let d;this.pixelCoordinates_&&xe(i,this.renderedTransform_)?d=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),d=Ne(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),id(this.renderedTransform_,i));let m=0,p=r.length,E=0,M,b,w,v,S,R,I,A,L,F,D,B,q=0,W=0,Z=null,nt=null,st=this.coordinateCache_,bt=this.viewRotation_,et=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,V={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:bt},H=this.instructions!=r||this.overlaps?0:200,J,_t,ft,Lt;for(;m<p;){let U=r[m];switch(U[0]){case it.BEGIN_GEOMETRY:J=U[1],Lt=U[3],J.getGeometry()?h!==void 0&&!Nt(h,Lt.getExtent())?m=U[2]+1:++m:m=U[2];break;case it.BEGIN_PATH:q>H&&(this.fill_(t),q=0),W>H&&(t.stroke(),W=0),!q&&!W&&(t.beginPath(),v=NaN,S=NaN),++m;break;case it.CIRCLE:E=U[1];let xt=d[E],St=d[E+1],ei=d[E+2],ue=d[E+3],jt=ei-xt,Ie=ue-St,Wt=Math.sqrt(jt*jt+Ie*Ie);t.moveTo(xt+Wt,St),t.arc(xt,St,Wt,0,2*Math.PI,!0),++m;break;case it.CLOSE_PATH:t.closePath(),++m;break;case it.CUSTOM:E=U[1],M=U[2];let mn=U[3],_i=U[4],zi=U.length==6?U[5]:void 0;V.geometry=mn,V.feature=J,m in st||(st[m]=[]);let Be=st[m];zi?zi(d,E,M,2,Be):(Be[0]=d[E],Be[1]=d[E+1],Be.length=2),_i(Be,V),++m;break;case it.DRAW_IMAGE:E=U[1],M=U[2],A=U[3],b=U[4],w=U[5];let gn=U[6],Ae=U[7],qn=U[8],Wn=U[9],zn=U[10],yi=U[11],zr=U[12],ee=U[13],pe=U[14],be=U[15];if(!A&&U.length>=20){L=U[19],F=U[20],D=U[21],B=U[22];let It=this.drawLabelWithPointPlacement_(L,F,D,B);A=It.label,U[3]=A;let mt=U[23];b=(It.anchorX-mt)*this.pixelRatio,U[4]=b;let Ht=U[24];w=(It.anchorY-Ht)*this.pixelRatio,U[5]=w,gn=A.height,U[6]=gn,ee=A.width,U[13]=ee}let Ue;U.length>25&&(Ue=U[25]);let Te,xi,ii;U.length>17?(Te=U[16],xi=U[17],ii=U[18]):(Te=Fi,xi=!1,ii=!1),zn&&et?yi+=bt:!zn&&!et&&(yi-=bt);let Xi=0;for(;E<M;E+=2){if(Ue&&Ue[Xi++]<ee/this.pixelRatio)continue;let It=this.calculateImageOrLabelDimensions_(A.width,A.height,d[E],d[E+1],ee,gn,b,w,qn,Wn,yi,zr,o,Te,xi||ii,J),mt=[t,e,A,It,Ae,xi?Z:null,ii?nt:null];if(c){if(pe==="none")continue;if(pe==="obstacle"){c.insert(It.declutterBox);continue}else{let Ht,vt;if(be){let Tt=M-E;if(!be[Tt]){be[Tt]=mt;continue}if(Ht=be[Tt],delete be[Tt],vt=_m(Ht),c.collides(vt))continue}if(c.collides(It.declutterBox))continue;Ht&&(c.insert(vt),this.replayImageOrLabel_.apply(this,Ht)),c.insert(It.declutterBox)}}this.replayImageOrLabel_.apply(this,mt)}++m;break;case it.DRAW_CHARS:let Ei=U[1],kt=U[2],Xr=U[3],vi=U[4];B=U[5];let Mi=U[6],pn=U[7],Vs=U[8];D=U[9];let _n=U[10];L=U[11],F=U[12];let Yi=[U[13],U[13]],G=this.textStates[F],yn=G.font,xn=[G.scale[0]*pn,G.scale[1]*pn],En;yn in this.widths_?En=this.widths_[yn]:(En={},this.widths_[yn]=En);let z=pm(d,Ei,kt,2),zt=Math.abs(xn[0])*dh(yn,L,En);if(vi||zt<=z){let It=this.textStates[F].textAlign,mt=(z-zt)*wr[It],Ht=gm(d,Ei,kt,2,L,mt,Mi,Math.abs(xn[0]),dh,yn,En,et?0:this.viewRotation_);t:if(Ht){let vt=[],Tt,Xn,vn,Zt,Jt;if(D)for(Tt=0,Xn=Ht.length;Tt<Xn;++Tt){Jt=Ht[Tt],vn=Jt[4],Zt=this.createLabel(vn,F,"",D),b=Jt[2]+(xn[0]<0?-_n:_n),w=Xr*Zt.height+(.5-Xr)*2*_n*xn[1]/xn[0]-Vs;let je=this.calculateImageOrLabelDimensions_(Zt.width,Zt.height,Jt[0],Jt[1],Zt.width,Zt.height,b,w,0,0,Jt[3],Yi,!1,Fi,!1,J);if(c&&c.collides(je.declutterBox))break t;vt.push([t,e,Zt,je,1,null,null])}if(B)for(Tt=0,Xn=Ht.length;Tt<Xn;++Tt){Jt=Ht[Tt],vn=Jt[4],Zt=this.createLabel(vn,F,B,""),b=Jt[2],w=Xr*Zt.height-Vs;let je=this.calculateImageOrLabelDimensions_(Zt.width,Zt.height,Jt[0],Jt[1],Zt.width,Zt.height,b,w,0,0,Jt[3],Yi,!1,Fi,!1,J);if(c&&c.collides(je.declutterBox))break t;vt.push([t,e,Zt,je,1,null,null])}c&&c.load(vt.map(_m));for(let je=0,Ba=vt.length;je<Ba;++je)this.replayImageOrLabel_.apply(this,vt[je])}}++m;break;case it.END_GEOMETRY:if(a!==void 0){J=U[1];let It=a(J,Lt);if(It)return It}++m;break;case it.FILL:H?q++:this.fill_(t),++m;break;case it.MOVE_TO_LINE_TO:for(E=U[1],M=U[2],_t=d[E],ft=d[E+1],R=_t+.5|0,I=ft+.5|0,(R!==v||I!==S)&&(t.moveTo(_t,ft),v=R,S=I),E+=2;E<M;E+=2)_t=d[E],ft=d[E+1],R=_t+.5|0,I=ft+.5|0,(E==M-2||R!==v||I!==S)&&(t.lineTo(_t,ft),v=R,S=I);++m;break;case it.SET_FILL_STYLE:Z=U,this.alignFill_=U[2],q&&(this.fill_(t),q=0,W&&(t.stroke(),W=0)),t.fillStyle=U[1],++m;break;case it.SET_STROKE_STYLE:nt=U,W&&(t.stroke(),W=0),this.setStrokeStyle_(t,U),++m;break;case it.STROKE:H?W++:t.stroke(),++m;break;default:++m;break}}q&&this.fill_(t),W&&t.stroke()}execute(t,e,i,r,o,a){this.viewRotation_=r,this.execute_(t,e,i,this.instructions,o,void 0,void 0,a)}executeHitDetection(t,e,i,r,o){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,r,o)}},xm=ic;var nc=["Polygon","Circle","LineString","Image","Text","Default"],sc=class{constructor(t,e,i,r,o,a){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=se(),this.createExecutors_(o)}clip(t,e){let i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(let e in t){let i=this.executorsByZIndex_[e];i===void 0&&(i={},this.executorsByZIndex_[e]=i);let r=t[e];for(let o in r){let a=r[o];i[o]=new xm(this.resolution_,this.pixelRatio_,this.overlaps_,a)}}}hasExecutors(t){for(let e in this.executorsByZIndex_){let i=this.executorsByZIndex_[e];for(let r=0,o=t.length;r<o;++r)if(t[r]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,r,o,a){r=Math.round(r);let h=r*2+1,c=me(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-i,-t[0],-t[1]),d=!this.hitDetectionContext_;d&&(this.hitDetectionContext_=Gt(h,h));let m=this.hitDetectionContext_;m.canvas.width!==h||m.canvas.height!==h?(m.canvas.width=h,m.canvas.height=h):d||m.clearRect(0,0,h,h);let p;this.renderBuffer_!==void 0&&(p=Ft(),Mn(p,t),Ti(p,e*(this.renderBuffer_+r),p));let E=bx(r),M;function b(L,F){let D=m.getImageData(0,0,h,h).data;for(let B=0,q=E.length;B<q;B++)if(D[E[B]]>0){if(!a||M!=="Image"&&M!=="Text"||a.includes(L)){let W=(E[B]-3)/4,Z=r-W%h,nt=r-(W/h|0),st=o(L,F,Z*Z+nt*nt);if(st)return st}m.clearRect(0,0,h,h);break}}let w=Object.keys(this.executorsByZIndex_).map(Number);w.sort(ri);let v,S,R,I,A;for(v=w.length-1;v>=0;--v){let L=w[v].toString();for(R=this.executorsByZIndex_[L],S=nc.length-1;S>=0;--S)if(M=nc[S],I=R[M],I!==void 0&&(A=I.executeHitDetection(m,c,i,b,p),A))return A}}getClipCoords(t){let e=this.maxExtent_;if(!e)return null;let i=e[0],r=e[1],o=e[2],a=e[3],h=[i,r,i,a,o,a,o,r];return Ne(h,0,8,2,t,h),h}isEmpty(){return bi(this.executorsByZIndex_)}execute(t,e,i,r,o,a,h){let c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(ri),this.maxExtent_&&(t.save(),this.clip(t,i)),a=a||nc;let d,m,p,E,M,b;for(h&&c.reverse(),d=0,m=c.length;d<m;++d){let w=c[d].toString();for(M=this.executorsByZIndex_[w],p=0,E=a.length;p<E;++p){let v=a[p];b=M[v],b!==void 0&&b.execute(t,e,i,r,o,h)}}this.maxExtent_&&t.restore()}},rc={};function bx(n){if(rc[n]!==void 0)return rc[n];let t=n*2+1,e=n*n,i=new Array(e+1);for(let o=0;o<=n;++o)for(let a=0;a<=n;++a){let h=o*o+a*a;if(h>e)break;let c=i[h];c||(c=[],i[h]=c),c.push(((n+o)*t+(n+a))*4+3),o>0&&c.push(((n-o)*t+(n+a))*4+3),a>0&&(c.push(((n+o)*t+(n-a))*4+3),o>0&&c.push(((n-o)*t+(n-a))*4+3))}let r=[];for(let o=0,a=i.length;o<a;++o)i[o]&&r.push(...i[o]);return rc[n]=r,r}var oc=sc;var ac=class extends ea{constructor(t,e,i,r,o,a,h){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=r,this.viewRotation_=o,this.squaredTolerance_=a,this.userTransform_=h,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=se()}drawImages_(t,e,i,r){if(!this.image_)return;let o=Ne(t,e,i,r,this.transform_,this.pixelCoordinates_),a=this.context_,h=this.tmpLocalTransform_,c=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=c*this.imageOpacity_);let d=this.imageRotation_;this.imageRotateWithView_&&(d+=this.viewRotation_);for(let m=0,p=o.length;m<p;m+=2){let E=o[m]-this.imageAnchorX_,M=o[m+1]-this.imageAnchorY_;if(d!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){let b=E+this.imageAnchorX_,w=M+this.imageAnchorY_;me(h,b,w,1,1,d,-b,-w),a.setTransform.apply(a,h),a.translate(b,w),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.setTransform(1,0,0,1,0,0)}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,E,M,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=c)}drawText_(t,e,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);let o=Ne(t,e,i,r,this.transform_,this.pixelCoordinates_),a=this.context_,h=this.textRotation_;for(this.textRotateWithView_&&(h+=this.viewRotation_);e<i;e+=r){let c=o[e]+this.textOffsetX_,d=o[e+1]+this.textOffsetY_;h!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.translate(c-this.textOffsetX_,d-this.textOffsetY_),a.rotate(h),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&a.strokeText(this.text_,c,d),this.textFillState_&&a.fillText(this.text_,c,d))}}moveToLineTo_(t,e,i,r,o){let a=this.context_,h=Ne(t,e,i,r,this.transform_,this.pixelCoordinates_);a.moveTo(h[0],h[1]);let c=h.length;o&&(c-=2);for(let d=2;d<c;d+=2)a.lineTo(h[d],h[d+1]);return o&&a.closePath(),i}drawRings_(t,e,i,r){for(let o=0,a=i.length;o<a;++o)e=this.moveToLineTo_(t,e,i[o],r,!0);return e}drawCircle(t){if(!!Nt(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=tf(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],r=e[3]-e[1],o=Math.sqrt(i*i+r*r),a=this.context_;a.beginPath(),a.arc(e[0],e[1],o,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break;default:}}drawFeature(t,e){let i=e.getGeometryFunction()(t);!i||!Nt(this.extent_,i.getExtent())||(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){let e=t.getGeometriesArray();for(let i=0,r=e.length;i<r;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Nt(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){let e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getExtent();if(!!Nt(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let i=this.context_,r=t.getFlatCoordinates(),o=0,a=t.getEnds(),h=t.getStride();i.beginPath();for(let c=0,d=a.length;c<d;++c)o=this.moveToLineTo_(r,o,a[c],h,!1);i.stroke()}if(this.text_!==""){let i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Nt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){let e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Nt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=this.context_,i=t.getOrientedFlatCoordinates(),r=0,o=t.getEndss(),a=t.getStride();e.beginPath();for(let h=0,c=o.length;h<c;++h){let d=o[h];r=this.drawRings_(i,r,d,a)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){let e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){let e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){let e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),xe(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){let e=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:nn;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=r&&(i.textAlign=r,e.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{let i=t.getColor();this.fillState_={fillStyle:Se(i||ve)}}if(!e)this.strokeState_=null;else{let i=e.getColor(),r=e.getLineCap(),o=e.getLineDash(),a=e.getLineDashOffset(),h=e.getLineJoin(),c=e.getWidth(),d=e.getMiterLimit(),m=o||Ai;this.strokeState_={lineCap:r!==void 0?r:Rn,lineDash:this.pixelRatio_===1?m:m.map(p=>p*this.pixelRatio_),lineDashOffset:(a||Li)*this.pixelRatio_,lineJoin:h!==void 0?h:li,lineWidth:(c!==void 0?c:ki)*this.pixelRatio_,miterLimit:d!==void 0?d:Pi,strokeStyle:Se(i||Oi)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}let i=t.getPixelRatio(this.pixelRatio_),r=t.getAnchor(),o=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();let a=t.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/i,a[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(!t)this.text_="";else{let e=t.getFill();if(!e)this.textFillState_=null;else{let M=e.getColor();this.textFillState_={fillStyle:Se(M||ve)}}let i=t.getStroke();if(!i)this.textStrokeState_=null;else{let M=i.getColor(),b=i.getLineCap(),w=i.getLineDash(),v=i.getLineDashOffset(),S=i.getLineJoin(),R=i.getWidth(),I=i.getMiterLimit();this.textStrokeState_={lineCap:b!==void 0?b:Rn,lineDash:w||Ai,lineDashOffset:v||Li,lineJoin:S!==void 0?S:li,lineWidth:R!==void 0?R:ki,miterLimit:I!==void 0?I:Pi,strokeStyle:Se(M||Oi)}}let r=t.getFont(),o=t.getOffsetX(),a=t.getOffsetY(),h=t.getRotateWithView(),c=t.getRotation(),d=t.getScaleArray(),m=t.getText(),p=t.getTextAlign(),E=t.getTextBaseline();this.textState_={font:r!==void 0?r:bo,textAlign:p!==void 0?p:nn,textBaseline:E!==void 0?E:wn},this.text_=m!==void 0?Array.isArray(m)?m.reduce((M,b,w)=>M+=w%2?" ":b,""):m:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=h!==void 0?h:!1,this.textRotation_=c!==void 0?c:0,this.textScale_=[this.pixelRatio_*d[0],this.pixelRatio_*d[1]]}}},Em=ac;var Je=.5;function vm(n,t,e,i,r,o,a){let h=n[0]*Je,c=n[1]*Je,d=Gt(h,c);d.imageSmoothingEnabled=!1;let m=d.canvas,p=new Em(d,Je,r,null,a),E=e.length,M=Math.floor((256*256*256-1)/E),b={};for(let v=1;v<=E;++v){let S=e[v-1],R=S.getStyleFunction()||i;if(!i)continue;let I=R(S,o);if(!I)continue;Array.isArray(I)||(I=[I]);let L="#"+("000000"+(v*M).toString(16)).slice(-6);for(let F=0,D=I.length;F<D;++F){let B=I[F],q=B.getGeometryFunction()(S);if(!q||!Nt(r,q.getExtent()))continue;let W=B.clone(),Z=W.getFill();Z&&Z.setColor(L);let nt=W.getStroke();nt&&(nt.setColor(L),nt.setLineDash(null)),W.setText(void 0);let st=B.getImage();if(st&&st.getOpacity()!==0){let V=st.getImageSize();if(!V)continue;let H=Gt(V[0],V[1],void 0,{alpha:!1}),J=H.canvas;H.fillStyle=L,H.fillRect(0,0,J.width,J.height),W.setImage(new Ui({img:J,imgSize:V,anchor:st.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:st.getOrigin(),opacity:1,size:st.getSize(),scale:st.getScale(),rotation:st.getRotation(),rotateWithView:st.getRotateWithView()}))}let bt=W.getZIndex()||0,et=b[bt];et||(et={},b[bt]=et,et.Polygon=[],et.Circle=[],et.LineString=[],et.Point=[]),et[q.getType().replace("Multi","")].push(q,W)}}let w=Object.keys(b).map(Number).sort(ri);for(let v=0,S=w.length;v<S;++v){let R=b[w[v]];for(let I in R){let A=R[I];for(let L=0,F=A.length;L<F;L+=2){p.setStyle(A[L+1]);for(let D=0,B=t.length;D<B;++D)p.setTransform(t[D]),p.drawGeometry(A[L])}}}return d.getImageData(0,0,m.width,m.height)}function Mm(n,t,e){let i=[];if(e){let r=Math.floor(Math.round(n[0])*Je),o=Math.floor(Math.round(n[1])*Je),a=(pt(r,0,e.width-1)+pt(o,0,e.height-1)*e.width)*4,h=e.data[a],c=e.data[a+1],m=e.data[a+2]+256*(c+256*h),p=Math.floor((256*256*256-1)/t.length);m&&m%p===0&&i.push(t[m/p-1])}return i}var Tx=.5,Sm={Point:Ox,LineString:Ax,Polygon:kx,MultiPoint:Fx,MultiLineString:Lx,MultiPolygon:Px,GeometryCollection:Ix,Circle:Rx};function Cm(n,t){return parseInt(lt(n),10)-parseInt(lt(t),10)}function bm(n,t){let e=na(n,t);return e*e}function na(n,t){return Tx*n/t}function Rx(n,t,e,i,r){let o=e.getFill(),a=e.getStroke();if(o||a){let c=n.getBuilder(e.getZIndex(),"Circle");c.setFillStrokeStyle(o,a),c.drawCircle(t,i)}let h=e.getText();if(h&&h.getText()){let c=(r||n).getBuilder(e.getZIndex(),"Text");c.setTextStyle(h),c.drawText(t,i)}}function hc(n,t,e,i,r,o,a){let h=!1,c=e.getImage();if(c){let d=c.getImageState();d==At.LOADED||d==At.ERROR?c.unlistenImageChange(r):(d==At.IDLE&&c.load(),c.listenImageChange(r),h=!0)}return wx(n,t,e,i,o,a),h}function wx(n,t,e,i,r,o){let a=e.getGeometryFunction()(t);if(!a)return;let h=a.simplifyTransformed(i,r);if(e.getRenderer())Tm(n,h,e,t);else{let d=Sm[h.getType()];d(n,h,e,t,o)}}function Tm(n,t,e,i){if(t.getType()=="GeometryCollection"){let o=t.getGeometries();for(let a=0,h=o.length;a<h;++a)Tm(n,o[a],e,i);return}n.getBuilder(e.getZIndex(),"Default").drawCustom(t,i,e.getRenderer(),e.getHitDetectionRenderer())}function Ix(n,t,e,i,r){let o=t.getGeometriesArray(),a,h;for(a=0,h=o.length;a<h;++a){let c=Sm[o[a].getType()];c(n,o[a],e,i,r)}}function Ax(n,t,e,i,r){let o=e.getStroke();if(o){let h=n.getBuilder(e.getZIndex(),"LineString");h.setFillStrokeStyle(null,o),h.drawLineString(t,i)}let a=e.getText();if(a&&a.getText()){let h=(r||n).getBuilder(e.getZIndex(),"Text");h.setTextStyle(a),h.drawText(t,i)}}function Lx(n,t,e,i,r){let o=e.getStroke();if(o){let h=n.getBuilder(e.getZIndex(),"LineString");h.setFillStrokeStyle(null,o),h.drawMultiLineString(t,i)}let a=e.getText();if(a&&a.getText()){let h=(r||n).getBuilder(e.getZIndex(),"Text");h.setTextStyle(a),h.drawText(t,i)}}function Px(n,t,e,i,r){let o=e.getFill(),a=e.getStroke();if(a||o){let c=n.getBuilder(e.getZIndex(),"Polygon");c.setFillStrokeStyle(o,a),c.drawMultiPolygon(t,i)}let h=e.getText();if(h&&h.getText()){let c=(r||n).getBuilder(e.getZIndex(),"Text");c.setTextStyle(h),c.drawText(t,i)}}function Ox(n,t,e,i,r){let o=e.getImage(),a=e.getText(),h;if(o){if(o.getImageState()!=At.LOADED)return;let c=n;if(r){let m=o.getDeclutterMode();if(m!=="none")if(c=r,m==="obstacle"){let p=n.getBuilder(e.getZIndex(),"Image");p.setImageStyle(o,h),p.drawPoint(t,i)}else a&&a.getText()&&(h={})}let d=c.getBuilder(e.getZIndex(),"Image");d.setImageStyle(o,h),d.drawPoint(t,i)}if(a&&a.getText()){let c=n;r&&(c=r);let d=c.getBuilder(e.getZIndex(),"Text");d.setTextStyle(a,h),d.drawText(t,i)}}function Fx(n,t,e,i,r){let o=e.getImage(),a=e.getText(),h;if(o){if(o.getImageState()!=At.LOADED)return;let c=n;if(r){let m=o.getDeclutterMode();if(m!=="none")if(c=r,m==="obstacle"){let p=n.getBuilder(e.getZIndex(),"Image");p.setImageStyle(o,h),p.drawMultiPoint(t,i)}else a&&a.getText()&&(h={})}let d=c.getBuilder(e.getZIndex(),"Image");d.setImageStyle(o,h),d.drawMultiPoint(t,i)}if(a&&a.getText()){let c=n;r&&(c=r);let d=c.getBuilder(e.getZIndex(),"Text");d.setTextStyle(a,h),d.drawText(t,i)}}function kx(n,t,e,i,r){let o=e.getFill(),a=e.getStroke();if(o||a){let c=n.getBuilder(e.getZIndex(),"Polygon");c.setFillStrokeStyle(o,a),c.drawPolygon(t,i)}let h=e.getText();if(h&&h.getText()){let c=(r||n).getBuilder(e.getZIndex(),"Text");c.setTextStyle(h),c.drawText(t,i)}}var lc=class extends ia{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Ft(),this.wrappedRenderedExtent_=Ft(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){let r=e.extent,o=e.viewState,a=o.center,h=o.resolution,c=o.projection,d=o.rotation,m=c.getExtent(),p=this.getLayer().getSource(),E=e.pixelRatio,M=e.viewHints,b=!(M[Kt.ANIMATING]||M[Kt.INTERACTING]),w=this.compositionContext_,v=Math.round(e.size[0]*E),S=Math.round(e.size[1]*E),R=p.getWrapX()&&c.canWrapX(),I=R?gt(m):null,A=R?Math.ceil((r[2]-m[2])/I)+1:1,L=R?Math.floor((r[0]-m[0])/I):0;do{let F=this.getRenderTransform(a,h,d,E,v,S,L*I);t.execute(w,1,F,d,b,void 0,i)}while(++L<A)}setupCompositionContext_(){if(this.opacity_!==1){let t=Gt(this.context.canvas.width,this.context.canvas.height,ec);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){let t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,Mo(this.compositionContext_),ec.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){let i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];nd(this.pixelTransform,1/i,1/i),rr(this.inversePixelTransform,this.pixelTransform);let o=co(this.pixelTransform);this.useContainer(e,o,this.getBackground(t));let a=this.context,h=a.canvas,c=this.replayGroup_,d=this.declutterExecutorGroup;if((!c||c.isEmpty())&&(!d||d.isEmpty()))return null;let m=Math.round(t.size[0]*i),p=Math.round(t.size[1]*i);h.width!=m||h.height!=p?(h.width=m,h.height=p,h.style.transform!==o&&(h.style.transform=o)):this.containerReused||a.clearRect(0,0,m,p),this.preRender(a,t);let E=t.viewState,M=E.projection;this.opacity_=r.opacity,this.setupCompositionContext_();let b=!1,w=!0;if(r.extent&&this.clipping){let v=Ze(r.extent,M);w=Nt(v,t.extent),b=w&&!Xe(v,t.extent),b&&this.clipUnrotated(this.compositionContext_,t,v)}return w&&this.renderWorlds(c,t),b&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(a,t),this.renderedRotation_!==E.rotation&&(this.renderedRotation_=E.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){let i=[this.context.canvas.width,this.context.canvas.height];Ot(this.pixelTransform,i);let r=this.renderedCenter_,o=this.renderedResolution_,a=this.renderedRotation_,h=this.renderedProjection_,c=this.wrappedRenderedExtent_,d=this.getLayer(),m=[],p=i[0]*Je,E=i[1]*Je;m.push(this.getRenderTransform(r,o,a,Je,p,E,0).slice());let M=d.getSource(),b=h.getExtent();if(M.getWrapX()&&h.canWrapX()&&!Xe(b,c)){let w=c[0],v=gt(b),S=0,R;for(;w<b[0];)--S,R=v*S,m.push(this.getRenderTransform(r,o,a,Je,p,E,R).slice()),w+=v;for(S=0,w=c[2];w>b[2];)++S,R=v*S,m.push(this.getRenderTransform(r,o,a,Je,p,E,R).slice()),w-=v}this.hitDetectionImageData_=vm(i,m,this.renderedFeatures_,d.getStyleFunction(),c,o,a)}e(Mm(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(t,e,i,r,o){if(!this.replayGroup_)return;let a=e.viewState.resolution,h=e.viewState.rotation,c=this.getLayer(),d={},m=function(M,b,w){let v=lt(M),S=d[v];if(S){if(S!==!0&&w<S.distanceSq){if(w===0)return d[v]=!0,o.splice(o.lastIndexOf(S),1),r(M,c,b);S.geometry=b,S.distanceSq=w}}else{if(w===0)return d[v]=!0,r(M,c,b);o.push(d[v]={feature:M,layer:c,geometry:b,distanceSq:w,callback:r})}},p,E=[this.replayGroup_];return this.declutterExecutorGroup&&E.push(this.declutterExecutorGroup),E.some(M=>p=M.forEachFeatureAtCoordinate(t,a,h,i,m,M===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(b=>b.value):null)),p}handleFontsChanged(){let t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){let e=this.getLayer(),i=e.getSource();if(!i)return!1;let r=t.viewHints[Kt.ANIMATING],o=t.viewHints[Kt.INTERACTING],a=e.getUpdateWhileAnimating(),h=e.getUpdateWhileInteracting();if(this.ready&&!a&&r||!h&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;let c=t.extent,d=t.viewState,m=d.projection,p=d.resolution,E=t.pixelRatio,M=e.getRevision(),b=e.getRenderBuffer(),w=e.getRenderOrder();w===void 0&&(w=Cm);let v=d.center.slice(),S=Ti(c,b*p),R=S.slice(),I=[S.slice()],A=m.getExtent();if(i.getWrapX()&&m.canWrapX()&&!Xe(A,t.extent)){let V=gt(A),H=Math.max(gt(S)/2,V);S[0]=A[0]-H,S[2]=A[2]+H,Eo(v,m);let J=Qa(I[0],m);J[0]<A[0]&&J[2]<A[2]?I.push([J[0]+V,J[1],J[2]+V,J[3]]):J[0]>A[0]&&J[2]>A[2]&&I.push([J[0]-V,J[1],J[2]-V,J[3]])}if(this.ready&&this.renderedResolution_==p&&this.renderedRevision_==M&&this.renderedRenderOrder_==w&&Xe(this.wrappedRenderedExtent_,S))return xe(this.renderedExtent_,R)||(this.hitDetectionImageData_=null,this.renderedExtent_=R),this.renderedCenter_=v,this.replayGroupChanged=!1,!0;this.replayGroup_=null;let L=new $l(na(p,E),S,p,E),F;this.getLayer().getDeclutter()&&(F=new $l(na(p,E),S,p,E));let D=Ao(),B;if(D){for(let V=0,H=I.length;V<H;++V){let J=I[V],_t=xr(J,m);i.loadFeatures(_t,qd(p,m),D)}B=ds(D,m)}else for(let V=0,H=I.length;V<H;++V)i.loadFeatures(I[V],p,m);let q=bm(p,E),W=!0,Z=function(V){let H,J=V.getStyleFunction()||e.getStyleFunction();if(J&&(H=J(V,p)),H){let _t=this.renderFeature(V,q,H,L,B,F);W=W&&!_t}}.bind(this),nt=xr(S,m),st=i.getFeaturesInExtent(nt);w&&st.sort(w);for(let V=0,H=st.length;V<H;++V)Z(st[V]);this.renderedFeatures_=st,this.ready=W;let bt=L.finish(),et=new oc(S,p,E,i.getOverlaps(),bt,e.getRenderBuffer());return F&&(this.declutterExecutorGroup=new oc(S,p,E,i.getOverlaps(),F.finish(),e.getRenderBuffer())),this.renderedResolution_=p,this.renderedRevision_=M,this.renderedRenderOrder_=w,this.renderedExtent_=R,this.wrappedRenderedExtent_=S,this.renderedCenter_=v,this.renderedProjection_=m,this.replayGroup_=et,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,r,o,a){if(!i)return!1;let h=!1;if(Array.isArray(i))for(let c=0,d=i.length;c<d;++c)h=hc(r,t,i[c],e,this.boundHandleStyleImageChange_,o,a)||h;else h=hc(r,t,i,e,this.boundHandleStyleImageChange_,o,a);return h}},Rm=lc;var cc=class extends lm{constructor(t){super(t)}createRenderer(){return new Rm(this)}},Lr=cc;var Fs=class extends Dt{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){let e=t;this.setGeometry(e)}else{let e=t;this.setProperties(e)}}clone(){let t=new Fs(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());let e=this.getGeometry();e&&t.setGeometry(e.clone());let i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(dt(this.geometryChangeKey_),this.geometryChangeKey_=null);let t=this.getGeometry();t&&(this.geometryChangeKey_=rt(t,K.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?Dx(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function Dx(n){if(typeof n=="function")return n;{let t;return Array.isArray(n)?t=n:(tt(typeof n.getZIndex=="function",41),t=[n]),function(){return t}}}var ra=Fs;var wm="./marker-A3NGMP7D.png";var Im="./location_icon-TW7FZ5L3.png";var ks=class extends ae{constructor(t){let e=t||{};super({element:document.createElement("div"),target:e.target});let i=e.className!==void 0?e.className:"ol-my-location ol-unselectable ol-control";i+=e.zoomSlider?" zoom-slider-exists":"",this.labelNode_=document.createElement("img"),this.labelNode_.src=Im,this.button_=document.createElement("button");let r=e.tipLabel?e.tipLabel:"Min Lokation";this.button_.setAttribute("type","button"),this.button_.title=r,this.button_.appendChild(this.labelNode_);let o=this;this.button_.onclick=function(c){c.preventDefault(),o.showMyPosition()};let a=this.element;a.className=i,a.appendChild(this.button_);let h=new Bi({image:new Ui({anchor:[.5,18],anchorXUnits:"fraction",anchorYUnits:"pixels",src:wm})});this._myLocationVector=new ta({}),this._myLocationLayer=new Lr({source:this._myLocationVector,style:h})}setMap(t){super.setMap(t),t&&t.addLayer(this._myLocationLayer)}handleNoGeolocation(){console.error("Geolocation is not supported by this browser.")}showMyPosition(){let t=this,e=function(i){let r=[i.coords.longitude,i.coords.latitude],o=An(r,"EPSG:25832"),a=new ra({geometry:new On(o),title:"Min lokation"});t._myLocationVector.clear(),t._myLocationVector.addFeature(a),t.getMap().getView().fit(t._myLocationVector.getExtent())};navigator.geolocation?navigator.geolocation.getCurrentPosition(e,function(){this.handleNoGeolocation()}):this.handleNoGeolocation()}};var Am="./dtk_skaermkort_thumb-LONXPJJE.png";var Lm="./dtk_skaermkort_daempet_thumb-IZ7F2D2P.png";var Pm="./forvaltning_thumb-ZTFM4N6X.png";var Om="./orto_foraar_thumb-QMPSHOTJ.png";var Nn=class extends ae{constructor(t){let e=t||{};super({element:document.createElement("div"),target:e.target}),this.visible=typeof e.visible>"u"?!0:e.visible;let i=e.className!==void 0?e.className:"ol-layer-switcher ol-unselectable ol-control",r=e.label!==void 0?e.label:"Skift kort";this.labelNode_=typeof r=="string"?document.createTextNode(r):r,this.button_=document.createElement("button");let o=e.tipLabel?e.tipLabel:"Skift kort";this.button_.setAttribute("type","button"),this.button_.id="layer-switcher-button",this.button_.title=o,this.button_.appendChild(this.labelNode_);let a=this;this.button_.onclick=function(c){c.preventDefault(),a.toggleShow()},this.panel1_=document.createElement("div"),this.panel1_.className="container1",this.panel2_=document.createElement("div"),this.panel2_.className="container2",this.panel1_.appendChild(this.panel2_);let h=this.element;h.className=i,this.visible&&(h.appendChild(this.button_),h.appendChild(this.panel1_))}setMap(t){super.setMap(t),t&&this.renderBackgrounds()}renderBackgrounds(){let t=null;if(!this.getMap())return;let e=this.getMap().getLayers().getArray();for(let r=0,o;r<e.length;r++)o=e[r],o.get("title")==="Base maps"&&(t=o);let i=this;for(;this.panel2_.firstChild;)this.panel2_.removeChild(this.panel2_.firstChild);t.getLayers().forEach(function(r){let o=document.createElement("div"),a=document.createElement("img"),h=document.createElement("label");o.className="wrapper",a.className="image",h.className=r.get("color"),a.appendChild(h),o.appendChild(a),o.appendChild(h),i.panel2_.appendChild(o),r.get("visible")&&a.classList.add("selected"),r.image=a,h.innerHTML=r.get("title");let c=r.get("name"),d=Am;c==="dtk_skaermkort_daempet"?d=Lm:c==="forvaltning"?d=Pm:c==="orto_foraar"&&(d=Om),a.src=d,a.onclick=function(m){m=m||window.event,i.toggleBackground(r.get("name")),m.preventDefault()},h.onclick=a.onclick})}toggleBackground(t){let e=null,i=this.getMap().getLayers().getArray();for(let r=0,o;r<i.length;r++)o=i[r],o.get("title")==="Base maps"&&(e=o);e.get("layers").getArray().forEach(function(r,o,a){r.setVisible(r.get("name")===t),r.image.classList.contains("selected")&&r.image.classList.remove("selected"),r.get("name")===t&&r.image.classList.add("selected")})}setVisible(t,e){let i=this.getMap();t.setVisible(e),e&&t.get("type")==="base"&&Nn.forEachRecursive(i,function(r,o,a){r!==t&&r.get("type")==="base"&&r.setVisible(!1)})}forEachRecursive(t,e){t.getLayers().forEach(function(i,r,o){e(i,r,o),i.getLayers&&this.forEachRecursive(i,e)})}toggleShow(t){this.panel1_.classList.contains("expanded")?(this.panel1_.classList.remove("expanded"),this.button_.classList.remove("expanded")):(this.panel1_.classList.add("expanded"),this.button_.classList.add("expanded"))}};var Ra=no(jg());var qg="./pin-TZUO4CTM.png";function k1(n){var t=this.constructor;return this.then(function(e){return t.resolve(n()).then(function(){return e})},function(e){return t.resolve(n()).then(function(){return t.reject(e)})})}var ma=k1;function D1(n){var t=this;return new t(function(e,i){if(!(n&&typeof n.length<"u"))return i(new TypeError(typeof n+" "+n+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(n);if(r.length===0)return e([]);var o=r.length;function a(c,d){if(d&&(typeof d=="object"||typeof d=="function")){var m=d.then;if(typeof m=="function"){m.call(d,function(p){a(c,p)},function(p){r[c]={status:"rejected",reason:p},--o===0&&e(r)});return}}r[c]={status:"fulfilled",value:d},--o===0&&e(r)}for(var h=0;h<r.length;h++)a(h,r[h])})}var ga=D1;var N1=setTimeout;function Wg(n){return Boolean(n&&typeof n.length<"u")}function G1(){}function B1(n,t){return function(){n.apply(t,arguments)}}function Ut(n){if(!(this instanceof Ut))throw new TypeError("Promises must be constructed via new");if(typeof n!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Xg(n,this)}function zg(n,t){for(;n._state===3;)n=n._value;if(n._state===0){n._deferreds.push(t);return}n._handled=!0,Ut._immediateFn(function(){var e=n._state===1?t.onFulfilled:t.onRejected;if(e===null){(n._state===1?Ac:Ns)(t.promise,n._value);return}var i;try{i=e(n._value)}catch(r){Ns(t.promise,r);return}Ac(t.promise,i)})}function Ac(n,t){try{if(t===n)throw new TypeError("A promise cannot be resolved with itself.");if(t&&(typeof t=="object"||typeof t=="function")){var e=t.then;if(t instanceof Ut){n._state=3,n._value=t,Lc(n);return}else if(typeof e=="function"){Xg(B1(e,t),n);return}}n._state=1,n._value=t,Lc(n)}catch(i){Ns(n,i)}}function Ns(n,t){n._state=2,n._value=t,Lc(n)}function Lc(n){n._state===2&&n._deferreds.length===0&&Ut._immediateFn(function(){n._handled||Ut._unhandledRejectionFn(n._value)});for(var t=0,e=n._deferreds.length;t<e;t++)zg(n,n._deferreds[t]);n._deferreds=null}function U1(n,t,e){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof t=="function"?t:null,this.promise=e}function Xg(n,t){var e=!1;try{n(function(i){e||(e=!0,Ac(t,i))},function(i){e||(e=!0,Ns(t,i))})}catch(i){if(e)return;e=!0,Ns(t,i)}}Ut.prototype.catch=function(n){return this.then(null,n)};Ut.prototype.then=function(n,t){var e=new this.constructor(G1);return zg(this,new U1(n,t,e)),e};Ut.prototype.finally=ma;Ut.all=function(n){return new Ut(function(t,e){if(!Wg(n))return e(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(n);if(i.length===0)return t([]);var r=i.length;function o(h,c){try{if(c&&(typeof c=="object"||typeof c=="function")){var d=c.then;if(typeof d=="function"){d.call(c,function(m){o(h,m)},e);return}}i[h]=c,--r===0&&t(i)}catch(m){e(m)}}for(var a=0;a<i.length;a++)o(a,i[a])})};Ut.allSettled=ga;Ut.resolve=function(n){return n&&typeof n=="object"&&n.constructor===Ut?n:new Ut(function(t){t(n)})};Ut.reject=function(n){return new Ut(function(t,e){e(n)})};Ut.race=function(n){return new Ut(function(t,e){if(!Wg(n))return e(new TypeError("Promise.race accepts an array"));for(var i=0,r=n.length;i<r;i++)Ut.resolve(n[i]).then(t,e)})};Ut._immediateFn=typeof setImmediate=="function"&&function(n){setImmediate(n)}||function(n){N1(n,0)};Ut._unhandledRejectionFn=function(t){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var Yg=Ut;var Fr=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}();typeof Fr.Promise!="function"?Fr.Promise=Yg:(Fr.Promise.prototype.finally||(Fr.Promise.prototype.finally=ma),Fr.Promise.allSettled||(Fr.Promise.allSettled=ga));s0().shim();function Bv(n){let t=n||qg;return new Bi({image:new Ui({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:t})})}function ou(n,t,e){let i=[],r=[],o="https://dawa.aws.dk/adresser?format=json&struktur=mini&q=";return n.forEach(function(a){let h=new ra;for(let d in a)h.set(d,a[d]);a.lon&&a.lat&&h.set("geometry",new On(An([a.lon,a.lat],"EPSG:25832")));let c=i.find(function(d){return d===a.type});if(!c){let d=new ta({}),m=new Lr({source:d,style:Bv(t[a.type])});i.push(m),c=m}c.getSource().addFeature(h),a.address&&(!a.lon||!a.lat)&&r.push((0,Ra.default)({method:"get",url:o+a.address,feature:h}))}),r.length>0&&Ra.default.all(r).then(Ra.default.spread((...a)=>{a.forEach(function(h){let c=h.data[0].x,d=h.data[0].y;h.config.feature.set("geometry",new On(An([c,d],"EPSG:25832")))}),e.autoCenter()})),i}var qs={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var au=class extends Cn{constructor(t){t=t||{};let e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(qs.PRELOAD)}setPreload(t){this.set(qs.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(qs.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(qs.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}},o0=au;var hu=class extends $i{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(K.CHANGE)}release(){this.state===Q.ERROR&&this.setState(Q.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==Q.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==Q.LOADED){t.interimTile=null;break}else t.getState()==Q.LOADING?e=t:t.getState()==Q.IDLE?e.interimTile=t.interimTile:e=t;t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==Q.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){ct()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(!i)i=e,this.transitionStarts_[t]=i;else if(i===-1)return 1;let r=e-i+1e3/60;return r>=this.transition_?1:kh(r/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}},wa=hu;var lu=class extends wa{constructor(t,e,i,r,o,a){super(t,e,a),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(t){this.image_=t,this.state=Q.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Q.ERROR,this.unlistenImage_(),this.image_=Uv(),this.changed()}handleImageLoad_(){let t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Q.LOADED:this.state=Q.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Q.ERROR&&(this.state=Q.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Q.IDLE&&(this.state=Q.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=$o(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};function Uv(){let n=Gt(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}var Ia=lu;var jv=10,a0=.25,cu=class{constructor(t,e,i,r,o,a){this.sourceProj_=t,this.targetProj_=e;let h={},c=Ln(this.targetProj_,this.sourceProj_);this.transformInv_=function(R){let I=R[0]+"/"+R[1];return h[I]||(h[I]=c(R)),h[I]},this.maxSourceExtent_=r,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&gt(r)==gt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?gt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?gt(this.targetProj_.getExtent()):null;let d=Pe(i),m=hr(i),p=ar(i),E=or(i),M=this.transformInv_(d),b=this.transformInv_(m),w=this.transformInv_(p),v=this.transformInv_(E),S=jv+(a?Math.max(0,Math.ceil(Math.log2(ns(i)/(a*a*256*256)))):0);if(this.addQuad_(d,m,p,E,M,b,w,v,S),this.wrapsXInSource_){let R=1/0;this.triangles_.forEach(function(I,A,L){R=Math.min(R,I.source[0][0],I.source[1][0],I.source[2][0])}),this.triangles_.forEach(function(I){if(Math.max(I.source[0][0],I.source[1][0],I.source[2][0])-R>this.sourceWorldWidth_/2){let A=[[I.source[0][0],I.source[0][1]],[I.source[1][0],I.source[1][1]],[I.source[2][0],I.source[2][1]]];A[0][0]-R>this.sourceWorldWidth_/2&&(A[0][0]-=this.sourceWorldWidth_),A[1][0]-R>this.sourceWorldWidth_/2&&(A[1][0]-=this.sourceWorldWidth_),A[2][0]-R>this.sourceWorldWidth_/2&&(A[2][0]-=this.sourceWorldWidth_);let L=Math.min(A[0][0],A[1][0],A[2][0]);Math.max(A[0][0],A[1][0],A[2][0])-L<this.sourceWorldWidth_/2&&(I.source=A)}}.bind(this))}h={}}addTriangle_(t,e,i,r,o,a){this.triangles_.push({source:[r,o,a],target:[t,e,i]})}addQuad_(t,e,i,r,o,a,h,c,d){let m=Za([o,a,h,c]),p=this.sourceWorldWidth_?gt(m)/this.sourceWorldWidth_:null,E=this.sourceWorldWidth_,M=this.sourceProj_.canWrapX()&&p>.5&&p<1,b=!1;if(d>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){let v=Za([t,e,i,r]);b=gt(v)/this.targetWorldWidth_>a0||b}!M&&this.sourceProj_.isGlobal()&&p&&(b=p>a0||b)}if(!b&&this.maxSourceExtent_&&isFinite(m[0])&&isFinite(m[1])&&isFinite(m[2])&&isFinite(m[3])&&!Nt(m,this.maxSourceExtent_))return;let w=0;if(!b&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(h[0])||!isFinite(h[1])||!isFinite(c[0])||!isFinite(c[1]))){if(d>0)b=!0;else if(w=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(h[0])||!isFinite(h[1])?2:0)+(!isFinite(c[0])||!isFinite(c[1])?1:0),w!=1&&w!=2&&w!=4&&w!=8)return}if(d>0){if(!b){let v=[(t[0]+i[0])/2,(t[1]+i[1])/2],S=this.transformInv_(v),R;M?R=(Oe(o[0],E)+Oe(h[0],E))/2-Oe(S[0],E):R=(o[0]+h[0])/2-S[0];let I=(o[1]+h[1])/2-S[1];b=R*R+I*I>this.errorThresholdSquared_}if(b){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){let v=[(e[0]+i[0])/2,(e[1]+i[1])/2],S=this.transformInv_(v),R=[(r[0]+t[0])/2,(r[1]+t[1])/2],I=this.transformInv_(R);this.addQuad_(t,e,v,R,o,a,S,I,d-1),this.addQuad_(R,v,i,r,I,S,h,c,d-1)}else{let v=[(t[0]+e[0])/2,(t[1]+e[1])/2],S=this.transformInv_(v),R=[(i[0]+r[0])/2,(i[1]+r[1])/2],I=this.transformInv_(R);this.addQuad_(t,v,R,r,o,S,I,c,d-1),this.addQuad_(v,e,i,R,S,a,h,I,d-1)}return}}if(M){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(w&11)==0&&this.addTriangle_(t,i,r,o,h,c),(w&14)==0&&this.addTriangle_(t,i,e,o,h,a),w&&((w&13)==0&&this.addTriangle_(e,r,t,a,c,o),(w&7)==0&&this.addTriangle_(e,r,i,a,c,h))}calculateSourceExtent(){let t=Ft();return this.triangles_.forEach(function(e,i,r){let o=e.source;Mn(t,o[0]),Mn(t,o[1]),Mn(t,o[2])}),t}getTriangles(){return this.triangles_}},h0=cu;var uu,fu=[];function l0(n,t,e,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(t,e),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(t,i)+1,Math.max(e,r)),n.restore()}function du(n,t){return Math.abs(n[t*4]-210)>2||Math.abs(n[t*4+3]-.75*255)>2}function qv(){if(uu===void 0){let n=document.createElement("canvas").getContext("2d");n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",l0(n,4,5,4,0),l0(n,4,5,0,5);let t=n.getImageData(0,0,3,3).data;uu=du(t,0)||du(t,4)||du(t,8)}return uu}function Aa(n,t,e,i){let r=Pn(e,t,n),o=yr(t,i,e),a=t.getMetersPerUnit();a!==void 0&&(o*=a);let h=n.getMetersPerUnit();h!==void 0&&(o/=h);let c=n.getExtent();if(!c||tn(c,r)){let d=yr(n,o,r)/o;isFinite(d)&&d>0&&(o/=d)}return o}function c0(n,t,e,i){let r=oi(e),o=Aa(n,t,r,i);return(!isFinite(o)||o<=0)&&po(e,function(a){return o=Aa(n,t,a,i),isFinite(o)&&o>0}),o}function u0(n,t,e,i,r,o,a,h,c,d,m,p){let E=Gt(Math.round(e*n),Math.round(e*t),fu);if(p||(E.imageSmoothingEnabled=!1),c.length===0)return E.canvas;E.scale(e,e);function M(A){return Math.round(A*e)/e}E.globalCompositeOperation="lighter";let b=Ft();c.forEach(function(A,L,F){go(b,A.extent)});let w=gt(b),v=oe(b),S=Gt(Math.round(e*w/i),Math.round(e*v/i));p||(S.imageSmoothingEnabled=!1);let R=e/i;c.forEach(function(A,L,F){let D=A.extent[0]-b[0],B=-(A.extent[3]-b[3]),q=gt(A.extent),W=oe(A.extent);A.image.width>0&&A.image.height>0&&S.drawImage(A.image,d,d,A.image.width-2*d,A.image.height-2*d,D*R,B*R,q*R,W*R)});let I=Pe(a);return h.getTriangles().forEach(function(A,L,F){let D=A.source,B=A.target,q=D[0][0],W=D[0][1],Z=D[1][0],nt=D[1][1],st=D[2][0],bt=D[2][1],et=M((B[0][0]-I[0])/o),V=M(-(B[0][1]-I[1])/o),H=M((B[1][0]-I[0])/o),J=M(-(B[1][1]-I[1])/o),_t=M((B[2][0]-I[0])/o),ft=M(-(B[2][1]-I[1])/o),Lt=q,U=W;q=0,W=0,Z-=Lt,nt-=U,st-=Lt,bt-=U;let ce=[[Z,nt,0,0,H-et],[st,bt,0,0,_t-et],[0,0,Z,nt,J-V],[0,0,st,bt,ft-V]],xt=dd(ce);if(!!xt){if(E.save(),E.beginPath(),qv()||!p){E.moveTo(H,J);let St=4,ei=et-H,ue=V-J;for(let jt=0;jt<St;jt++)E.lineTo(H+M((jt+1)*ei/St),J+M(jt*ue/(St-1))),jt!=St-1&&E.lineTo(H+M((jt+1)*ei/St),J+M((jt+1)*ue/(St-1)));E.lineTo(_t,ft)}else E.moveTo(H,J),E.lineTo(et,V),E.lineTo(_t,ft);E.clip(),E.transform(xt[0],xt[2],xt[1],xt[3],et,V),E.translate(b[0]-Lt,b[3]-U),E.scale(i/e,-i/e),E.drawImage(S.canvas,0,0),E.restore()}}),m&&(E.save(),E.globalCompositeOperation="source-over",E.strokeStyle="black",E.lineWidth=1,h.getTriangles().forEach(function(A,L,F){let D=A.target,B=(D[0][0]-I[0])/o,q=-(D[0][1]-I[1])/o,W=(D[1][0]-I[0])/o,Z=-(D[1][1]-I[1])/o,nt=(D[2][0]-I[0])/o,st=-(D[2][1]-I[1])/o;E.beginPath(),E.moveTo(W,Z),E.lineTo(B,q),E.lineTo(nt,st),E.closePath(),E.stroke()}),E.restore()),E.canvas}var mu=class extends wa{constructor(t,e,i,r,o,a,h,c,d,m,p,E){super(o,Q.IDLE,{interpolate:!!E}),this.renderEdges_=p!==void 0?p:!1,this.pixelRatio_=h,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=r,this.wrappedTileCoord_=a||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;let M=r.getTileCoordExtent(this.wrappedTileCoord_),b=this.targetTileGrid_.getExtent(),w=this.sourceTileGrid_.getExtent(),v=b?en(M,b):M;if(ns(v)===0){this.state=Q.EMPTY;return}let S=t.getExtent();S&&(w?w=en(w,S):w=S);let R=r.getResolution(this.wrappedTileCoord_[0]),I=c0(t,i,v,R);if(!isFinite(I)||I<=0){this.state=Q.EMPTY;return}let A=m!==void 0?m:.5;if(this.triangulation_=new h0(t,i,v,w,I*A,R),this.triangulation_.getTriangles().length===0){this.state=Q.EMPTY;return}this.sourceZ_=e.getZForResolution(I);let L=this.triangulation_.calculateSourceExtent();if(w&&(t.canWrapX()?(L[1]=pt(L[1],w[1],w[3]),L[3]=pt(L[3],w[1],w[3])):L=en(L,w)),!ns(L))this.state=Q.EMPTY;else{let F=e.getTileRangeForExtentAndZ(L,this.sourceZ_);for(let D=F.minX;D<=F.maxX;D++)for(let B=F.minY;B<=F.maxY;B++){let q=d(this.sourceZ_,D,B,h);q&&this.sourceTiles_.push(q)}this.sourceTiles_.length===0&&(this.state=Q.EMPTY)}}getImage(){return this.canvas_}reproject_(){let t=[];if(this.sourceTiles_.forEach(function(e,i,r){e&&e.getState()==Q.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,t.length===0)this.state=Q.ERROR;else{let e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),r=typeof i=="number"?i:i[0],o=typeof i=="number"?i:i[1],a=this.targetTileGrid_.getResolution(e),h=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=u0(r,o,this.pixelRatio_,h,this.sourceTileGrid_.getExtent(),a,c,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=Q.LOADED}this.changed()}load(){if(this.state==Q.IDLE){this.state=Q.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,r){let o=e.getState();if(o==Q.IDLE||o==Q.LOADING){t++;let a=rt(e,K.CHANGE,function(h){let c=e.getState();(c==Q.LOADED||c==Q.ERROR||c==Q.EMPTY)&&(dt(a),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(a)}}.bind(this)),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,i,r){e.getState()==Q.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(dt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Mo(this.canvas_.getContext("2d")),fu.push(this.canvas_),this.canvas_=null),super.release()}},Ws=mu;var gu=class extends ia{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Ft(),this.tmpTileRange_=new Wo(0,0,0,0)}isDrawableTile(t){let e=this.getLayer(),i=t.getState(),r=e.getUseInterimTilesOnError();return i==Q.LOADED||i==Q.EMPTY||i==Q.ERROR&&!r}getTile(t,e,i,r){let o=r.pixelRatio,a=r.viewState.projection,h=this.getLayer(),d=h.getSource().getTile(t,e,i,o,a);return d.getState()==Q.ERROR&&h.getUseInterimTilesOnError()&&h.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(d)||(d=d.getInterimTile()),d}getData(t){let e=this.frameState;if(!e)return null;let i=this.getLayer(),r=Ot(e.pixelToCoordinateTransform,t.slice()),o=i.getExtent();if(o&&!tn(o,r))return null;let a=e.pixelRatio,h=e.viewState.projection,c=e.viewState,d=i.getRenderSource(),m=d.getTileGridForProjection(c.projection),p=d.getTilePixelRatio(e.pixelRatio);for(let E=m.getZForResolution(c.resolution);E>=m.getMinZoom();--E){let M=m.getTileCoordForCoordAndZ(r,E),b=d.getTile(E,M[1],M[2],a,h);if(!(b instanceof Ia||b instanceof Ws)||b instanceof Ws&&b.getState()===Q.EMPTY)return null;if(b.getState()!==Q.LOADED)continue;let w=m.getOrigin(E),v=Bt(m.getTileSize(E)),S=m.getResolution(E),R=Math.floor(p*((r[0]-w[0])/S-M[1]*v[0])),I=Math.floor(p*((w[1]-r[1])/S-M[2]*v[1])),A=Math.round(p*d.getGutterForProjection(c.projection));return this.getImageData(b.getImage(),R+A,I+A)}return null}loadedTileCallback(t,e,i){return this.isDrawableTile(i)?super.loadedTileCallback(t,e,i):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){let i=t.layerStatesArray[t.layerIndex],r=t.viewState,o=r.projection,a=r.resolution,h=r.center,c=r.rotation,d=t.pixelRatio,m=this.getLayer(),p=m.getSource(),E=p.getRevision(),M=p.getTileGridForProjection(o),b=M.getZForResolution(a,p.zDirection),w=M.getResolution(b),v=t.extent,S=t.viewState.resolution,R=p.getTilePixelRatio(d),I=Math.round(gt(v)/S*d),A=Math.round(oe(v)/S*d),L=i.extent&&Ze(i.extent,o);L&&(v=en(v,Ze(i.extent,o)));let F=w*I/2/R,D=w*A/2/R,B=[h[0]-F,h[1]-D,h[0]+F,h[1]+D],q=M.getTileRangeForExtentAndZ(v,b),W={};W[b]={};let Z=this.createLoadedTileFinder(p,o,W),nt=this.tmpExtent,st=this.tmpTileRange_;this.newTiles_=!1;let bt=c?_o(r.center,S,c,t.size):void 0;for(let ce=q.minX;ce<=q.maxX;++ce)for(let xt=q.minY;xt<=q.maxY;++xt){if(c&&!M.tileCoordIntersectsViewport([b,ce,xt],bt))continue;let St=this.getTile(b,ce,xt,t);if(this.isDrawableTile(St)){let jt=lt(this);if(St.getState()==Q.LOADED){W[b][St.tileCoord.toString()]=St;let Ie=St.inTransition(jt);Ie&&i.opacity!==1&&(St.endTransition(jt),Ie=!1),!this.newTiles_&&(Ie||!this.renderedTiles.includes(St))&&(this.newTiles_=!0)}if(St.getAlpha(jt,t.time)===1)continue}let ei=M.getTileCoordChildTileRange(St.tileCoord,st,nt),ue=!1;ei&&(ue=Z(b+1,ei)),ue||M.forEachTileCoordParentTileRange(St.tileCoord,Z,st,nt)}let et=w/a*d/R;me(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/d,1/d,c,-I/2,-A/2);let V=co(this.pixelTransform);this.useContainer(e,V,this.getBackground(t));let H=this.context,J=H.canvas;rr(this.inversePixelTransform,this.pixelTransform),me(this.tempTransform,I/2,A/2,et,et,0,-I/2,-A/2),J.width!=I||J.height!=A?(J.width=I,J.height=A):this.containerReused||H.clearRect(0,0,I,A),L&&this.clipUnrotated(H,t,L),p.getInterpolate()||(H.imageSmoothingEnabled=!1),this.preRender(H,t),this.renderedTiles.length=0;let _t=Object.keys(W).map(Number);_t.sort(ri);let ft,Lt,U;i.opacity===1&&(!this.containerReused||p.getOpaque(t.viewState.projection))?_t=_t.reverse():(ft=[],Lt=[]);for(let ce=_t.length-1;ce>=0;--ce){let xt=_t[ce],St=p.getTilePixelSize(xt,d,o),ue=M.getResolution(xt)/w,jt=St[0]*ue*et,Ie=St[1]*ue*et,Wt=M.getTileCoordForCoordAndZ(Pe(B),xt),mn=M.getTileCoordExtent(Wt),_i=Ot(this.tempTransform,[R*(mn[0]-B[0])/w,R*(B[3]-mn[3])/w]),zi=R*p.getGutterForProjection(o),Be=W[xt];for(let gn in Be){let Ae=Be[gn],qn=Ae.tileCoord,Wn=Wt[1]-qn[1],zn=Math.round(_i[0]-(Wn-1)*jt),yi=Wt[2]-qn[2],zr=Math.round(_i[1]-(yi-1)*Ie),ee=Math.round(_i[0]-Wn*jt),pe=Math.round(_i[1]-yi*Ie),be=zn-ee,Ue=zr-pe,Te=b===xt,xi=Te&&Ae.getAlpha(lt(this),t.time)!==1,ii=!1;if(!xi)if(ft){U=[ee,pe,ee+be,pe,ee+be,pe+Ue,ee,pe+Ue];for(let Xi=0,Ei=ft.length;Xi<Ei;++Xi)if(b!==xt&&xt<Lt[Xi]){let kt=ft[Xi];Nt([ee,pe,ee+be,pe+Ue],[kt[0],kt[3],kt[4],kt[7]])&&(ii||(H.save(),ii=!0),H.beginPath(),H.moveTo(U[0],U[1]),H.lineTo(U[2],U[3]),H.lineTo(U[4],U[5]),H.lineTo(U[6],U[7]),H.moveTo(kt[6],kt[7]),H.lineTo(kt[4],kt[5]),H.lineTo(kt[2],kt[3]),H.lineTo(kt[0],kt[1]),H.clip())}ft.push(U),Lt.push(xt)}else H.clearRect(ee,pe,be,Ue);this.drawTileImage(Ae,t,ee,pe,be,Ue,zi,Te),ft&&!xi?(ii&&H.restore(),this.renderedTiles.unshift(Ae)):this.renderedTiles.push(Ae),this.updateUsedTiles(t.usedTiles,p,Ae)}}return this.renderedRevision=E,this.renderedResolution=w,this.extentChanged=!this.renderedExtent_||!Ri(this.renderedExtent_,B),this.renderedExtent_=B,this.renderedPixelRatio=d,this.renderedProjection=o,this.manageTilePyramid(t,p,M,d,o,v,b,m.getPreload()),this.scheduleExpireCache(t,p),this.postRender(H,t),i.extent&&H.restore(),H.imageSmoothingEnabled=!0,V!==J.style.transform&&(J.style.transform=V),this.container}drawTileImage(t,e,i,r,o,a,h,c){let d=this.getTileImage(t);if(!d)return;let m=lt(this),p=e.layerStatesArray[e.layerIndex],E=p.opacity*(c?t.getAlpha(m,e.time):1),M=E!==this.context.globalAlpha;M&&(this.context.save(),this.context.globalAlpha=E),this.context.drawImage(d,h,h,d.width-2*h,d.height-2*h,i,r,o,a),M&&this.context.restore(),E!==p.opacity?e.animate=!0:c&&t.endTransition(m)}getImage(){let t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){let i=function(r,o,a){let h=lt(r);h in a.usedTiles&&r.expireCache(a.viewState.projection,a.usedTiles[h])}.bind(null,e);t.postRenderFunctions.push(i)}}updateUsedTiles(t,e,i){let r=lt(e);r in t||(t[r]={}),t[r][i.getKey()]=!0}manageTilePyramid(t,e,i,r,o,a,h,c,d){let m=lt(e);m in t.wantedTiles||(t.wantedTiles[m]={});let p=t.wantedTiles[m],E=t.tileQueue,M=i.getMinZoom(),b=t.viewState.rotation,w=b?_o(t.viewState.center,t.viewState.resolution,b,t.size):void 0,v=0,S,R,I,A,L,F;for(F=M;F<=h;++F)for(R=i.getTileRangeForExtentAndZ(a,F,R),I=i.getResolution(F),A=R.minX;A<=R.maxX;++A)for(L=R.minY;L<=R.maxY;++L)b&&!i.tileCoordIntersectsViewport([F,A,L],w)||(h-F<=c?(++v,S=e.getTile(F,A,L,r,o),S.getState()==Q.IDLE&&(p[S.getKey()]=!0,E.isKeyQueued(S.getKey())||E.enqueue([S,m,i.getTileCoordCenter(S.tileCoord),I])),d!==void 0&&d(S)):e.useTile(F,A,L,o));e.updateCacheSize(v,o)}},d0=gu;var pu=class extends o0{constructor(t){super(t)}createRenderer(){return new d0(this)}},f0=pu;var _u=class{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){let i=this.entries_[t];return tt(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){let e=this.entries_[t];return tt(e!==void 0,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){let t=new Array(this.count_),e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.key_;return t}getValues(){let t=new Array(this.count_),e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(!!this.containsKey(t))return this.entries_[t].value_}pop(){let t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){tt(!(t in this.entries_),16);let i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}},m0=_u;var yu=class extends m0{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;let t=this.peekFirstKey(),i=Wf(t)[0];this.forEach(function(r){r.tileCoord[0]!==i&&(this.remove(zo(r.tileCoord)),r.release())}.bind(this))}},La=yu;var Pa={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};function Oa(n){let t=n.getDefaultTileGrid();return t||(t=Xv(n),n.setDefaultTileGrid(t)),t}function g0(n,t,e){let i=t[0],r=n.getTileCoordCenter(t),o=p0(e);if(tn(o,r))return t;{let a=gt(o),h=Math.ceil((o[0]-r[0])/a);return r[0]+=a*h,n.getTileCoordForCoordAndZ(r,i)}}function Wv(n,t,e,i){i=i!==void 0?i:"top-left";let r=zv(n,t,e);return new Yo({extent:n,origin:od(n,i),resolutions:r,tileSize:e})}function zv(n,t,e,i){t=t!==void 0?t:42,e=Bt(e!==void 0?e:256);let r=oe(n),o=gt(n);i=i>0?i:Math.max(o/e[0],r/e[1]);let a=t+1,h=new Array(a);for(let c=0;c<a;++c)h[c]=i/Math.pow(2,c);return h}function Xv(n,t,e,i){let r=p0(n);return Wv(r,t,e,i)}function p0(n){n=Rt(n);let t=n.getExtent();if(!t){let e=180*we.degrees/n.getMetersPerUnit();t=Ee(-e,-e,e,e)}return t}var xu=class extends Qo{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;let e=[256,256];this.tileGrid&&Bt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new La(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){let i=this.getTileCacheForProjection(t);i&&i.expireCache(e)}forEachLoadedTile(t,e,i,r){let o=this.getTileCacheForProjection(t);if(!o)return!1;let a=!0,h,c,d;for(let m=i.minX;m<=i.maxX;++m)for(let p=i.minY;p<=i.maxY;++p)c=Dn(e,m,p),d=!1,o.containsKey(c)&&(h=o.get(c),d=h.getState()===Q.LOADED,d&&(d=r(h)!==!1)),d||(a=!1);return a}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(t,e,i,r,o){return ct()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Oa(t)}getTileCacheForProjection(t){let e=this.getProjection();return tt(e===null||Gi(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){let r=this.getTileGridForProjection(i),o=this.getTilePixelRatio(e),a=Bt(r.getTileSize(t),this.tmpSize);return o==1?a:jo(a,o,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=e!==void 0?e:this.getProjection();let i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=g0(i,t,e)),zf(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){let i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,r){}},Fa=class extends Qt{constructor(t,e){super(t),this.tile=e}},_0=xu;function Yv(n,t){let e=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g;return function(a,h,c){if(a)return n.replace(e,a[0].toString()).replace(i,a[1].toString()).replace(r,a[2].toString()).replace(o,function(){let d=a[0],m=t.getFullTileRange(d);return tt(m,55),(m.getHeight()-a[2]-1).toString()})}}function y0(n,t){let e=n.length,i=new Array(e);for(let r=0;r<e;++r)i[r]=Yv(n[r],t);return ka(i)}function ka(n){return n.length===1?n[0]:function(t,e,i){if(t){let r=Xo(t),o=Oe(r,n.length);return n[o](t,e,i)}else return}}function Da(n){let t=[],e=/\{([a-z])-([a-z])\}/.exec(n);if(e){let i=e[1].charCodeAt(0),r=e[2].charCodeAt(0),o;for(o=i;o<=r;++o)t.push(n.replace(e[0],String.fromCharCode(o)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(n),e){let i=parseInt(e[2],10);for(let r=parseInt(e[1],10);r<=i;r++)t.push(n.replace(e[0],r.toString()));return t}return t.push(n),t}var zs=class extends _0{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===zs.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){let e=t.target,i=lt(e),r=e.getState(),o;r==Q.LOADING?(this.tileLoadingKeys_[i]=!0,o=Pa.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],o=r==Q.ERROR?Pa.TILELOADERROR:r==Q.LOADED?Pa.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new Fa(o,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){let e=Da(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;let e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(y0(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){let r=Dn(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}},x0=zs;var Eu=class extends x0{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Vv,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:Ia,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(let t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){let i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(let r in this.tileCacheForProjection){let o=this.tileCacheForProjection[r];o.expireCache(o==i?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!Gi(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!Gi(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){let e=this.getProjection();if(this.tileGrid&&(!e||Gi(e,t)))return this.tileGrid;{let i=lt(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Oa(t)),this.tileGridForProjection[i]}}getTileCacheForProjection(t){let e=this.getProjection();if(!e||Gi(e,t))return this.tileCache;{let i=lt(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new La(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}}createTile_(t,e,i,r,o,a){let h=[t,e,i],c=this.getTileCoordForTileUrlFunction(h,o),d=c?this.tileUrlFunction(c,r,o):void 0,m=new this.tileClass(h,d!==void 0?Q.IDLE:Q.EMPTY,d!==void 0?d:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return m.key=a,m.addEventListener(K.CHANGE,this.handleTileChange.bind(this)),m}getTile(t,e,i,r,o){let a=this.getProjection();if(!a||!o||Gi(a,o))return this.getTileInternal(t,e,i,r,a||o);{let h=this.getTileCacheForProjection(o),c=[t,e,i],d,m=zo(c);h.containsKey(m)&&(d=h.get(m));let p=this.getKey();if(d&&d.key==p)return d;{let E=this.getTileGridForProjection(a),M=this.getTileGridForProjection(o),b=this.getTileCoordForTileUrlFunction(c,o),w=new Ws(a,E,o,M,c,b,this.getTilePixelRatio(r),this.getGutter(),function(v,S,R,I){return this.getTileInternal(v,S,R,I,a)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return w.key=p,d?(w.interimTile=d,w.refreshInterimChain(),h.replace(m,w)):h.set(m,w),w}}}getTileInternal(t,e,i,r,o){let a=null,h=Dn(t,e,i),c=this.getKey();if(!this.tileCache.containsKey(h))a=this.createTile_(t,e,i,r,o,c),this.tileCache.set(h,a);else if(a=this.tileCache.get(h),a.key!=c){let d=a;a=this.createTile_(t,e,i,r,o,c),d.getState()==Q.IDLE?a.interimTile=d.interimTile:a.interimTile=d,a.refreshInterimChain(),this.tileCache.replace(h,a)}return a}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(let e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}setTileGridForProjection(t,e){let i=Rt(t);if(i){let r=lt(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=e)}}clear(){super.clear();for(let t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}};function Vv(n,t){n.getImage().src=t}var Na=Eu;function qr(n,t){let e=[];Object.keys(t).forEach(function(r){t[r]!==null&&t[r]!==void 0&&e.push(r+"="+encodeURIComponent(t[r]))});let i=e.join("&");return n=n.replace(/[?&]$/,""),n+=n.includes("?")?"&":"?",n+i}var vu=class extends Na{constructor(t){let e=t.requestEncoding!==void 0?t.requestEncoding:"KVP",i=t.tileGrid,r=t.urls;r===void 0&&t.url!==void 0&&(r=Da(t.url)),super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:r,wrapX:t.wrapX!==void 0?t.wrapX:!1,transition:t.transition,zDirection:t.zDirection}),this.version_=t.version!==void 0?t.version:"1.0.0",this.format_=t.format!==void 0?t.format:"image/jpeg",this.dimensions_=t.dimensions!==void 0?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style,this.requestEncoding_=e,this.setKey(this.getKeyForDimensions_()),r&&r.length>0&&(this.tileUrlFunction=ka(r.map(this.createFromWMTSTemplate.bind(this))))}setUrls(t){this.urls=t;let e=t.join(`
`);this.setTileUrlFunction(ka(t.map(this.createFromWMTSTemplate.bind(this))),e)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){let t=0,e=[];for(let i in this.dimensions_)e[t++]=i+"-"+this.dimensions_[i];return e.join("/")}updateDimensions(t){Object.assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(t){let e=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e=="KVP"&&Object.assign(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e=="KVP"?qr(t,i):t.replace(/\{(\w+?)\}/g,function(a,h){return h.toLowerCase()in i?i[h.toLowerCase()]:a});let r=this.tileGrid,o=this.dimensions_;return function(a,h,c){if(a){let d={TileMatrix:r.getMatrixId(a[0]),TileCol:a[1],TileRow:a[2]};Object.assign(d,o);let m=t;return e=="KVP"?m=qr(m,d):m=m.replace(/\{(\w+?)\}/g,function(p,E){return d[E]}),m}else return}}},E0=vu;var Xs="1.3.0";var Mu=class extends Na{constructor(t){t=t||{};let e=Object.assign({},t.params),i="TRANSPARENT"in e?e.TRANSPARENT:!0;super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:!i,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.tmpExtent_=Ft(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,i,r){let o=Rt(i),a=this.getProjection(),h=this.getTileGrid();h||(h=this.getTileGridForProjection(o));let c=h.getZForResolution(e,this.zDirection),d=h.getTileCoordForCoordAndZ(t,c);if(h.getResolutions().length<=d[0])return;let m=h.getResolution(d[0]),p=h.getTileCoordExtent(d,this.tmpExtent_),E=Bt(h.getTileSize(d[0]),this.tmpSize),M=this.gutter_;M!==0&&(E=gl(E,M,this.tmpSize),p=Ti(p,m*M,p)),a&&a!==o&&(m=Aa(a,o,t,m),p=fs(p,o,a),t=Pn(t,o,a));let b={SERVICE:"WMS",VERSION:Xs,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(b,this.params_,r);let w=Math.floor((t[0]-p[0])/m),v=Math.floor((p[3]-t[1])/m);return b[this.v13_?"I":"X"]=w,b[this.v13_?"J":"Y"]=v,this.getRequestUrl_(d,E,p,1,a||o,b)}getLegendUrl(t,e){if(this.urls[0]===void 0)return;let i={SERVICE:"WMS",VERSION:Xs,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e===void 0||e.LAYER===void 0){let r=this.params_.LAYERS;if(!(!Array.isArray(r)||r.length===1))return;i.LAYER=r}if(t!==void 0){let r=this.getProjection()?this.getProjection().getMetersPerUnit():1,o=28e-5;i.SCALE=t*r/o}return Object.assign(i,e),qr(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,i,r,o,a){let h=this.urls;if(!h)return;if(a.WIDTH=e[0],a.HEIGHT=e[1],a[this.v13_?"CRS":"SRS"]=o.getCode(),"STYLES"in this.params_||(a.STYLES=""),r!=1)switch(this.serverType_){case"geoserver":let p=90*r+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+p:a.FORMAT_OPTIONS="dpi:"+p;break;case"mapserver":a.MAP_RESOLUTION=90*r;break;case"carmentaserver":case"qgis":a.DPI=90*r;break;default:tt(!1,52);break}let c=o.getAxisOrientation(),d=i;if(this.v13_&&c.substr(0,2)=="ne"){let p;p=i[0],d[0]=i[1],d[1]=p,p=i[2],d[2]=i[3],d[3]=p}a.BBOX=d.join(",");let m;if(h.length==1)m=h[0];else{let p=Oe(Xo(t),h.length);m=h[p]}return qr(m,a)}getTilePixelRatio(t){return!this.hidpi_||this.serverType_===void 0?1:t}getKeyForParams_(){let t=0,e=[];for(let i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){let t=this.params_.VERSION||Xs;this.v13_=pd(t,"1.3")>=0}tileUrlFunction(t,e,i){let r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),r.getResolutions().length<=t[0])return;e!=1&&(!this.hidpi_||this.serverType_===void 0)&&(e=1);let o=r.getResolution(t[0]),a=r.getTileCoordExtent(t,this.tmpExtent_),h=Bt(r.getTileSize(t[0]),this.tmpSize),c=this.gutter_;c!==0&&(h=gl(h,c,this.tmpSize),a=Ti(a,o*c,a)),e!=1&&(h=jo(h,e,this.tmpSize));let d={SERVICE:"WMS",VERSION:Xs,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object.assign(d,this.params_),this.getRequestUrl_(t,h,a,e,i,d)}},v0=Mu;var Su=[10.61010906,56.15950977],Wr=[12e4,59e5,1e6,65e5],Ga=[1638.4,819.2,409.6,204.8,102.4,51.2,25.6,12.8,6.4,3.2,1.6,.8,.4,.2],M0=["00","01","02","03","04","05","06","07","08","09","10","11","12","13"],S0=[256,256];var Kv=function(){return navigator.userAgent.match(/Android/i)&&navigator.userAgent.match(/Mobile/i)},Hv=function(){return navigator.userAgent.match(/BlackBerry/i)},Zv=function(){return navigator.userAgent.match(/iPhone|iPod/i)},Jv=function(){return navigator.userAgent.match(/Opera Mini/i)},$v=function(){return navigator.userAgent.match(/IEMobile/i)},C0=function(){return Kv()||Hv()||Zv()||Jv()||$v()};var T0=C0()?"SDFI":"Styrelsen for Dataforsyning og Infrastruktur",Qv="https://download.dataforsyningen.dk/content/vilk%C3%A5r-og-betingelser",tM='&copy; <a target="_blank" href="'+Qv+'">'+T0+"</a>",eM="https://datafordeler.dk/vejledning/brugervilkaar/sdfi-geografiske-data/",iM='&copy; <a target="_blank" href="'+eM+'">'+T0+"</a>",b0=function(n,t){return t.source==="kf"?"https://api.dataforsyningen.dk/"+n+"?token="+t.token:t.source==="df"?"https://services.datafordeler.dk/"+n+"?username="+t.username+"&password="+t.password:(console.error('Unknown source: "'+t.source+'"'),null)},ti=function(n){let t=n.name||"",e=n.type||"",i=n.title||t,r=n.color||"black",o=!!n.visible,a=n.auth,h=n.service||"",c=n.layer||"",d=n.style||"default",m=n.version||"1.1.1",p=n.matrixSet,E=n.format||"",M=n.tileGrid,b=n.auth.source==="kf"?tM:n.auth.source==="df"?iM:n.attribution,w=null;if(e==="WMTS")w=new E0({attributions:b,crossOrigin:"Anonymous",url:b0(h,a),layer:c,matrixSet:p,format:E,tileGrid:M,style:d,size:S0});else if(e==="WMS")w=new v0({attributions:b,crossOrigin:"Anonymous",url:b0(h,a),params:{LAYERS:c,VERSION:m,TRANSPARENT:"true",FORMAT:E,STYLES:d}});else return console.error('Unknown service type: "'+e+'"'),null;return new f0({opacity:1,title:i,name:t,color:r,type:"base",visible:o,source:w,preload:1/0})};function Cu(n,t){let e=document.getElementById(n.target),i=document.createElement("div"),r=document.createElement("a"),o=document.createElement("div"),a=document.createElement("div"),h=document.createElement("div");a.className="title",h.className="description",i.className="ol-popup",e.appendChild(i),t?(i.appendChild(t),r=t.getElementsByClassName("closer")[0]):(r.className="ol-popup-closer",o.className="ol-popup-content",i.appendChild(r),i.appendChild(o),o.appendChild(a),o.appendChild(h));let c=new $f({element:i,autoPan:!0,autoPanAnimation:{duration:250}});n.olMap.addOverlay(c),r&&(r.onclick=function(){return c.setPosition(void 0),r.blur(),!1}),n.olMap.on("singleclick",function(d){let m=n.olMap.forEachFeatureAtPixel(d.pixel,function(p){return p});!m||(t?t.childNodes.forEach(function(p){let E=m.get(p.className);E&&(p.innerHTML=E)}):(a.innerHTML=m.get("title")||"",h.innerHTML=m.get("description")||""),c.setPosition(m.getGeometry().getCoordinates()))}),n.olMap.on("pointermove",function(d){n.olMap.getTargetElement().style.cursor=n.olMap.hasFeatureAtPixel(d.pixel)?"pointer":""})}var jn=class{constructor(t){let e=t.background||"",i=typeof t.zoomSlider>"u"?!0:t.zoomSlider,r=typeof t.scaleLine>"u"?!0:t.scaleLine,o=t.layerSwitcher||!1,a=typeof t.myLocation>"u"?!0:t.myLocation,h=t.view,c=h&&h.center==="auto",d=h&&typeof h.center!="string"?h.center||Su:Su,m=h&&h.zoom==="auto",p=t.extent||!1;this.zoom=h&&h.zoom||2;let E=typeof t.fullScreen>"u"?!0:t.fullScreen,M=t.markers||[],b=t.icons||{},w=t.popup||null,v=typeof t.showPopup>"u"?!0:t.showPopup;this._target=t.target||"map",this._source=t.source||"kf",this._token=t.token||"",this._username=t.username||"",this._password=t.password||"",this.autocenter=c,this.autoZoom=m,bu.default.defs("EPSG:25832","+proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs"),Yf(bu.default);let S=Rt("EPSG:25832");S.setExtent(Wr);let R=new Vo({extent:Wr,resolutions:Ga,matrixIds:M0}),I=new Vo({extent:Wr,resolutions:Ga,matrixIds:["L00","L01","L02","L03","L04","L05","L06","L07","L08","L09","L10","L11","L12","L13"]}),A=new Vo({extent:Wr,resolutions:Ga,matrixIds:["00","01","02","03","04","05","06","07","08","09","10","11","12","13"]}),L={source:"kf",token:this._token},F={source:"df",username:this._username,password:this._password},D=[];this._username&&this._password?(D.push(ti({name:"dtk_skaermkort",type:"WMTS",title:"Sk\xE6rmkort",visible:e==="dtk_skaermkort",service:"DKskaermkort/topo_skaermkort_wmts/1.0.0/Wmts",layer:"topo_skaermkort",matrixSet:"View1",format:"image/jpeg",tileGrid:A,auth:F})),D.push(ti({name:"dtk_skaermkort_daempet",type:"WMTS",title:"Sk\xE6rmkort d\xE6mpet",visible:e!=="orto_foraar"&&e!=="forvaltning"&&e!=="dtk_skaermkort",service:"DKskaermkort/topo_skaermkort_daempet/1.0.0/Wmts",layer:"topo_skaermkort_daempet",matrixSet:"View1",format:"image/jpeg",tileGrid:A,auth:F})),D.push(ti({name:"orto_foraar",type:"WMTS",title:"Ortofoto",color:"white",visible:e==="orto_foraar",service:"GeoDanmarkOrto/orto_foraar_wmts/1.0.0/Wmts",layer:"orto_foraar_wmts",matrixSet:"KortforsyningTilingDK",format:"image/jpeg",tileGrid:A,auth:F}))):this._token&&(D.push(ti({name:"dtk_skaermkort",type:"WMTS",title:"Sk\xE6rmkort",visible:e==="dtk_skaermkort",service:"topo_skaermkort_wmts_DAF",layer:"topo_skaermkort",matrixSet:"View1",format:"image/jpeg",tileGrid:R,auth:L})),D.push(ti({name:"dtk_skaermkort_daempet",type:"WMTS",title:"Sk\xE6rmkort d\xE6mpet",visible:e!=="orto_foraar"&&e!=="forvaltning"&&e!=="dtk_skaermkort",service:"topo_skaermkort_daempet_DAF",layer:"topo_skaermkort_daempet",matrixSet:"View1",format:"image/jpeg",tileGrid:R,auth:L})),D.push(ti({name:"orto_foraar",type:"WMTS",title:"Ortofoto",color:"white",visible:e==="orto_foraar",service:"orto_foraar_wmts_DAF",layer:"orto_foraar_wmts",matrixSet:"KortforsyningTilingDK",format:"image/jpeg",tileGrid:R,auth:L}))),this._token&&(D.push(ti({name:"forvaltning",type:"WMS",title:"Basiskort",visible:e==="forvaltning",service:"forvaltning2",layer:"basis_kort",format:"image/png",auth:L})),D.push(ti({name:"kommunikation",type:"WMS",title:"Kommuni- kation",visible:e==="kommunikation",service:"kommunikation",layer:"Kommunikationskort",format:"image/png",auth:L})),D.push(ti({name:"natur_friluftskort",type:"WMTS",title:"Natur og Friluftskort",visible:e==="natur_friluftskort",service:"natur_friluftskort",layer:"nfkort",matrixSet:"View1",format:"image/jpeg",tileGrid:I,auth:L})));let B=[];t.overlays&&t.overlays.forEach(function(W){W.source==="kf"?(W.auth=L,W.tileGrid=R):W.source==="df"&&(W.auth=F,W.tileGrid=A),B.push(ti(W))}),this._map=new qf({target:this._target,layers:[new Di({title:"Base maps",layers:D}),new Di({title:"Kort",layers:B}),new Di({title:"Hidden",layers:[]})],controls:_s({attribution:!1,zoom:i}),view:new ui({center:An(d,"EPSG:25832"),zoom:this.zoom,resolutions:R.getResolutions(),projection:S,extent:p||Wr})}),this._map.addControl(new ps({collapsible:!1})),r&&this._map.addControl(new wl),i&&this._map.addControl(new Al),E&&this._map.addControl(new Cl),a&&this._map.addControl(new ks({zoomSlider:i})),this._layerSwitcher=new Nn({visible:o}),this._map.addControl(this._layerSwitcher),this.markerLayers=ou(M,b,this);let q=this;this.markerLayers.forEach(function(W){q._map.addLayer(W)}),v&&Cu(this,w),this.autoCenter(),this._map.on("click",function(W){document.activeElement.blur()}),i&&this.adjustControlsCss()}addVectorLayer(t,e,i){this._map.addLayer(new Lr({name:i,visible:!1,source:t,style:e}))}getVectorLayer(t){return this._map.getLayers().getArray().find(function(e){return e.get("name")==="name"})}autoCenter(){if(!this.autocenter||!this.markerLayers[0])return;let t=Ft();this.markerLayers.forEach(function(e){go(t,e.getSource().getExtent())}),t[0]!==1/0&&(this._map.getView().fit(t),this._map.getView().setZoom(Math.floor(this._map.getView().getZoom())),this.autoZoom||this._map.getView().setZoom(this.zoom),this._map.updateSize())}toggleBackground(t){this._layerSwitcher.toggleBackground(t)}toggleLayer(t,e){let i=this._map.getLayers().getArray(),r=i.find(function(a){return a.get("name")===t});if(r){r.setVisible(e);return}i.find(function(a){return a.get("title")==="Kort"}).get("layers").getArray().forEach(function(a,h,c){a.get("name")===t&&a.setVisible(e)})}adjustControlsCss(){let t=document.getElementsByClassName("ol-zoomslider")[0],e=document.getElementsByClassName("ol-zoom-out")[0],i=document.getElementsByClassName("ol-my-location")[0],r=document.getElementById(this.target).offsetHeight;if(r<300)t.style.display=Lo,i&&(i.style.bottom="97px");else{let o=Math.floor(r*.25)+6+"px";e.style.marginTop=o}}get olMap(){return this._map}get target(){return this._target}};var Ys=class{constructor(t){let e=document.querySelectorAll("span.geomarker"),i=document.querySelectorAll("div.geomap"),r=[];for(let c=0;c<e.length;c++)r.push(e[c]);let o=[];for(let c=0;c<i.length;c++)o.push(i[c]);let a=[];r.forEach(function(c){let d=c.dataset,m={};for(let p in d)p==="lat"||p==="lon"?m[p]=Number(d[p]):m[p]=d[p];a.push(m)},a);let h=[];return o.forEach(function(c){let d=typeof c.dataset.type>"u"?[""]:c.dataset.type.split(","),m=a.filter(function(w){return w.type?w.type.indexOf(d)>-1:!0},d),p=typeof c.dataset.overlays>"u"?[""]:c.dataset.overlays.split(","),E=t.overlays?t.overlays.filter(function(w){return w.name?w.name.indexOf(p)>-1:!0}):[],M=c.dataset.center==="auto",b=c.dataset.centerLon?[Number(c.dataset.centerLon),Number(c.dataset.centerLat)]:"auto";this._map=new jn({target:c.id,token:c.dataset.token,username:c.dataset.username,password:c.dataset.password,background:c.dataset.background,icons:t.icons,overlays:E,markers:m,popup:t.popup,showPopup:c.dataset.showPopup!=="false",zoomSlider:c.dataset.zoomslider==="true",fullScreen:c.dataset.fullscreen==="true",myLocation:c.dataset.mylocation==="true",scaleLine:c.dataset.scaleline==="true",layerSwitcher:c.dataset.layerswitcher==="true",extent:c.dataset.extent?JSON.parse(c.dataset.extent):null,view:{center:M?"auto":b,zoom:c.dataset.zoom}}),h.push(this._map)},t,a),h}};return Py(nM);})();
//# sourceMappingURL=okapi-1.6.0.min.js.map
